$BV.Internal.define("profileSnapshot",[window],["exports","jquery.core","wrapperDivs","contentDisplay","animationQueueing","domUtils"],function(b,c,d,a){b.bvProfileSnapshot=(function(){var i;var t;var q;var k;function g(v,u){bvAnimationEventQueue.pushAnimationEvent(function(){if(d("#"+v+" .BVDI_PSSnapshotNotLoaded").size()>0){var w=setTimeout(function(){d("#"+v+" .BVDI_PSSnapshotLoading").addClass("BVDIHidden");d("#"+v+" .BVDI_PSSnapshotTimeoutError").removeClass("BVDIHidden")},15000);d.ajax({type:"GET",url:u,data:null,dataType:"script",scriptCharset:"utf-8",cache:true,success:function(){if(w){clearTimeout(w)}}})}},arguments)}function p(w,u,x,v){m();o();if(i==w){return false}g(w,u);if(i){j(i,0)}r(w,x);i=w;if(!k){d("#"+i).stop(true,true).fadeIn(v)}f();return true}function r(u,v){bvExpandDivWithIEControlsFrame(u,"BVDI_PSIEControlsFrame",v,function(){for(var w=0;w<arguments.length;w++){d("#"+arguments[w]).removeClass("BVDIHidden")}})}function l(v,u,w){if(i==v){j(v,0)}else{p(v,u,w,0)}}function j(u,v){m();o();if(i==u){function w(){d("#"+u+", #BVDI_PSIEControlsFrame").addClass("BVDIHidden").each(function(){bvPositionDefault(this)})}if(k){w()}else{d("#"+u).stop(true,true).fadeOut(v,w)}i=null}}function s(u){bvAnimationEventQueue.pushAnimationEvent(function(){if(i){j(i,u)}},arguments)}function m(){if(t){clearTimeout(t);t=null}}function o(){if(q){clearTimeout(q);q=null}}function n(v,u){o();m();t=setTimeout(function(){s(u)},v)}function e(w,u,y,x,v){m();o();if(i!=w){q=setTimeout(function(){p(w,u,y,v)},x)}}function h(){if(i){f()}}function f(){bvResizeIEControlsFrame(i,"BVDI_PSIEControlsFrame");var x=d("#"+(k?i:i.replace("BVDI_PSPopin","BVDI_PSMetaData"))),v=x.siblings().find('[class$="Nickname"],[class$="Avatar"]'),w=x.parent(),u=v.offset();d("#"+i+", #BVDI_PSIEControlsFrame").each(function(){if(!k){d(this).css({position:"absolute",left:u.left+"px",top:(u.top+v.outerHeight())+"px"})}bvPositionWhereVisible(this,v.get(0),w.get(0))})}c.initPopin=function(v){k=v.renderedInPlace;if(!k&&d("#"+v.id).length==0){var u=v.id.replace("BVDI_PSPopin","BVDI_PSMetaData");d("#"+u).clone(true).attr("id",v.id).appendTo("body");a.addWrapperDivs(v.id,v.rootWrappers)}};return{show:p,showHiddenPopinAfterDelay:e,toggle:l,hideOpenPopin:s,hideOpenPopinAfterDelay:n,onSnapshotInjection:h}})();c.onPageLoad=function(f,e){if(f==="initPopin"){c.initPopin(e)}}});
$BV.Internal.define("contentFocusingSupport",[window,document],["exports","jquery.core","cookies","contentDisplay"],function(g,b,a,h,d){var c={};function f(j,k,i){return c[j+k+"|"+i]||c[j+k+"|"]}function e(k,l,j,i){c[k+l+"|"+j]=i}g.bvShowContent=a.showContent=function(l,m,k,i){if(g.bvClosePopups){bvClosePopups()}var j=f(l,m,k);return j&&j.handleShowContent(k,i)};a.switchTabOnce=function(l,m,k,i){var j=f(l,m,k);return j&&j.handleSwitchTabOnce(k,i)};a.scrollContainers=function(i){if(i&&i.length>0){var o=i.offset().top;if(i.parents().length>2){var k=i.parents();for(var j=0;j<k.length-2;j++){try{var l=h(k[j]);var m=l.scrollTop()>0;if(!m){l.scrollTop(1);m=l.scrollTop()>0;l.scrollTop(0)}if(m&&l.css("overflow")!=="hidden"){l.scrollTop(o+l.scrollTop()-l.offset().top);o=l.offset().top}}catch(n){}}}h(g).scrollTop(o);return true}return false};a.postInjection=function(q,s,u,r){var p=q.application,k=u.apiConfig(),l=(k&&k.doShowContent)||(q.tabSwitcher&&g[q.tabSwitcher]),t=q.displayCode,o=u.getComponent(q.defaultContentContainerId),j=q.source,n=(k&&k.doScrollContent),m=(k&&(k.productId||k.categoryId))||"";a.registerShowContent(p,t,m,l,o,j,n);var i=$BV.Internal.newLatch(1);if(q.deepLinkId){i.queue(function(){a.showContent(p,t,m,q.deepLinkId)})}if(!q.submission&&r.processDisplayState){r.processDisplayState(t)}a.processReturnPosition(p,t,s,i,q.submission);i.release()};a.registerShowContent=function(l,m,o,p,j,n,i){var k=j?h(j).attr("id"):"";e(l,m,o,h.extend(f(l,m,o),{handleSwitchTabOnce:function(s,q){function r(){h.isFunction(p)&&p(l,m,s,q,h.noop,n)}if(!this.switchedTab){r(s,q);this.switchedTab=true}},handleShowContent:function(t,q){function v(){if(q||k!=""){if(q==""){q=k}var w=h("#"+q);if(w.length==0&&k!=""){w=h("#"+k)}return a.scrollContainers(w)}return false}function s(){return i&&i(v)===false||v()}function r(){return h.isFunction(p)&&p(l,m,t,q,s,n)===false||s()}var u=r();this.switchedTab=true;return u}}))};a.processReturnPosition=function(j,m,l,n,i){function o(q){var r=false;var p=q.split("/");if(p.length>1&&p[0]==j&&p[1]==m){if(d.get("bvZeroDeployFirst")){d.remove("bvZeroDeployFirst");f(j,m,p[2]).switchedTab=true}else{if(i){a.switchTabOnce.apply(g,p)}else{a.showContent.apply(g,p);n.increment();r=true}}}return r}var k=d.get("bvReturnPosition");if(k){if(o(k)){d.remove("bvReturnPosition")}}else{n.increment();l(function(p,r){var q=p.bvReturnPosition;if(q){if(o(q)){r("bvReturnPosition")}}n.release()})}};a.saveReturnPosition=function(j,k,l,i){d.set("bvReturnPosition",j+"/"+k+"/"+l+"/"+(i||""))};a.clearReturnPosition=function(j,l,m){var k=d.get("bvReturnPosition");if(k){var i=k.split("/");if(i.length>2&&i[0]==j&&i[1]==l&&i[2]==m){d.remove("bvReturnPosition")}}};a.onPageLoad=function(l,k,i,j){}});
$BV.Internal.define("facebookOpenGraph",[window,document],["exports","jquery.core","facebookConnect","cookies"],function(g,j,b,e,f,h){var k="bvPostFeedbackToFacebook";var i=null,m=null,d=false;function c(n){f.init(n);i=n.applicationNamespace;m=n.productUrl;d=true}function l(n){if(n.error){$BV.log(n.error.message,n)}}function a(n,p,o){if(!p||e.isFunction(p)){o=p||l;FB.api(n,function(q){if(!q){q={error:{message:"Unknown Facebook error."}}}if(q.error){q.path=n}o(q)})}else{o=o||l;FB.api(n,p,function(q){if(!q){q={error:{message:"Unknown Facebook error."}}}if(q.error){q.path=n;q.method=p}o(q)})}}b.publishAction=function(n,o){o=o||l;f.login(["publish_actions"],function(p){if(p.error){o(p)}else{if(!p.authResponse){response.error={message:"Facebook authentication cancelled by user."};o(p)}else{a("/me/"+i+":"+n+"?product="+m,"post",function(q){if(q.error){q.error.message="Error posting product feedback to Facebook Open Graph. "+q.error.message;o(q)}else{o({actionId:q.id})}})}}})};b.deleteAction=function(o,n){n=n||l;f.login(["publish_actions"],function(p){if(p.error){n(p)}else{if(!p.authResponse){response.error={message:"Facebook authentication cancelled by user."};n(p)}else{a(o,"delete",function(q){if(q.error){q.error.message="Error deleting product feedback from Facebook Open Graph. "+q.error.message;n(q)}else{n({})}})}}})};b.setEnabled=function(o){if(o){h.remove(k)}else{var n=new Date();n.setDate(n.getDate()+30);h.set(k,"disabled",null,null,n.toGMTString())}};b.isEnabled=function(){return d&&h.get(k)!=="disabled"};b.isInitialized=function(){return d};b.onPageLoad=function(o,n){if(o==="init"){c(n)}};b.isLoggedIn=function(){return f.isLoggedIn(["publish_actions"])}});
$BV.Internal.define("feedback",[window,document],["exports","jquery.core","cookies","requester","parseUri","analyticsHooks","facebookOpenGraph","jquery.effects.core","animationOptions","contentDisplay"],function(h,k,m,g,j,q,e,r,a){var c="bvFeedback",d=null;m.onInjection=function(s,u,t){g.each(u,function(x,w){w.$context=w.contentSectionSelector?g(w.contentSectionSelector,w.$contentRoot):w.$contentRoot;var v=b(w.$context,s,w,u);if(s.submission){v.bindHandlers()}try{v.applyCookies(t)}catch(y){$BV.log("feedback initialization failed; could not apply cookies : "+y)}})};function l(s,t){return new RegExp("^"+s.cookiePrefixes.Voting+"_([^_]+)_"+t+"$")}function n(s,t){return new RegExp("^"+s.cookiePrefixes[t]+"_(\\d+)$")}function o(s){if(typeof s==="object"&&s.fn){return function(t){var u=h[s.fn];if(typeof u==="function"){u.apply(h,(s.args||[]).concat([t]))}}}}function b(aq,P,ae,u){var ag={},F={},ab;if("voting" in P.props){ag=P.props.voting.dimensions;F=P.props.voting.content}if("contentFocusing" in P){ab=o(P.contentFocusing)}function Z(){ae.$content=g(ae.contentSelector,aq);L();if("Inappropriate" in P.cookiePrefixes){C("Inappropriate");K("Inappropriate")}if("Voting" in P.cookiePrefixes){for(var ay in ag){B(ay,s(ay))}}}function W(ay){if("Inappropriate" in P.cookiePrefixes){ah("Inappropriate",ay)}if("Voting" in P.cookiePrefixes){for(var az in ag){X(az,ay)}}}function C(ay){g(".BVDI_FVReportLink"+ay+" a",aq).each(function(){var az=g(this);az.unbind(J(["click","submitted"]));if(az.is(q.jsLinkSelector)){az.bind(J("click"),function(aC){var aD=g(this);var aB=au(this);if(!g(this).data("fvEnabled")){r.fireActionEvent(au(this).get(0),null,null,true);aC.stopImmediatePropagation();return false}var aA=aD.parents(ae.contentSelector).find(".BVDI_FVReport");if(aA.length>0){if(aA.hasClass("BVDI_FVReportPopin")&&!aA.is(":visible")){g(".BVDI_FVReport").trigger(J("hide"))}aA.trigger(J("toggle"));return false}aD.addClass("BVDI_FVPendingReport");aB.data("fvEvent",{pageX:aC.pageX,pageY:aC.pageY,target:aC.target});I(aB);q.asJsLink(aD).follow(true,true);aC.preventDefault()}).bind(J("submitted"),function(aE,aD,aA,aF){var aH=g(this);var aB=au(this);if(!al(aB.get(0),aF)){$BV.log("Message for "+aF+" was received by "+Y(this));return false}v(ay,V(aF));var aG=aA?aB:N(aB);var aC=aA?aB.data("fvEvent"):null;U(aB,aG,aD,".BVDI_ME",x("Message"),aC);j.remove("bvReturnPosition");aH.removeClass("BVDI_FVPendingReport");if(ay==="Inappropriate"){aH.parent().addClass("BVDI_FVReportLink"+ay+"Level0")}aE.preventDefault()}).data("fvEnabled",true)}else{if(az.attr("href").indexOf(".htm?")!=-1){az.bind(J("click"),function(aB){var aA=au(this);if(!g(this).data("fvEnabled")){r.fireActionEvent(au(this).get(0),null,null,true);aB.stopImmediatePropagation();return false}I(aA)}).data("fvEnabled",true)}}})}function L(){ae.$content.each(function(){g(this).unbind(J("postback")).bind(J("postback"),function(aA,aB,az,ay){if(!al(this,aB)){$BV.log("Message for "+aB+" was received by "+Y(this));return false}q.post(az,d,function(aC){if(ay[aC]){ay[aC]()}else{$BV.log("Unexpected message code: "+aC)}});return false})})}function K(ay){ae.$content.each(function(){g(this).unbind(J("editing")).bind(J("editing"),function(az,aI,aC,aD,aE){if(!al(this,aD)){$BV.log("Message for "+aD+" was received by "+Y(this));return false}var aG=g(this);var aF=".BVDI_FVReport";var aB=x("Report");var aH=aG.data("fvEvent");var aA=aC?aG:N(aG);U(aG,aA,aI,aF,aB,aC?aH:null,"BVDI_FVActiveReport"+ay,x("ActiveReport"));ai(ay,aA,g(az.target),aE);return false})})}function al(az,aA){var ay=false;Q(aA).each(function(){if(this==az){ay=true;return false}});return ay}function ai(aA,aB,az,ay){g(".BVDI_FVReport form",aB).each(function(){g(this).unbind(J(["submit","click"])).bind(J("submit"),function(){var aC=g(this);if(this.button=="submit"){q.postForm(this,this.button,function(aD){if(ay[aD]){ay[aD]()}else{$BV.log("Unexpected message code: "+aD)}})}else{az.removeClass(".BVDI_FVPendingReport")}aC.trigger(J("hide"));return false}).bind(J("click"),function(aC){var aD=g(aC.target);
if(!aD.is(":submit, input:image")){return}this.button=aD.attr("name")}).find(":input[name=devicefingerprint]").val((d||{}).devicefingerprint||"")})}function v(az,ay){ay.stop(true,true).addClass("BVDI_FVDisabledReport"+az,x("DisabledReport")).addClass("BVDI_FVVisitedReport"+az,x("VisitedReport"));ay.find(".BVDI_FVReportLink"+az+":first a").each(function(){var aA=g(this);ar(aA);O(aA,q.asJsOrHtmLink(aA));M(aA)})}function s(aA){var ay=[];for(var az in ag[aA].values){ay.push(az)}return new RegExp("\\bBVDI_FV("+ay.join("|")+")\\b")}function T(az,aE,ay,aK,aD,aC,aI){var aF=".BVDI_ME";var aB=x("Message");var aJ=az.data("fvEvent");var aA=aC?az:N(az);var aH=at(az,aA,aE,aF,aB,aC?aJ:null);function aG(){if(aI){a.publishAction(aD,function(aM){if(aM.error){$BV.log(aM.error.message,aM)}else{ad(ay,aD,aM.actionId,aK)}})}else{var aL=ax(ay,aD);if(aL){a.deleteAction(aL)}}}if(!a.isEnabled()||a.isLoggedIn()){if(a.isEnabled()){aG()}if(aH&&aH.find(".BVDIMessage").length>0){aH.find(".BVDIShareLinks").hide();aH.showMessage()}}else{if(aH){aH.find(".BVDILinkShareFB").one(J("click"),function(aL){aG();aH.hideMessage();aL.preventDefault()});aH.find(".BVDILinkIgnoreFB").one(J("click"),function(aL){a.setEnabled(false);aH.hideMessage();aL.preventDefault()});aH.find(".BVDILinkDenyFB").one(J("click"),function(aL){aH.hideMessage();aL.preventDefault()});aH.showMessage()}}}function B(az,ay){g(".BVDI_FVVotes"+az+" .BVDI_FVVote a",aq).each(function(){var aA=g(this);aA.unbind(J(["mouseenter","mouseleave","mousedown","keydown","mouseup","keyup","click","submitted"]));R(aA,az,aA.parent().attr("class").match(ay)[1]);if(aA.is(q.jsLinkSelector)){aA.bind(J("click"),function(aE){var aF=g(this);var aC=aF.parents(".BVDI_FVVotes").first();if(aC.data("fvLocked")){r.fireActionEvent(au(this).get(0),null,null,true);aE.stopImmediatePropagation();return false}aC.data("fvLocked",true);var aB=au(this);aF.addClass("BVDI_FVPendingVote");aB.data("fvEvent",{pageX:aE.pageX,pageY:aE.pageY,target:aE.target});var aD=q.asJsLink(aF);var aG=Y(this);D(P.cookiePrefixes.Voting,aG,az,aF.data("fvValue"),e(aD.getUrl()).authority);I(aB);aD.follow(true);if(ag[az].anonymousSubmissionAllowed){aF.trigger(J("voteDisplay"),[aF.data("fvValue"),aF.parent().is('[class *= "Undo"]')])}aE.preventDefault()}).bind(J("submitted"),function(aB,aF,aD,aE,aJ){var aI=g(this);var aC=au(this);if(!al(aC.get(0),aE)){$BV.log("Message for "+aE+" was received by "+Y(this));return false}if(!ag[az].anonymousSubmissionAllowed){aI.trigger(J("voteDisplay"),[aI.data("fvValue"),aI.parent().is('[class *= "Undo"]')])}j.remove("bvReturnPosition");G(aC,az,aI.data("fvValue")).removeClass("BVDI_FVPendingVote");var aG=Y(this);var aH=q.asJsLink(aI);T(aC,aF,aG,e(aH.getUrl()).authority,az,aD,aJ!="undo");aB.preventDefault()})}else{if(aA.attr("href").indexOf(".htm?")!=-1){aA.bind(J("click"),function(){var aC=g(this);var aB=au(this);var aD=Y(this);D(P.cookiePrefixes.Voting,aD,az,aC.data("fvValue"),e(aC.attr("href")).authority);I(aB)})}}});g(".BVDI_FVVoting"+az,aq).each(function(){g(this).unbind(J("voteDisplay")).bind(J("voteDisplay"),function(aC,aD,aA){var aE=Y(this);var aB=V(aE);t(aB,aE,az,aD,aA,true,x("DisplayVote"));return false})})}function R(ay,aA,az){ay.bind(J(["mouseenter","mouseleave","mousedown","keydown","mouseup","keyup","click"]),function(aB){if(!g(this).data("fvEnabled")){if(aB.type=="click"){r.fireActionEvent(au(this).get(0),null,null,true)}aB.stopImmediatePropagation()}}).bind(J("mouseenter"),function(){au(this).stop(true,true).addClass("BVDI_FVHoverVotes"+aA+az,x("HoverVote"))}).bind(J("mouseleave"),function(){au(this).stop(true,true).removeClass("BVDI_FVHoverVotes"+aA+az,x("HoverVote"))}).bind(J("mousedown"),function(aB){if(aB.which==1){au(this).stop(true,true).addClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))}}).bind(J("mouseup"),function(aB,aC){if(aB.which==1||aC){au(this).stop(true,true).removeClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))}}).bind(J("keydown"),function(aB){if(aB.which==13){au(this).stop(true,true).addClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))
}}).bind(J("keyup"),function(aB,aC){if(aB.which==13||aC){au(this).stop(true,true).removeClass("BVDI_FVActiveVotes"+aA+az,x("ActiveVote"))}}).data("fvValue",az).data("fvEnabled",true)}function H(az,ay,aA){return{valueCount:az,totalCount:ay,voteValue:aA,asCookieValuePrefix:function(){return(typeof this.valueCount==="number"?this.valueCount:"")+"_"+(typeof this.totalCount==="number"?this.totalCount:"")+"_"}}}function am(az){var ay=/(\d+)?_(\d+)?_(\w+)?/.exec(az);return ay?H(ay[1],ay[2],ay[3]):{}}function X(aA,ay){var az=l(P,aA);ay(function(aD){for(var aI in aD){var aC=az.exec(aI);if(aC){var aF=am(aD[aI]);if(!aF.voteValue){continue}var aH=aC[1];var aB=Q(aH);if(aB.length==0){continue}if(aF.voteValue=="Invalid"){t(aB,aH,aA,aF.voteValue,false,false,0);continue}var aE=av(aH,aA,aF.voteValue);var aG=aE.valueCount==aF.valueCount&&aE.totalCount==aF.totalCount;t(aB,aH,aA,aF.voteValue,false,aG,0)}}})}function ah(aA,ay){var az=n(P,aA);ay(function(aC){for(var aD in aC){var aB=az.exec(aD);if(aB){v(aA,Q(aB[1]))}}})}function I(ay){if(ab){ab(ay.parents("[id]:first").attr("id"))}}function av(aB,aA,az){var ay=F[aB][aA];return H(ay.values[az],ay.numEntries,az)}function G(ay,aA,az){return ay.find(".BVDI_FVVotes"+aA+" .BVDI_FV"+az+" a")}function au(az){var ay=g(az);if(ay.is(ae.contentSelector)){return ay}return ay.parents(ae.contentSelector).first()}function ao(az,ay){if(az.is(ay)){return az}return az.find(ay)}function Q(aA,ay){var az=ay?ay:ae;if("subjectId" in az){if(aA==az.subjectId){return ao(az.$context,az.contentSelector)}}else{return ao(g("#"+az.subjectIdPattern.replace("{id}",aA),az.$context),az.contentSelector)}return g()}function V(az){var ay=g();g.each(u,function(aB,aA){ay=ay.add(Q(az,aA))});return ay}function N(az){var ay=g(az);if(ay.hasClass("BVDI_FV")){return ay}return ay.find(".BVDI_FV:first")}function Y(az){var aC=g(az);if("subjectId" in ae){return ae.subjectId}else{var ay=ae.subjectIdPattern.split("{id}"),aB=ay[0]?'[id ^= "'+ay[0]+'"]':"",aA=ay[1]?'[id $= "'+ay[1]+'"]':"";if(!aC.is(aB+aA)){aC=aC.parents(aB+aA+":first")}if(ay[1]){return aC.attr("id").slice(ay[0].length,-ay[1].length)}else{return aC.attr("id").slice(ay[0].length)}}}function J(ay){if(g.isArray(ay)){return ay.join("."+c+" ")+"."+c}else{return ay+"."+c}}function x(ay){return c+ay}function U(){var ay=at.apply(this,arguments);if(ay){ay.showMessage()}}function at(aA,az,aD,aG,aI,aF,aE,aC){var aL,aH,ay;aL=aF?g(aG):V(Y(aA)).find(aG);if(!g.trim(aD)){aL.each(function(){g(this).trigger(J("hide"));g(this).remove()});return}az.append(aD);aH=az.children(aG).last();function aK(aM){if(aE){aA.stop(true,true).addClass(aE,aC)}if(aF){aH.fadeIn(aI)}else{aH.slideDown(aI)}aM.preventDefault()}function aJ(aM){if(aE){aA.stop(true,true).removeClass(aE,aC)}if(aF){aH.fadeOut(aI)}else{aH.slideUp(aI)}aM.preventDefault()}function aB(aM){if(aH.is(":visible")){aH.trigger(J("hide"))}else{aH.trigger(J("show"))}aM.preventDefault()}aH.bind(J("show"),aK);aH.bind(J("hide"),aJ);aH.bind(J("toggle"),aB);aH.hideMessage=function(){aH.trigger(J("hide"))};if(!aF&&aL.length==1&&aH.parent().get(0)==aL.parent().get(0)){aL.hide().remove();aH.showMessage=function(){aH.show()}}else{aL.each(function(){g(this).trigger(J("hide"));g(this).remove()});if(aF){aH.find(".BVDILinkClose").bind(J("click"),function(aM){aJ(aM)});aH.showMessage=function(){aH.trigger(J("show"));ay=aH.offsetParent().offset();aH.css({left:aF.pageX-ay.left,top:aF.pageY-ay.top});bvPositionWhereVisible(aH,aF.target,aF.target)}}else{aH.showMessage=function(){aH.trigger(J("show"))}}}return aH}function t(aF,aE,aD,aB,ay,aC,aA){var az=ag[aD];aF.each(function(){var aG=g(this);aG.find(".BVDI_FVVoting"+aD).each(function(){var aH=g(this);var aI=S(aH);aG.stop(true,true);if(ay){aG.removeClass("BVDI_FVVisitedVotes"+aD+aB,x("VisitedVote")).removeClass("BVDI_FVDisabledVotes"+aD,x("DisabledVote"))}else{aG.addClass("BVDI_FVVisitedVotes"+aD+aB,x("VisitedVote")).addClass("BVDI_FVDisabledVotes"+aD,x("DisabledVote"))}aH.fadeOut(aA,function(){var aJ=F[aE][aD];ac(aH,aB,ay,aI);if(aC){aJ=ap(aH,aB,ay,aJ);
A(aH,ay,az,aJ);z(aH,aB,ay,aJ)}aa(aH,aB,ay,aI,aC,az,aJ);aH.fadeIn(aA,function(){aH.children(".BVDI_FVVotes").data("fvLocked",false)})})})})}function ac(ay,aB,aA,az){ay.find(".BVDI_FVVote a").each(function(){var aD=g(this),aC=q.asJsOrHtmLink(aD);if(aA){E(aD,aC);if(aD.parent().hasClass("BVDI_FV"+aB+"Undo")){aD.parent().removeClass("BVDI_FV"+aB+"Undo")}else{an(aD)}}else{O(aD,aC);if(az&&aD.parent().hasClass("BVDI_FV"+aB)){aD.parent().addClass("BVDI_FV"+aB+"Undo");aC.setUrl(az)}else{ar(aD);M(aD)}}})}function S(ay){return ay.find(".BVDI_FVUndo").text()}function ar(ay){ay.trigger(J("mouseleave")).trigger(J("mouseup"),[true]).trigger(J("keyup"),[true])}function M(ay){ay.data("fvEnabled",false)}function an(ay){ay.data("fvEnabled",true)}function O(ay,az){if(az.getUrl()){ay.data("fvPrevLink",az.getUrl());az.unsetUrl()}}function E(ay,az){if(ay.data("fvPrevLink")){az.setUrl(ay.data("fvPrevLink"));ay.removeData("fvPrevLink")}}function A(ay,aD,az,aC){var aB=ay.children(".BVDI_FVSum");var aA=0;for(var aE in aC.values){aA+=aC.values[aE]*az.values[aE].weight}var aF=az.sum;if(aA>2){aB.replaceWith(aF[2])}else{if(aA<-2){aB.replaceWith(aF[-2])}else{aB.replaceWith(aF[aA])}}aB=ay.children(".BVDI_FVSum");var aG=Math.abs(aA);aB.find(".BVDINumber").each(function(){var aH=g(this);aH.text(aG);aj(aH.parent(),aG)})}function ap(aA,aB,az,ay){if(!aA.data("fvContentProps")){aA.data("fvContentProps",g.extend(true,{},ay))}ay=aA.data("fvContentProps");if(az){ay.numEntries--;ay.values[aB]--}else{ay.numEntries++;ay.values[aB]++}return ay}function z(aA,aC,az,ay){var aB=aA.children(".BVDI_FVCounts");ak(aB,aC,az,ay.values[aC]);ak(aB,"Total",az,ay.numEntries)}function ak(aC,aB,ay,aA){var az=aC.children(".BVDI_FV"+aB);az.find(".BVDINumber").each(function(){var aD=g(this);if(aD.children().length>0||isNaN(parseInt(aD.text()))){return}aD.text(aA);aj(az,aA)})}function aa(aB,aD,aA,az,aF,aC,ay){var aE=aB.children(".BVDI_FVVotes");if(aF){af(aE,aD,aA,az,aC,ay)}y(aE,ay)}function af(aD,aC,aA,az,aB,ay){aD.find(".BVDI_FV"+aC+" .BVDIValue span").each(function(){var aF=g(this);var aE=aB.values[aC].undoLabel;if(!isNaN(parseInt(aF.text()))||!aE){return}if(aA){aF.html(aF.data("fvLabel"))}else{if(az){aF.data("fvLabel",aF.html());aF.html(aE)}}});ak(aD,aC,aA,ay.values[aC])}function y(aB,ay){for(var aA in ay.values){var aC=aB.children(".BVDI_FV"+aA);var az=aC.children("a");if(az.data("fvEnabled")){aj(aC,ay.values[aA])}else{aj(aC)}}}function aj(ay,az){w(ay);var aA;if(az===undefined){aA=0}else{if(az==0){aA=1}else{if(az>=1&&az<=4){aA=2}else{if(az>=5&&az<=9){aA=3}else{aA=4}}}}ay.addClass("BVDI_FVLevel"+aA)}function w(ay){for(i=0;i<4;i++){var az="BVDI_FVLevel"+i;if(ay.hasClass(az)){ay.removeClass(az)}}return ay}function D(aA,aE,aD,aC,az){var ay=aA+"_"+aE+"_"+aD;var aB=av(aE,aD,aC).asCookieValuePrefix();j.set(ay,aB,P.cookiePath,az)}function ad(aA,az,aC,ay){var aB=P.cookiePrefixes.Voting+"_"+aA+"_"+az+"_FBAction";j.set(aB,aC)}function ax(az,ay){var aA=P.cookiePrefixes.Voting+"_"+az+"_"+ay+"_FBAction";return j.get(aA)}function aw(aA,az,ay){var aB=P.cookiePrefixes.Voting+"_"+aA+"_"+az+"_FBAction";return j.remove(aB)}return{bindHandlers:Z,applyCookies:W}}function p(s){var v,t,u;if(s.props.voting){for(v in s.props.voting.content){t=s.props.voting.content[v];for(u in t){if(t[u].submission){return true}}}}if(s.props.report){for(v in s.props.report.content){t=s.props.report.content[v];for(u in t){if(t[u].submission){return true}}}}return false}var f={};m.onPageLoad=function(w,v,s,t){var u=f[v.id]=f[v.id]||{};if(w==="container"){u.containers=u.containers||[];u.containers.push(g.extend(v.container,{$contentRoot:s}))}else{if(w==="dimensions"){u.props=u.props||{};if(v.voting){u.props.voting=u.props.voting||{};u.props.voting.dimensions=v.voting}}else{if(w==="content"){u.props=u.props||{};if(v.voting){u.props.voting=u.props.voting||{};u.props.voting.content=u.props.voting.content||{};u.props.voting.content[v.contentId]=v.voting}if(v.report){u.props.report=u.props.report||{};u.props.report.content=u.props.report.content||{};
u.props.report.content[v.contentId]=v.report}}else{if(w==="onInjection"){delete f[v.id];if(u.containers&&u.props){m.onInjection(g.extend(v.options,{props:u.props,submission:p(u)}),u.containers,t)}}else{if(w==="fingerprint"&&!d){$BV.Internal.require(["deviceFingerprint"],function(x){x.setDeviceFingerprintScriptURL(v.deviceFingerprintScriptURL);x.collectFingerprint(function(y){d={devicefingerprint:y}})})}}}}}}});
$BV.Internal.define("rr/analyticsHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){b.extend(BVAnalyticsCustomizer,{eventSocialConnectRR:function(c,e){c.eName=BVAnalyticsData.E_NAME.socialConnect;var d=e.substr(e.lastIndexOf("_")+1);d=d.substr(0,1).toUpperCase()+d.substr(1);c.socialMedium=d},eventTargetReview:function(c){if(!c.eventTarget){c.eventTarget=BVAnalyticsData.EVENT_TARGET.review}}});a.BVRRAnalyticsCustomizers=[new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.linkDestinationLocationExternal),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer("Inappropriate",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.inappropriate)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.support)),new BVAnalyticsCustomizer(".*Feedback",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.associate)),new BVAnalyticsCustomizer("Review_Display_.*Search.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.search)),new BVAnalyticsCustomizer("SocialBookmark.*",BVAnalyticsCustomizer.eventShoutit),new BVAnalyticsCustomizer("SocialConnect",BVAnalyticsCustomizer.eventSocialConnectRR),new BVAnalyticsCustomizer("FacebookLike.*",BVAnalyticsCustomizer.eventFacebookLike),new BVAnalyticsCustomizer("FacebookSend.*",BVAnalyticsCustomizer.eventFacebookSend),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("AnswerThisQ",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.answer)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("WriteReview",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.write)),new BVAnalyticsCustomizer("PostComment",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.comment)),new BVAnalyticsCustomizer("ReturnToProduct",BVAnalyticsCustomizer.setEventTypeProperty(BVAnalyticsData.E_TYPE.read)),new BVAnalyticsCustomizer("Display_Sort",BVAnalyticsCustomizer.eventSort),new BVAnalyticsCustomizer("(Prev|Next)?Page(Number)?",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.paginate)),new BVAnalyticsCustomizer("NextQuestions",BVAnalyticsCustomizer.setEventTargetProperty(BVAnalyticsData.EVENT_TARGET.question)),new BVAnalyticsCustomizer("ProductLink.*",BVAnalyticsCustomizer.setEventNameProperty(BVAnalyticsData.E_NAME.productLink)),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.socialAndButtonElementsDispatcher),new BVAnalyticsCustomizer(".*",BVAnalyticsCustomizer.eventTargetReview)]});
$BV.Internal.define("rr/analyticsInternalLegacyHooksRR",[window],["jquery.core","analyticsHooks"],function(a,b){a.BVRRInternalLegacyCallback=function(d){var g=a.BVAnalyticsData;if(d.bvProduct!==g.PRODUCT.prr){return}var f=b.isFunction(a.BVRRInternalUseOnlyCallback);var e=d.leafCategoryId||d.categoryId||"";if(d.sortType&&d.sortDirection){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"sort",productId:d.productId,categoryId:e,sortType:d.sortType,sortDirection:d.sortDirection})}}else{if(d.eventSource===g.EVENT_SOURCE.display){if(d.eType==g.E_TYPE.read){if(f){a.BVRRInternalUseOnlyCallback({interactionType:"display",numReviews:d.attributes.numReviews,productId:d.productId,categoryId:e,avgRating:d.attributes.avgRating,ratingsOnlyReviewCount:d.attributes.numRatingsOnlyReviews,recommendedPercentage:d.attributes.percentRecommend})}if(b.isFunction(a.ratingsDisplayed)){a.ratingsDisplayed(d.attributes.numReviews,d.attributes.avgRating,d.attributes.numRatingsOnlyReviews,d.attributes.percentRecommend,d.productId)}if(d.attributes.numReviews>0){if(b.isFunction(a.showReviewMarkup)){a.showReviewMarkup()}}}else{if(d.eType==g.E_TYPE.write||d.eType==g.E_TYPE.support){if(f){var c={interactionType:d.interactionType,productId:d.productId,categoryId:e};if(d.interactionOverallRating){c.overallRating=d.interactionOverallRating}a.BVRRInternalUseOnlyCallback(c)}if(d.pageName&&b.isFunction(a.pageChanged)){if(d.pageName=="ReviewSubmit"){a.pageChanged(d.pageName,"")}else{if(d.pageChangedStatus){a.pageChanged(d.pageName,d.pageChangedStatus)}else{a.pageChanged(d.pageName,d.pageStatus||"")}}}}}}}}});
$BV.Internal.define("rr/contentDisplayRR",[window],["analyticsHooks","domUtils","contentDisplay","animationQueueing"],function(b,a){var c={};b.bvHistogramMouseover=function(g,d,f,e){if(c[d]){clearTimeout(c[d])}bvExpandDivWithIEControlsFrame(f,"BVRRRatingsHistogramButtonIEControlsFrame",e);bvFocus(f);a.fireActionEvent(g)};b.bvHistogramMouseout=function(d,f,e){bvAnimationEventQueue.pushAnimationEvent(function(){c[d]=setTimeout(function(){bvCloseDivs(f,"BVRRRatingsHistogramButtonIEControlsFrame")},e)},arguments)}});
$BV.Internal.define("rr/injection.rr.replacements",[],["exports","jquery.core","injection.shared.replacements","domUtils"],function(a,c,b){c.extend(a,b,{determineTargetFrame:function(){var d=this.getComponent("BVFrame");return d?d.id:"BVFrame"},determineReturnUrlPrr:function(e,d){var g=this.determineReturnUrl(false,d);if(g&&!g.match(/^https?\:\/\//)){if(e.returnURLFixedValue){g=e.returnURLFixedValue}else{var f=this.targetWindow().location;if(g[0]!="/"){if(e.returnURLForceRelativeToRoot){g="/"+g}else{g=f.pathname.match(/(.*\/)/)[0]+g}}g=f.protocol+"//"+f.host+g}}return encodeURIComponent(g)},determineSubmissionUrl:function(e){var d;if(e){d=e.submissionContainerUrl}else{d=this.getClientDivData("ContainerPageURL")}if(!d&&e&&e.allowSamePageSubmission){d=this.targetWindow().location.href}return d?encodeURIComponent(this.stripAnchors(d)):null},determineLoginParameters:function(d){var e;if(!d){e=this.getClientDivData("LoginParameters")}return e?encodeURIComponent(e):null}})});
$BV.Internal.define("rr/injection.rr",[],["exports","jquery.core","injection","rr/injection.rr.replacements","requester"],function(d,e,b,a,c){e.extend(d,b,a,{getTargetFrame:function(){return this.determineTargetFrame()},getComponent:function(g){var i=this.targetWindow(),h=this.productId(),f=this.divOverrides(g);if(!f&&h&&!this.apiConfig()){f=i.document.getElementById(g+"_"+h)}if(!f){f=i.document.getElementById(g)}return f},getReplacements:function(h,f){var k=[];if(!f){k.push({pattern:/__BVLOGINPARAMETERS__/g,replacement:this.determineLoginParameters(f)})}k.push({pattern:/__CONFIGKEY__/g,replacement:f?c.getConfigKey(f):""});k.push({pattern:/__TARGETFRAME__/g,replacement:this.determineTargetFrame()});k.push({pattern:/__RETURN__/g,replacement:this.determineReturnUrlPrr(h,f)});k.push({pattern:/__BVSUBMISSIONURL__/g,replacement:this.determineSubmissionUrl(f)});k.push({pattern:/__BVSUBMISSIONPARAMETERS__/g,replacement:this.determineSubmissionParameters(f)});k.push({pattern:/__USERID__|__ALLOWANONYMOUS__/g,replacement:this.determineCustomerId(f)});var j=[];for(var g=0;g<k.length;++g){if(k[g].replacement!=null){j.push(k[g])}}return j},injectScriptIfNecessary:function(h,l){var k=window.parent,j=k.document,g;function i(){if(k.$BV){return true}var n=j.getElementsByTagName("script");for(var m=0;m<n.length;m++){if(n[m].getAttribute("src")===h){return true}}return false}function f(){if(k.$BV){l&&l()}else{g=g?g*2:10;k.setTimeout(f,g)}}k.setTimeout(function(){if(!i()){var m=j.createElement("script");m.type="text/javascript";m.src=h;j.getElementsByTagName("head")[0].appendChild(m)}f()},0)},getBVStateRedirectUrl:function(g,f,i,k){if(!g||g.ct!="r"){return null}var h=i.split("/");if(h.length!=2||h[0]!="p"){return null}var j=(k?"/reviews.djs?format=embeddedhtml":"/reviews.htm?format=embedded");var l=f+h[1]+j;if(g.pg&&g.pg>1){l+="&page="+g.pg}return l},getBvStateParamFromSVITokens:function(g){var f;if(g.length==5){f=g[3]}else{if(g.length>5){var h=(g.length-5);f=g[h+3]}else{return null}}return"bvstate=ct:r/pg:"+f},getSviRedirectUrl:function(h,n,g){var i,l,j;if(h.length==5){i=h[1];l=h[3];j=h[4]}else{if(h.length>5){var f=(h.length-5);i=h[f+1];l=h[f+3];j=h[f+4]}else{return null}}var m;if(i=="reviews"){if(g){m=".djs?format=embeddedhtml"}else{m=".htm?format=embedded"}}else{if(i=="reviewsPage"){if(g){m=".djs?format=bulkembeddedhtml"}else{return null}}else{return null}}var k=n+j+"/reviews"+m;if(l>1){k+="&page="+l}return k}})});
$BV.Internal.define("rr/contentFocusingSupportRR",[window],["exports","jquery.core","cookies","contentFocusingSupport"],function(d,c,e,b,a){d.bvShowContentOnReturnPRR=function(h,g,f){a.saveReturnPosition("PRR",h,g,f)};c.onPageLoad=function(j,i,f,h,g){if(j==="postInjection"){a.postInjection(i,h,g,this)}}});
