/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var b=0;b<this.length;b++){if(this[b]===c){return b}}return -1}}if(!Array.prototype.map){Array.prototype.map=function(f,c){var b=new Array(this.length);for(var d=0,e=this.length;d<e;d++){if(d in this){b[d]=f.call(c,this[d],d,this)}}return b}}if(!window.console){window.console={log:function(){}}}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c,b){window.setTimeout(c,1000/60)}})();var s7sdk;if(!s7sdk){s7sdk={}}else{if(typeof s7sdk!="object"){throw new Error("Cannot initialize a root 's7sdk' package. s7sdk is not an object")}}if(!s7sdk.pkg){s7sdk.pkg=function(c){var d,f,b=window,e=c.toLowerCase().split(".");for(d=0;d<e.length;d++){f=e[d];if(!b[f]){b[f]={}}b=b[f]}}}if(!s7sdk.Util){s7sdk.Util={write:function(b){document.write(b)},byId:function(b){return document.getElementById(b)},getHead:function(){return document.getElementsByTagName("head")[0]},borrowMethods:function(d,c,g){var f=d.__proto__||(d.constructor?d.constructor.prototype:Object.prototype);var e=c.__proto__||(c.constructor?c.constructor.prototype:Object.prototype);for(var b in f){if(typeof f[b]!="function"){continue}if(e.hasOwnProperty(b)==false){e[b]=f[b];s7sdk.Class.override(g,b,function(){return arguments.callee.parent.apply(this.component,arguments)})}}},getGenericModifierObject:function(d,c){var b={};var f=d.getModifiers();for(mod in f){if(d.getParam(mod)){b[mod.toLowerCase()]=d.getParam(mod)}}b.set=function g(h,i){this[h.toLowerCase()]=i};b.get=function e(h,i){if(this[h.toLowerCase()]){return this[h.toLowerCase()]}if(i){return i}return""};b.originalSettings=c;b.i18n=c.i18n;b.getLocalizedText=c.getLocalizedText;return b},resolveModifier:function(f,e,b,c){var d=s7sdk.Util.getGenericModifierObject(b,c);if(f&&e){d.set(f,e)}return d},assignListeners:function(d,b){for(var c in d){for(var e in d[c]){if(d[c]){if(d[c][e].handler){b.addEventListener(c,d[c][e].handler,d[c][e].useCapture)}}}}},copyListeners:function(b){if(b){var e={};var d=b.events;for(var c in d){e[c]=d[c]}return e}},removeTags:function(b){while(b.hasChildNodes()){b.removeChild(b.lastChild)}},byFirstTag:function(c){var b=document.getElementsByTagName(c);if(b.length>0){return b[0]}else{return undefined}},wrapContext:function(c,b){return function(){c.apply(b,Array.prototype.slice.call(arguments,0))}},noop:function(){},objByClassName:function(f,l){function g(o){var p={};var q=o.split("[")}function h(o){return o.replace(/\./g,"")}function m(q){var p="";for(var o=0;o<q.length;o++){p+=h(q[o])+" "}return p}function n(q,u){if(!u){u=document}var o=[],w;if(u.getElementsByClassName){w=u.getElementsByClassName(q);for(var r=0,s=w.length;r<s;r++){o[r]=w[r]}}else{q=q.split(/\s+/);var v,p=q.length,t,w=u.getElementsByTagName("*"),s=w.length;for(var r=0;r<p;r++){q[r]=RegExp("\\b"+q[r]+"\\b")}classnameLoop:while(s){v=w[--s];t=v.className;if(t){for(var r=0;r<p;r++){if(q[r].test(t)==false){continue classnameLoop}}o.push(v)}}}return o}try{var k=f.split(" ");var e=h(f);if(e==l.className){return[l]}var i=l.className.split(" ");var c;if(k.length>0){c=h(k.shift())}var d=m((k.length==0)?[c]:k);var b=null;b=n(d,l);return b}catch(j){throw new Error("Unable to parse "+f+". "+j)}},cssPropToJSProp:function(f){var b=(f.indexOf("-")>0);if(b){var d=f.split("-");if(d.length>1){var e="";for(var c=0;c<d.length;c++){if(c==0){e+=d[c]}else{e+=d[c].charAt(0).toUpperCase()+d[c].slice(1)}}return e}else{return a}}else{return f}},objByClassName:function(f,l){function g(o){var p={};var q=o.split("[")}function h(o){return o.replace(/\./g,"")}function m(q){var p="";for(var o=0;o<q.length;o++){p+=h(q[o])+" "}return p}function n(q,u){if(!u){u=document}var o=[],w;if(u.getElementsByClassName){w=u.getElementsByClassName(q);for(var r=0,s=w.length;r<s;r++){o[r]=w[r]}}else{q=q.split(/\s+/);var v,p=q.length,t,w=u.getElementsByTagName("*"),s=w.length;for(var r=0;r<p;r++){q[r]=RegExp("\\b"+q[r]+"\\b")}classnameLoop:while(s){v=w[--s];t=v.className;if(t){for(var r=0;r<p;r++){if(q[r].test(t)==false){continue classnameLoop}}o.push(v)}}}return o}try{var k=f.split(" ");var e=h(f);if(e==l.className){return[l]}var i=l.className.split(" ");var c;if(k.length>0){c=h(k.shift())}var d=m((k.length==0)?[c]:k);var b=null;b=n(d,l);return b}catch(j){throw new Error("Unable to parse "+f+". "+j)}},cssPropToJSProp:function(f){var b=(f.indexOf("-")>0);if(b){var d=f.split("-");if(d.length>1){var e="";for(var c=0;c<d.length;c++){if(c==0){e+=d[c]}else{e+=d[c].charAt(0).toUpperCase()+d[c].slice(1)}}return e}else{return a}}else{return f}},byTagAndAttributes:function(g,d){var f,b,h,e=[],c=document.getElementsByTagName(g);for(f=0;f<c.length;f++){h=true;for(b in d){if(Object.prototype.hasOwnProperty.call(d,b)&&c[f].getAttribute(b)!==d[b]){h=false;break}}if(h){e.push(c[f])}}return e},createElement:function(e,c){var d=document.createElement(e),b;for(b in c){if(c.hasOwnProperty(b)&&c.propertyIsEnumerable(b)){d.setAttribute(b,c[b])}}return d},elementInDOM:function(b){while(b=b.parentNode){if(b==document){return true}}return false},resolveURL:function(c,b){if(/^\s*http[s]?:\/\//.test(b)){return b}else{var e=(c&&c.length>0?c.charAt(c.length-1):"");var f=(b&&b.length>0?b.charAt(0):"");var d;if(e=="/"&&f=="/"){d=c+b.substr(1)}else{d=c+b}return d}},lib:{scriptElement:function(){var c=null;if(document.scripts){c=document.scripts}else{c=document.getElementsByTagName("script")}for(var b=0;b<c.length;b++){if(c[b].getAttribute("src")&&c[b].getAttribute("src").indexOf("s7sdk/utils/Utils.js")>0){return c[b]}}return null}(),root:function(){var d="js/";var f="";var e=null;if(document.scripts){e=document.scripts}else{e=document.getElementsByTagName("script")}for(var c=0;c<e.length;c++){if(e[c].getAttribute("src")&&e[c].getAttribute("src").indexOf("s7sdk/utils/Utils.js")>0){f=e[c].getAttribute("src");break}}var b=f.indexOf("s7sdk/utils/Utils.js");if(b>=0){d=f.substring(0,b)}else{s7sdk.Logger.log(s7sdk.Logger.SEVERE,"Utils.js not found, using default lib.root = %0",d)}return d}(),jsList:[],isLoaded:function(c){for(var b=0;b<s7sdk.Util.lib.jsList.length;b++){if(s7sdk.Util.lib.jsList[b].name==c){return true}}return false},flagFileLoaded:function(b){},flagFile:function(c){for(var b=0;b<s7sdk.Util.lib.jsList.length;b++){if(s7sdk.Util.lib.jsList[b].name==c){s7sdk.Util.lib.jsList[b].loaded=true;break}}},isAllJSLoaded:function(){for(var c=0;c<s7sdk.Util.lib.jsList.length;c++){if(!s7sdk.Util.lib.jsList[c].loaded){return false}}if(s7sdk.Util.css.defaultCSSText.text.length>0){var b=s7sdk.Util.createElement("style",{type:"text/css",media:"screen","data-description":"Scene7DefaultCSS"});s7sdk.Util.css.addDefaultStyleCSS(s7sdk.Util.css.defaultCSSText.text,b);s7sdk.Util.css.defaultCSSText.text=""}s7sdk.Event.dispatch(document.body,"S7JSLOAD",false);return true},checkJS:function(){if(!s7sdk.Util.lib.isAllJSLoaded()){setTimeout(s7sdk.Util.lib.checkJS,100)}},addJS:function(c){if(!s7sdk.Util.lib.isLoaded(c)){var b={name:c,loaded:false};s7sdk.Util.lib.jsList.push(b)}},include:function(e,d){var b=s7sdk.Util.lib.parsePkg(e);if(typeof d=="undefined"){d=true}if(!s7sdk.Util.lib.isLoaded(e)){if(d){if(s7sdk.Util.byFirstTag("head")){var c=document.createElement("script");c.setAttribute("language","javascript");c.setAttribute("type","text/javascript");c.setAttribute("src",s7sdk.Util.lib.root+b+".js");c.setAttribute("id",e);if(s7sdk.browser.name!="ie"){c.onload=function(){s7sdk.Util.lib.flagFile(this.id)}}else{c.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){s7sdk.Util.lib.flagFile(this.id)}}}s7sdk.Util.byFirstTag("head").appendChild(c);s7sdk.Util.lib.addJS(e)}}else{s7sdk.Util.write('<script language="javascript" type="text/javascript" src="'+s7sdk.Util.lib.root+b+'.js"><\/script>');s7sdk.Util.lib.addJS(e)}}},parsePkg:function(b){return b.replace(/\./g,"/")}},css:{root:"",defaultCSS:"",list:{},inPageCSS:{obj:null,classes:[]},defaultCSSText:{text:"",component:{}},include:function(c,e,b){b=(typeof b=="boolean")?b:false;var d=s7sdk.Util.createElement("link",{media:(e?e:"all"),href:c,rel:"stylesheet",type:"text/css"});if("onreadystatechange" in d){d.onreadystatechange=function(){if(d.readyState=="loaded"||d.readyState=="complete"){s7sdk.Util.css.list[d.href]=true}}}else{if("onload" in d){d.onload=function(){s7sdk.Util.css.list[d.href]=true}}}s7sdk.Util.css.list[d.href]=false;if(b===true){s7sdk.Util.getHead().appendChild(d)}else{s7sdk.Util.getHead().insertBefore(d,s7sdk.Util.lib.scriptElement.nextSibling)}},checkSheetLoaded:function(b){var f,c;for(var d=0;d<document.styleSheets.length;d++){f=document.styleSheets[d];c=false;try{c=(s7sdk.browser.name!="ie")&&(typeof f.cssRules==="object")}catch(g){if((g.name==="NS_ERROR_DOM_SECURITY_ERR")||(g.name==="SecurityError")){c=true}}if(f.href===b&&c){return true}}return false},isAllLoaded:function(){var b,c=s7sdk.Util.css.list;for(b in c){if(!c.hasOwnProperty(b)){continue}if(c[b]===true){}else{if(s7sdk.Util.css.checkSheetLoaded(b)===true){c[b]=true}else{return false}}}return true},add:function(b,c){if(!s7sdk.Util.css.inPageCSS.obj){s7sdk.Util.css.inPageCSS.obj=document.createElement("style");s7sdk.Util.css.inPageCSS.obj.setAttribute("type","text/css");s7sdk.Util.css.inPageCSS.obj.setAttribute("media","all");s7sdk.Util.byFirstTag("head").appendChild(s7sdk.Util.css.inPageCSS.obj);if(s7sdk.browser.name=="ie"){s7sdk.Util.css.inPageCSS.obj.styleSheet.cssText=""}else{s7sdk.Util.css.inPageCSS.obj.innerHTML=""}}if(s7sdk.Util.css.inPageCSS.classes.indexOf(b)<0){s7sdk.Util.css.inPageCSS.classes.push(b);if(s7sdk.browser.name=="ie"){s7sdk.Util.css.inPageCSS.obj.styleSheet.cssText+=b+"{"+c+"} "}else{s7sdk.Util.css.inPageCSS.obj.innerHTML+=b+"{"+c+"} "}}},getCss:function(h,d,e,b,c,g){var f="";var i=s7sdk.Util.createElement("div",g),j;c=(c&&s7sdk.Util.isElement(c))?c:document.body;i.className=h;if(b){j=s7sdk.Util.createElement("div");j.className=b;j.appendChild(i)}if(e&&e.length>0){if(b){j.setAttribute("id",e)}else{i.setAttribute("id",e)}}c.appendChild(j||i);f=s7sdk.Util.getStyle(i,d);c.removeChild(j||i);return f},createCssRuleText:function(d,c){var e,b=d+" {\n";for(e in c){if(Object.prototype.hasOwnProperty.call(c,e)){b+="\t"+e+":"+c[e]+";\n"}}b+=" }\n";return b},createCssImgUrlText:function(c){var b=s7sdk.Util.lib.root;if(b.substr(b.length-3,3)==="js/"){b=b.substr(0,b.length-3)+"images/sdk/"}else{throw new Error("Unexpected SDK root URL!")}return"url("+b+c+")"},setCSSAttributeSelector:function(b,c,d){b.setAttribute(c,d);if(s7sdk.browser.name==="ie"){b.className=b.className}},addDefaultStyleCSS:function(d,b){function c(){if(!b.parentNode){s7sdk.Util.getHead().insertBefore(b,s7sdk.Util.getHead().firstChild)}}var e=document.createTextNode(d);if(s7sdk.browser.name==="ie"){c()}if(b.styleSheet&&!("textContent" in b)){b.styleSheet.cssText=e.nodeValue}else{b.appendChild(e)}c()},addDefaultCSS:function(e,c){if(c in s7sdk.Util.css.defaultCSSText.component){return}s7sdk.Util.css.defaultCSSText.component[c]=true;if(s7sdk.browser.name==="ie"){var e="\r\n/*"+c+"*/\r\n"+e;if(e.length+s7sdk.Util.css.defaultCSSText.text.length>4096){var b=s7sdk.Util.createElement("style",{type:"text/css",media:"screen","data-description":"Scene7DefaultCSS"});s7sdk.Util.css.addDefaultStyleCSS(s7sdk.Util.css.defaultCSSText.text,b);s7sdk.Util.css.defaultCSSText.text=e}else{s7sdk.Util.css.defaultCSSText.text+=e}}else{var d=s7sdk.Util.createElement("style",{type:"text/css",media:"screen","data-description":"Scene7DefaultCSS","data-component":c});s7sdk.Util.css.addDefaultStyleCSS(e,d)}},createCssAnimationText:function(e,f,d,b){var j="@-webkit-keyframes "+e+" {\n";var h="@-webkit-keyframes "+e+" {\n";var i="@-webkit-keyframes "+e+" {\n";var c="0% {\n"+f+":"+d+";\n}100% {\n"+f+":"+b+";\n}\n}";j+=c;h+=c;i+=c;var g=(j+h+i);return g},forceCSSEval:function(){var c=s7sdk.Util.getHead().childNodes;for(var b=0;b<c.length;b++){var e=c[b];if(e.nodeName.toUpperCase()=="LINK"||e.nodeName.toUpperCase()=="STYLE"){var d=e.getAttribute("type");e.setAttribute("type","none");if(d){e.setAttribute("type",d)}else{e.removeAttribute("type")}}}}},require:function(b){s7sdk.Util.lib.include(b,true)},addObj:function(b,h,e,d,c){var g=(b==null?document.body:document.getElementById(b));var f=s7sdk.Util.createObj(h,e,d,c);g.appendChild(f)},createObj:function(j,e,d,c){var g=document.createElement(e);if(j!=null){g.setAttribute("id",j)}var f=(d==null?[]:d.split(";"));for(var b=0;b<f.length;b++){var h=f[b].split(":");if(h.length>1){g.style[s7sdk.Util.cssParse(h[0])]=h[1]}}if(c!=null){g.className=c}return g},createUniqueId:function(){if(!s7sdk.Util.createUniqueId.count){s7sdk.Util.createUniqueId.count=0}return(s7sdk.Util.createUniqueId.count++).toString(16).toUpperCase()},cssParse:function(d){if(d.indexOf("-")<0){return d}var c=d.split("-");for(var b=1;b<c.length;b++){c[b]=c[b].charAt(0).toUpperCase()+c[b].slice(1)}return c.join("")},setObjSize:function(d,b,c){if(s7sdk.Util.isNumber(b)){d.style.width=b+"px"}if(s7sdk.Util.isNumber(c)){d.style.height=c+"px"}},setObjPos:function(c,b,d){if(s7sdk.Util.isNumber(b)&&s7sdk.Util.isNumber(d)){c.style.position="absolute";c.style.left=b+"px";c.style.top=d+"px"}},getScrollXY:function(){var c=0,b=0;if(s7sdk.browser.device.name=="iphone"&&s7sdk.browser.device.version>3){return{x:c,y:b}}if(typeof(window.pageYOffset)=="number"){b=window.pageYOffset;c=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){b=document.body.scrollTop;c=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){b=document.documentElement.scrollTop;c=document.documentElement.scrollLeft}}}return{x:c,y:b}},getObjPos:function(f){var b=0;var g=0;var d=0;var c=0;if(f.getBoundingClientRect){d=s7sdk.Util.getStyle(f,"border-left-width");c=s7sdk.Util.getStyle(f,"border-top-width");if(s7sdk.Util.isNumber(d)&&(d!="")){b+=parseInt(d)}if(s7sdk.Util.isNumber(c)&&(c!="")){g+=parseInt(c)}var e=f.getBoundingClientRect();b+=e.left+s7sdk.Util.getScrollXY().x;g+=e.top+s7sdk.Util.getScrollXY().y}else{while(f!=null){d=s7sdk.Util.getStyle(f,"border-left-width");c=s7sdk.Util.getStyle(f,"border-top-width");if(s7sdk.Util.isNumber(d)&&(d!="")){b+=parseInt(d)}if(s7sdk.Util.isNumber(c)&&(c!="")){g+=parseInt(c)}b+=f.offsetLeft;g+=f.offsetTop;f=f.offsetParent}}return{x:b,y:g}},getEventPos:function(c){var b=0;var d=0;if(c.touches){if(c.touches.length>0){b=c.touches[0].pageX;d=c.touches[0].pageY}else{b=c.changedTouches[0].pageX;d=c.changedTouches[0].pageY}}else{if(c.pageX){b=c.pageX;d=c.pageY}else{b=c.clientX+document.documentElement.scrollLeft;d=c.clientY+document.documentElement.scrollTop}}return{x:b,y:d}},canvasPool:[],getCanvas:function(){s7sdk.Logger.log(s7sdk.Logger.FINEST,"getCanvas start pool size %0",s7sdk.Util.canvasPool.length);if(s7sdk.Util.canvasPool.length<1){return s7sdk.Util.createObj(null,"canvas",null,null)}return s7sdk.Util.canvasPool.pop()},releaseCanvas:function(b){b.width=0;b.height=0;s7sdk.Util.canvasPool.push(b);s7sdk.Logger.log(s7sdk.Logger.FINEST,"releaseCanvas end pool size %0",s7sdk.Util.canvasPool.length)},clearMatte:function(f,e,c,j,d,i){var b=f.width;var g=f.height;e.clearRect(0,0,c,g);e.clearRect(c,0,d,j);e.clearRect(c,j+i,d,g-(j+i));e.clearRect(c+d,0,b-(c+d),g)},isNumberType:function(b){return Object.prototype.toString.apply(b)==="[object Number]"},isNumber:function(b){return s7sdk.Util.isNumberType(b)&&!isNaN(b)},isNull:function(b){return(typeof b=="undefined"||b==null)},isArray:function(b){return Object.prototype.toString.apply(b)==="[object Array]"},isString:function(b){return Object.prototype.toString.apply(b)==="[object String]"},isBoolean:function(b){return Object.prototype.toString.apply(b)==="[object Boolean]"},isNonEmptyString:function(b){return s7sdk.Util.isString(b)&&b.length>0},isElement:function(b){try{return b instanceof HTMLElement}catch(c){return(b.nodeType===1)&&(typeof b==="object")&&(typeof b.style==="object")&&(typeof b.ownerDocument==="object")}},checkDefault:function(c,b){return(s7sdk.Util.isNull(c)||c==="")?b:c},checkDefaultText:function(c,b){return s7sdk.Util.isNull(c)?b:c},getStyle:function(d,e){var c="";if(window.getComputedStyle){c=document.defaultView.getComputedStyle(d,null).getPropertyValue(e)+""}else{if(d.currentStyle){var b=/(\-([a-z]){1})/g;if(e=="float"){e="styleFloat";if(b.test(e)){e=e.replace(b,function(){return arguments[2].toUpperCase()})}}else{if(e=="opacity"){return d.filters.alpha?(d.filters.alpha.opacity/100):1}}c=d.currentStyle[s7sdk.Util.cssParse(e)]?d.currentStyle[s7sdk.Util.cssParse(e)]+"":null}else{c=d.style[e]+""}}if(c&&c.indexOf("url(")==0){c=c.replace('url("',"");c=c.replace('")',"");c=c.replace("url(","");c=c.replace(")","")}return c},setOpacity:function(b,c){if(c<0){c=0}if(c>0.99){c=1}b.style.opacity=c;if(s7sdk.browser.name=="ie"){if((s7sdk.browser.version.minor>5.5)&&(s7sdk.browser.version.minor<=8)&&(document.body.filters)){if(b.filters){if(b.filters.length>0){if(b.filters["DXImageTransform.Microsoft.Alpha"]){b.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=Math.round(c*100)}else{b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(c*100)+")"}}else{b.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(c*100)+")"}}}}},convertColor:function(f,m){if(f&&f.length>0&&m&&m.length>0){var i=f.indexOf("rgb")==0;var d=f.indexOf("#")==0;var j=f.indexOf("0x")==0;if((i&&m=="rgb")||(d&&m=="hex")||(j&&m=="flash")){return f}else{if(i){var e=f.replace("rgb","");e=e.replace("(","");e=e.replace(")","");var k=e.split(",");var c=parseInt(k[0]);var h=parseInt(k[1]);var l=parseInt(k[2]);c=c.toString(16);h=h.toString(16);l=l.toString(16);c=(c.length==1?"0":"")+c;h=(h.length==1?"0":"")+h;l=(l.length==1?"0":"")+l;return(m=="hex"?"#":"0x")+c+h+l+(m=="flash"?"FF":"")}else{if(m=="rgb"){var e=f.replace("#","");e=e.replace("0x","");e=e.substring(0,6);var c=parseInt(e.substring(0,2),16);var h=parseInt(e.substring(2,4),16);var l=parseInt(e.substring(4,6),16);c=(!s7sdk.Util.isNumber(c)||c<0?0:(c>255?255:c));h=(!s7sdk.Util.isNumber(h)||h<0?0:(h>255?255:h));l=(!s7sdk.Util.isNumber(l)||l<0?0:(l>255?255:l));return"rgb("+c+","+h+","+l+")"}else{if(m=="hex"){var e=e.replace("0x","");return"#"+e.substring(0,6)}else{var e=f.replace("#","");return"0x"+e+"FF"}}}}}else{return f}},fade:function(i,c,e,h,g,f,d){if(typeof f=="undefined"&&c){f=s7sdk.Util.getStyle(i,"opacity");f=(!f||f==null||f.length==0?1:parseFloat(f))}else{if(typeof f=="undefined"&&!c){f=1}}if(typeof g=="undefined"&&c){g=f}else{if(typeof g=="undefined"&&!c){g=0}}var b=g+(c?-1:1)*0.05/e;if(!c){i.style.display=h}if(b>0&&b<1){i.style.opacity=f*b;s7sdk.Util.timeout(s7sdk.Util.fade,50,[i,c,e,h,b,f,d])}else{if(b>=1){i.style.opacity=1;if(typeof(d)!="undefined"){d()}}else{if(b<=0){i.style.display="none";if(typeof(d)!="undefined"){d()}}}}},isAbsPath:function(b){return(b&&((b.indexOf("http://")==0)||(b.indexOf("https://")==0)))},stripWhiteSpace:function(b){return b.replace(/[\s\t]+/g,"")},resizeToFitScreen:function(b){if(b){s7sdk.browser.screensize=s7sdk.browser.detectScreen();b.resize(s7sdk.browser.screensize.w,s7sdk.browser.screensize.h)}},adjustDevicePixelRatio:function(e,d,c){var b;if(e==-1||e==NaN){b=s7sdk.Util.hasProperty(window,"devicePixelRatio")?window.devicePixelRatio:1}else{if(e==0){b=1}else{if(e>0){b=s7sdk.Util.hasProperty(window,"devicePixelRatio")?window.devicePixelRatio:1;if(b>1&&(b*c*b*d>e)){b=1}}}}return b},hasProperty:function(b,c){return Boolean(c in b)},timeout:function(d,c,b){var e=function(){d.apply(this,b)};return setTimeout(e,c)},interval:function(d,c,b){var e=function(){d.apply(this,b)};return setInterval(e,c)},async:function(d,c,b){setTimeout(function(){d.apply(c,b||[])},0)},init:function(){s7sdk.Util.lib.checkJS()}}}if(!s7sdk.DEVICE){s7sdk.DEVICE=[[/iPhone/i,"iphone",[[/OS 3/i,"3"],[/OS 4/i,"4"],[/OS 5/i,"5"],[/OS 6/i,"6"],[/OS 7/i,"7"]],""],[/iPod/i,"ipod",[],""],[/iPad/i,"ipad",[[/OS 3/i,"3"],[/OS 4/i,"4"],[/OS 5/i,"5"],[/OS 6/i,"6"],[/OS 7/i,"7"]],""],[/Android/i,"android",[[/Android 3/i,"3"],[/Android 4/i,"4"]],"2"],[/Symbian/i,"symbian",[],""],[/(BlackBerry|BB10|PlayBook)/i,"blackberry",[[/BB10/i,"10"]],""],[/Palm/i,"palm",[],""],[/Windows CE; PPC/i,"pocketpc",[],""]]}if(!s7sdk.OS){s7sdk.OS=[[/Win/i,"win"],[/Android/i,"android"],[/Mac/i,"mac"],[/(iPhone|iPad)/i,"ios"],[/(BlackBerry|BB10|PlayBook)/i,"blackberry"]]}if(!s7sdk.browser){s7sdk.browser={raw:{ua:navigator.userAgent.toLowerCase(),ver:navigator.appVersion.toLowerCase()},name:"undefined",version:{major:"0",minor:"0",js:"0"},device:{name:"",version:"",pixelratio:1},os:"undefined",screensize:{w:0,h:0},supportflash:function(){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash"]){return true}}else{if((this.name=="msie")||(this.name=="ie")&&(navigator.appVersion.toLowerCase().indexOf("win")!=-1)){try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(b){return true}}catch(c){}}}return false},detectdevice:function(){var g="desktop";var f="";for(var e=0;e<s7sdk.DEVICE.length;e++){if(navigator.userAgent.match(s7sdk.DEVICE[e][0])){g=s7sdk.DEVICE[e][1];f=s7sdk.DEVICE[e][3];var c=s7sdk.DEVICE[e][2];for(var d=0;d<c.length;d++){var b=c[d];if(navigator.userAgent.match(b[0])){f=b[1];break}}break}}this.device.name=g;this.device.version=f;if(this.device.name=="iphone"){this.device.version=this.fixiphone(this.device.version)}if(typeof window.devicePixelRatio!="undefined"){this.device.pixelratio=window.devicePixelRatio}},detectos:function(){for(var b=0;b<s7sdk.OS.length;b++){if(navigator.userAgent.match(s7sdk.OS[b][0])){this.os=s7sdk.OS[b][1]}}},fixiphone:function(b){if(window.devicePixelRatio<2){return 3}return b},init:function(){var e=this.raw.ua;var b=this.raw.ver;this.version.minor=parseFloat(b);this.version.major=parseInt(this.version.minor);if(e.indexOf("opera")>-1){this.name="opera";if(this.version.major==5||this.version.major==6){this.version.js="1.3"}else{if(this.version.major>=7){this.version.js="1.5"}else{this.version.js="1.1"}}}else{if(e.indexOf("chrome")>-1){this.name="chrome";this.version.js="1.5"}else{if(e.indexOf("safari")>-1&&e.indexOf("mac")>-1){this.name="safari";this.version.js="1.5";var g=e.match(/(version|CriOS)\/([\d]+\.[\w]?\.?[\w]+)/gi);this.version.minor=parseFloat(g[0].split("/")[1]);this.version.major=parseInt(g[0].split("/")[1])}else{if(e.indexOf("applewebkit")>-1&&e.indexOf("mobile")>-1){this.name="safari";this.version.js="1.5"}else{if(e.indexOf("konqueror")>-1){var i=e.indexOf("konqueror");this.name="konquerer";this.version.minor=parseFloat(e.substring(i+10,e.indexOf(";",i)));this.version.major=parseInt(this.version.minor);this.version.js="1.5"}else{if(navigator.product&&navigator.product.toLowerCase()=="gecko"){if(e.indexOf("mozilla/5")>-1&&e.indexOf("spoofer")==-1&&e.indexOf("compatible")==-1&&e.indexOf("webtv")==-1&&e.indexOf("hotjava")==-1){if(navigator.vendor=="Firebird"){this.name="firebird"}else{if(e.indexOf("navigator")>-1){this.name="netscape"}else{if(navigator.vendor=="Firefox"||e.indexOf("firefox")>-1){this.name="firefox"}else{if(navigator.vendor==""||navigator.vendor=="Mozilla"||navigator.vendor=="Debian"){this.name="mozilla"}else{if(navigator.vendor.indexOf("Google")>-1){this.name="mozilla"}}}}}if(this.name!="undefined"&&this.name!="netscape"){var c=(navigator.vendorSub)?navigator.vendorSub:0;var h;if(this.name=="firefox"&&!c){c=parseFloat(e.substring(e.indexOf("firefox/")+8))}else{if(!c){c=e.substring(e.substring("rv:")+3);h=c.indexOf(")");c=parseFloat(c.substring(0,h))}}this.version.minor=c;this.version.major=parseInt(c);this.version.js="1.5"}else{if(this.name=="netscape"){var f=e.indexOf("navigator");this.version.minor=parseFloat(e.substring(f+10,f+13));this.version.major=parseInt(this.version.minor);this.version.js="1.5"}}}}else{if(e.indexOf("mozilla")>-1&&e.indexOf("spoofer")==-1&&e.indexOf("compatible")==-1&&e.indexOf("webtv")==-1&&e.indexOf("hotjava")==-1){this.name="netscape";if(navigator.vendor&&(navigator.vendor=="Netscape6"||navigator.vendor=="Netscape")){this.version.minor=parseFloat(navigator.vendorSub);this.version.major=parseInt(navigator.vendorSub)}if(this.version.major==2){this.version.js="1.0"}else{if(this.version.major==3){this.version.js="1.1"}else{if(this.version.major==4){this.version.js=(this.version.minor<=4.05?"1.2":"1.3")}else{if(this.version.major==5){this.version.js="1.4"}else{if(this.version.major>=6){this.version.js="1.5"}}}}}}else{if(e.indexOf("msie")>-1){this.name="ie";if(e.indexOf("mac")>-1){var d=e.indexOf("msie");this.version.minor=parseFloat(e.substring(d+5,e.indexOf(";",d)))}else{var d=b.indexOf("msie");this.version.minor=parseFloat(b.substring(d+5,b.indexOf(";",d)))}this.version.major=parseInt(this.version.minor);if(this.version.major<4){this.version.js="1.0"}else{if(this.version.major==4){this.version.js="1.2"}else{if(this.version.major>=5&&e.indexOf("mac")>-1){this.version.js="1.4"}else{if(this.version.major>=5){this.version.js="1.3"}}}}}else{if(e.indexOf("aol")>-1){this.name="aol"}else{if(e.indexOf("webtv")>-1){this.name="webtv"}else{if(e.indexOf("hotjava")>-1){this.name="hotjava";if(this.version.major>=3){this.version.js="1.4"}}}}}}}}}}}}this.detectdevice();this.detectos();this.screensize=this.detectScreen()},detectScreen:function(){var b={w:0,h:0};if(self.innerHeight){b.w=self.innerWidth;b.h=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){b.w=document.documentElement.clientWidth;b.h=document.documentElement.clientHeight}else{if(document.body){b.w=document.body.clientWidth;b.h=document.body.clientHeight}}}return b},isNoScreenSize:function(){this.screensize=this.detectScreen();return(this.screensize.w==0||this.screensize.h==0)}};s7sdk.browser.init()}if(!s7sdk.query){s7sdk.query={qs:"",params:{},init:function(){this.qs=window.location.search;this.qs=this.qs.substring(1,this.qs.length);var e=this.qs.split("&");for(var c=0;c<e.length;c++){var b="";var d=null;if(e[c].indexOf("=")>=0){b=e[c].substring(0,e[c].indexOf("="));b=s7sdk.query.fixKey(b);d=decodeURIComponent(e[c].substring(e[c].indexOf("=")+1))}else{b=s7sdk.query.fixKey(e[c])}this.params[b]=d}},getValue:function(b,c){var e=c;var d=s7sdk.query.fixKey(b);if(this.params[d]){e=this.params[d]}return e},fixKey:function(c){var e="";var b=c.split(".");if(b.length>1){for(var d=0;d<b.length-1;d++){e+=b[d]+"."}e+=b[b.length-1].toLowerCase()}else{e=c.toLowerCase()}return e}};s7sdk.query.init()}if(!s7sdk.Class){s7sdk.Class=new function(){var g=[];var e=[];this.inherits=function(h,m){var o=false,p,j;if(!s7sdk.Util.isString(h)||!s7sdk.Util.isString(m)){throw new Error("s7sdk.Class.inherit requires string parameters!")}j=h;h=c(h);p=m;m=c(m);if(typeof m==="undefined"||m.inheritancePending){h.inheritancePending=true;g.push(function k(){s7sdk.Class.inherits(j,p)})}else{q(h,m);h.inheritancePending=false;o=true}function q(t,s){var v=function r(){},u;v.prototype=s.prototype;u={};b(t.prototype,u);t.prototype=new v();t.prototype.constructor=t;t.prototype.superproto=s.prototype;t.prototype.superclass=s;t.superclass=s;b(u,t.prototype)}for(var n=e.length-1;n>-1;--n){var i=e[n];if(!i.objName||!i.fnName||!i.fn){continue}if(i.objName==j){var l=c(i.objName);d(l,i.fnName,i.fn);e.splice(n,1)}}return o};this.override=function(i,k,h){var j=c(i);if(typeof j==="undefined"){throw new Error("Object must be defined before calling override.")}if(typeof h!="function"){throw new Error("A function is required to override a base function.")}if(j.inheritancePending){e.push({objName:i,fnName:k,fn:h})}else{d(j,k,h)}};function d(i,j,h){if(!i.prototype[j]||typeof i.prototype[j]!="function"){s7sdk.Logger.log(s7sdk.Logger.WARNING,"s7sdk.Class.override: base function %0 does not exist.",j)}h.parent=i.prototype[j];i.prototype[j]=h}this.resolveAllPending=function(){var h=g.length;while(h--&&g.length){f()}if(g.length){throw new Error("Class.resolveAllPending Inheritance Failure!")}};function f(){var j=g;g=[];for(var h=0;h<j.length;h++){j[h].apply(null,[])}}function c(j){var i=window,h=j.split(".");while(h.length&&typeof i!=="undefined"){i=i[h.shift()]}return i}function b(h,i){for(var j in h){if(h.hasOwnProperty(j)&&h.propertyIsEnumerable(j)){i[j]=h[j]}}}}}if(!s7sdk.Base){s7sdk.Base=function Base(f,c,d,b,e){this.id=f;this.pid=c;this.nt=d;this.cl=(typeof b=="string")?b:"";this.settings=e;this.obj=null;this.events=new Object();this.trackingManager=null};s7sdk.Base.prototype.symbols=null;s7sdk.Base.prototype.getSymbols=function(){return this.symbols};s7sdk.Base.prototype.createElement=function(){var b=(typeof this.id=="string"&&this.id.length);var c=b?document.getElementById(this.id):null;if(c){this.obj=c;this.nt=c.tagName}else{this.obj=document.createElement(this.nt);if(b){this.obj.setAttribute("id",this.id)}}this.obj.className=this.cl;this.obj.setAttribute("data-description","Scene7ComponentHolder");this.obj.setAttribute("data-component",this.getClassName());this.obj.s7base=this;if(!s7sdk.Util.isNull(this.settings)&&!s7sdk.Util.isNull(this.settings.locale)){this.obj.setAttribute("lang",this.settings.locale)}return this.obj};s7sdk.Base.prototype.getParent=function(){return(this.pid==null?document.body:document.getElementById(this.pid))};s7sdk.Base.prototype.getObj=function(){return this.obj};s7sdk.Base.prototype.getId=function(){return this.id};s7sdk.Base.prototype.getCl=function(){return this.cl};s7sdk.Base.prototype.getParam=function(d,e){var c;var b=this.getClassName();if(this.settings&&typeof this.settings.get=="function"){c=this.settings.get.apply(this.settings,[d,e,b,this.id])}else{c=e}return c};s7sdk.Base.prototype.addEventListener=function(f,e,b){if(!f){throw new Error("Invalid event type!")}b=(typeof b=="boolean"&&b);if(!s7sdk.Util.hasProperty(this.events,f)){this.events[f]=[];this.events[f].indexOfHandler=function(i,g){function h(k,j){return(k.handler===i&&k.useCapture==g)?j:-1}return Math.max.apply(null,this.map(h))}}var c=this.hasEventListener(f,e,b);if(!c){this.events[f].push({handler:e,useCapture:b});if(this.obj.addEventListener){this.obj.addEventListener(f,e,b)}else{if(this.obj.attachEvent){var d=s7sdk.Event.getIEEvent(f)||"onpropertychange";s7sdk.Logger.log(s7sdk.Logger.FINEST,"Registered S7Event is %0 , IE Event is %1",f,d);if(d=="onpropertychange"){this.obj.handler=this.obj.handler||{};this.obj.handler[f]=this.obj.handler[f]||[];this.obj.handler[f].push(e);this.obj.attachEvent(d,function(i){i=i||window.event;var h=i.srcElement.handler[i.s7eventName];if(h){var g=h.indexOf(e);if((g>-1)&&(f==i.s7eventName)){h[g](i)}}})}else{this.obj.attachEvent(d,e)}}}}};s7sdk.Base.prototype.removeEventListener=function(e,d,b){b=(typeof b=="boolean"&&b);var c=this.events[e]?this.events[e].indexOfHandler(d,b):-1;if(c>=0){if(this.obj.removeEventListener){this.obj.removeEventListener(e,d,b);this.events[e].splice(c,1);if(!this.events[e].length){delete this.events[e]}}else{if(this.obj.handler&&this.obj.handler[e]){delete this.obj.handler[e]}}}};s7sdk.Base.prototype.hasEventListener=function(d,c,b){return this.events[d]?this.events[d].indexOfHandler(c,b)>=0:false};s7sdk.Base.prototype.dispatchEvent=function(b){s7sdk.Event.dispatch(this.obj,b)};s7sdk.Base.prototype.disableEvent=function(e){if(e==null){for(var d in this.events){for(var b=0;b<this.events[d].length;b++){if(d=="onpropertychange"){continue}if(this.obj.removeEventListener){this.obj.removeEventListener(d,this.events[d][b].handler,this.events[d][b].useCapture)}else{this.obj.detachEvent("on"+d,this.events[d][b].handler)}}}}else{if(this.events.hasOwnProperty(e)){for(var c=0;c<this.events[e].length;c++){if(this.obj.removeEventListener){this.obj.removeEventListener(e,this.events[e][c].handler,this.events[e][c].useCapture)}else{this.obj.detachEvent("on"+e,this.events[e][c].handler)}}}}};s7sdk.Base.prototype.enableEvent=function(e){if(e==null){for(var d in this.events){for(var b=0;b<this.events[d].length;b++){if(d=="onpropertychange"){continue}if(this.obj.addEventListener){this.obj.addEventListener(d,this.events[d][b].handler,this.events[d][b].useCapture)}else{this.obj.attachEvent("on"+d,this.events[d][b].handler)}}}}else{if(this.events.hasOwnProperty(e)){for(var c=0;c<this.events[e].length;c++){if(this.obj.addEventListener){this.obj.addEventListener(e,this.events[e][c].handler,this.events[e][c].useCapture)}else{this.obj.attachEvent("on"+e,this.events[e][c].handler)}}}}};s7sdk.Base.prototype.getClassName=function(){var d;if(this.constructor&&this.constructor.name&&this.constructor.name.length){d=this.constructor.name}else{var b=/function\s([^(]{1,})\(/;var c=(b).exec((this).constructor.toString());if(c&&c.length>1){d=c[1]}}return d};s7sdk.Base.prototype.getLocalizedText=function(b){var d="";if(!s7sdk.Util.isNull(this.settings)){var e=b;var c=b;if(!s7sdk.Util.isNull(this.getClassName())){e=this.getClassName()+"."+e;if(!s7sdk.Util.isNull(this.id)){c=this.id+"."+e}}d=this.settings.getLocalizedText(c,null);if(d==null){d=this.settings.getLocalizedText(e,this.symbols[b])}}return d};s7sdk.Base.prototype.wrapContext=function(c){var b=this;return(function(){c.apply(b,arguments)})}}if(!s7sdk.Component){s7sdk.Component=function Component(f,c,d,b,e){arguments.callee.superclass.apply(this,[f,c,d,b,e]);if(e instanceof s7sdk.ParameterManager&&!arguments[5]){e.registerComponent(this)}this.parseMods()};s7sdk.Class.inherits("s7sdk.Component","s7sdk.Base");s7sdk.Component.prototype.modifiers=null;s7sdk.Component.prototype.getModifiers=function(){return this.modifiers};s7sdk.Component.prototype.parseMods=function(){var g,c,h,b,f,e;for(g in this.modifiers){if(!this.modifiers.hasOwnProperty(g)){continue}c=this.modifiers[g];try{b=this.getParam(g,"");if(c.parseParams===false){f=new s7sdk.Modifier([b])}else{f=s7sdk.Modifier.parse(b,c.defaults,c.ranges)}if(g in this){throw new Error("Cannot add modifier property to component! "+this.getClassName()+" already defines property '"+g+"'!")}if(f.values.length==1){this[g]=f.values[0]}else{if(f.values.length>1){h={};for(e=0;e<f.values.length;e++){h[c.params[e]]=f.values[e]}this[g]=h}}}catch(d){throw new Error("Unable to process modifier: '"+g+"'. "+d)}}}}if(!s7sdk.UIComponent){s7sdk.UIComponent=function UIComponent(f,c,d,b,e){this.owner=null;arguments.callee.superclass.apply(this,[f,c,d,b,e,arguments[5]])};s7sdk.Class.inherits("s7sdk.UIComponent","s7sdk.Component");s7sdk.UIComponent.prototype.resize=function(c,b){s7sdk.Logger.log(s7sdk.Logger.FINE,"UIComponent.resize %0: %1x%2",this.id,c,b)};s7sdk.UIComponent.prototype.getOwner=function(){return this.owner};s7sdk.UIComponent.prototype.setOwner=function(b){this.owner=b};s7sdk.UIComponent.prototype.setCSS=function(e,d,c){s7sdk.Logger.log(s7sdk.Logger.FINE,"UIComponent.setCSS %0 %1 %2",e,d,c);var g=s7sdk.Util.objByClassName(e,this.getParent());var f=s7sdk.Util.cssPropToJSProp(d);for(var b=0;b<g.length;b++){g[b].style[f]=c}}}if(!s7sdk.Modifier){s7sdk.Modifier=function(b){this.values=b};s7sdk.Modifier.parse=function(m,f,b){var h=[];if(s7sdk.Util.isArray(f)==false){throw new Error("A valid 'defaults' array must be provided!")}if(s7sdk.Util.isString(m)){var l=m.trim().split(",");for(var j=0;j<f.length;j++){if(typeof l[j]=="undefined"){l[j]=""}l[j]=l[j].trim();if(j>l.length-1||l[j].length==0){h[j]=f[j];continue}if(s7sdk.Util.isNumberType(f[j])){h[j]=Number(l[j]);if(isNaN(h[j])){throw new Error("The "+e(j)+" parameter should be Number!")}if(b&&b[j]&&k(h[j],b[j])==false){throw new Error("The "+e(j)+" parameter is out of range!")}}else{if(s7sdk.Util.isString(f[j])){h[j]=String(l[j]);if(b&&s7sdk.Util.isArray(b[j])&&c(h[j],b[j])==false){throw new Error("The "+e(j)+" parameter is not a valid string!")}}else{if(s7sdk.Util.isBoolean(f[j])){var d=l[j].toLowerCase();if(d!="1"&&d!="true"&&d!="false"&&d!="0"){throw new Error("The "+e(j)+" parameter should be Boolean!")}h[j]=d=="true"?true:d=="false"?false:Boolean(Number(d))}else{h[j]=l[j]}}}}if(l.length>j){throw new Error("Too many parameters passed!")}}else{throw new Error("A valid 'input' string must be provided!")}function e(i){return(i+1)+g(i+1)}function g(i){var n=i%10;return(i<4||i>20)?(n==1?"st":n==2?"nd":n==3?"rd":"th"):"th"}function k(n,p){var q=false,s=p.trim().split(","),r,o;for(o=0;o<s.length;o++){r=s[o].trim().split(":");if(Number(r[0])==n||(r.length==2&&(r[0].length==0||n>=Number(r[0]))&&(r[1].length==0||n<=Number(r[1])))){q=true;break}}return q}function c(q,o){var n=false,r=q.toLowerCase(),p;for(p=0;p<o.length;p++){if(s7sdk.Util.isString(o[p])==false){throw new Error("String ranges must be specified as strings!")}if(o[p].toLowerCase().trim()==r){n=true;break}}return n}return new s7sdk.Modifier(h)}}if(!s7sdk.Event){s7sdk.Event=function(){};s7sdk.Event.dispatch=function(f,b,c){c=(typeof c=="boolean")?c:false;if(!f){throw new Error("Cannot dispatch event to non-exist target!")}else{if(!b){throw new Error("Cannot dispatch event without type id or s7event object!")}}if(document.createEvent){var d=document.createEvent("Events");if(typeof b!="string"){d.s7event=b;d.initEvent(b.type,b.bubbles,b.useCapture)}else{d.initEvent(b,true,false)}if(c){setTimeout(function(){f.dispatchEvent(d)},0)}else{f.dispatchEvent(d)}}else{var e=document.createEventObject();e.s7event=b;e.s7eventName=(typeof b!="string"?b.type:b);if(f.fireEvent){var g=function(){if(s7sdk.Util.elementInDOM(f)){f.fireEvent("onpropertychange",e)}else{document.body.appendChild(f);f.fireEvent("onpropertychange",e);document.body.removeChild(f)}};if(c){setTimeout(function(){g()},0)}else{g()}}}};s7sdk.Event.addEventHandler=function(c,f,d,e,b){b=s7sdk.Util.isNull(b)?false:b;s7sdk.Event.addDOMListener(c,f,function(g){if(!g){g=window.event}e.apply(s7sdk.Util.isNull(d)?this:d,[g])},b)};s7sdk.Event.addDOMListener=function(f,d,e,b){if("addEventListener" in f){f.addEventListener(d,e,b)}else{if("attachEvent" in f){var c=s7sdk.Event.getIEEvent(d)||d;f.attachEvent(c,e)}}};s7sdk.Event.removeDOMListener=function(f,d,e,b){if("removeEventListener" in f){f.removeEventListener(d,e,b)}else{if("detachEvent" in f){var c=s7sdk.Event.getIEEvent(d)||d;f.detachEvent(c,e)}}};s7sdk.Event.preventDefault=function(b){if(b){if(b.preventDefault){b.preventDefault()}else{b.returnValue=false}}};s7sdk.Event.stopPropagation=function(b){if(b){if(b.stopPropagation){b.stopPropagation()}else{b.cancelBubble=true}}};s7sdk.Event.getTarget=function(b){var c;if(!b){var b=window.event}if(b.target){c=b.target}else{if(b.srcElement){c=b.srcElement}}if(c&&c.nodeType==3){c=c.parentNode}return c};s7sdk.Event.getIEEvent=function(b){return s7sdk.Event.IEEVENT[b]};s7sdk.Event.TILE_LOADED="tileLoaded";s7sdk.Event.TILE_FAILED="tileFailed";s7sdk.Event.RES_INVALIDATED="invalidated";s7sdk.Event.INIT_COMPLETE="initComplete";s7sdk.Event.VIEW_LOADED="viewLoaded";s7sdk.Event.RENDER="render";s7sdk.Event.ENTER_FRAME="enterFrame";s7sdk.Event.SWIPE="s7swipe";s7sdk.Event.CLICK="s7click";s7sdk.Event.DBLCLICK="s7dblclick";s7sdk.Event.SDK_READY="sdkReady";s7sdk.Event.IEEVENT={mouseover:"onmouseover",mouseout:"onmouseout",mousedown:"onmousedown",mouseup:"onmouseup",mousemove:"onmousemove",mouseenter:"onmouseenter",mouseleave:"onmouseleave",mousewheel:"onmousewheel",contextmenu:"oncontextmenu",click:"onclick",dblclick:"ondblclick",keydown:"onkeydown",keyup:"onkeyup",keypress:"onkeypress",load:"onload",unload:"onunload",focus:"onfocus",blur:"onblur",focusin:"onfocusin",focusout:"onfocusout",resize:"onresize",scroll:"onscroll",change:"onchange"}}if(!s7sdk.ParameterManager){s7sdk.ParameterManager=function ParameterManager(c,b,f,e){s7sdk.Logger.log(s7sdk.Logger.CONFIG,"s7sdk.ParameterManager constructor - config: %0, locale: %1 , modifierMap: %2, defaultCSS: %3",c,b,f,e);arguments.callee.superclass.call(this,s7sdk.Util.createUniqueId(),null,"span");this.registeredComponents=[];this.params=new Object();this.config=(c?c:null);this.eventObj=new Image();this.hadCustomSize=false;this.createElement();this.getParent().appendChild(this.obj);this.obj.style.display="none";this.eventObj=this.obj;this.loadTracked=false;this.i18n={};this.locale=(b?b:null);this.localizedTexts={};this.viewerType=s7sdk.ParameterManager.TYPE;this.viewerVersion="UNKNOWN";var d=window.location.href;this.viewerName=d.split("?")[0].split("/").pop();if(this.viewerName.indexOf(".")>0){this.viewerName=this.viewerName.split(".")[0]}this.modifierMap=(s7sdk.Util.isNull(f)?null:f);this.defaultCSS=(s7sdk.Util.isNull(e)?"":e);this.bulkPush(s7sdk.query.params)};s7sdk.Class.inherits("s7sdk.ParameterManager","s7sdk.Base");s7sdk.ParameterManager.TYPE="s7_html5_sdk";s7sdk.ParameterManager.prototype.registerComponent=function(b){if(b instanceof s7sdk.Component){var c=b.getParent();if(!c||(c.s7base&&(c.s7base.getClassName()==="Container"||c.s7base.getClassName()==="ControlBar"||c.s7base.getClassName()==="SocialShare"))||!c.s7base){this.registeredComponents.push(b)}}else{throw new Error("Cannot register component that is not a sub-class of s7sdk.Component!")}};s7sdk.ParameterManager.prototype.getRegisteredComponents=function(){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.getRegisteredComponents");var b=[];for(var c=0;c<this.registeredComponents.length;c++){b.push(this.registeredComponents[c])}return b};s7sdk.ParameterManager.prototype.setLocalizedTexts=function(c){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.setLocalizedTexts - inObj: %0",c);if(typeof c=="object"){for(var b in c){this.localizedTexts[b]=c[b]}}};s7sdk.ParameterManager.prototype.addEventListener=function(d,c,b){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.addEventListener - type: %0, handler: %1, useCapture: %2",d,c.toString().substring(0,c.toString().indexOf("(")),b);s7sdk.Base.prototype.addEventListener.apply(this,[d,c,b])};s7sdk.ParameterManager.loadConfig=function(f,d){for(var c in f){if(!f.hasOwnProperty(c)){continue}d.push(c,f[c]);if(c.indexOf("i18n")==0&&c.split(".").length>1){var h="";var b=c.split(".");for(var e=1;e<b.length;e++){h+=(h!=""?".":"")+b[e]}d.i18n[h]=f[c]}}d.hadCustomSize=d.get("size",null)!=null;var g=d.resolveCSSPathFromStyleModifier(d);d.remap();if(g==null){if(d.defaultCSS!=""){s7sdk.Util.css.include(d.defaultCSS)}else{if(s7sdk.Util.css.defaultCSS!=""){s7sdk.Util.css.include(s7sdk.Util.css.defaultCSS)}}}else{s7sdk.Util.css.include(g,null,true)}s7sdk.ParameterManager.checkCSS(d,0)};s7sdk.ParameterManager.prototype.init=function(){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.init");if(typeof this.params.config!="undefined"&&this.params.config!=null&&this.params.config.length>0){this.config=(typeof this.params.serverurl!="undefined"&&this.params.serverurl!=null?this.params.serverurl:"/is/image/");this.config+=(this.config.lastIndexOf("/")!=(this.config.length-1)?"/":"")+unescape(this.params.config)}if(!s7sdk.Util.isNull(this.params.locale)&&this.params.locale.length>0){this.locale=this.params.locale}else{if(!s7sdk.Util.isNull(this.localizedTexts.defaultLocale)&&s7sdk.Util.isNull(this.locale)){this.locale=this.localizedTexts.defaultLocale}else{if(s7sdk.Util.isNull(this.locale)){this.locale="en"}}}this.populateLocalizedTexts();s7sdk.ParameterManager.check(this)};s7sdk.ParameterManager.prototype.resolveCSSPathFromStyleModifier=function(){var c=this.get("style",null);if(c==null){return null}var f=this.get("contentRoot",null);var h=this.get("contentURL","/is/content");if(!s7sdk.Util.isAbsPath(c)){var i=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var b=null;var e=null;var g=null;var d=(f!=null)?f:h;if(d!=null){d=d+(d.charAt(d.length-1)!="/"?"/":"");b=d.match(i);e=b[2]||null;g=b[4]||null;if((e)&&(g)){if(c.indexOf("/")==0){c=e+"://"+g+c}else{c=d+c}}else{c=(c.charAt(0)=="/")?c.substr(1,c.length-1):c;c=d+c}}}return c==""?null:c};s7sdk.ParameterManager.checkCSS=function(c,b){if(!s7sdk.Util.css.isAllLoaded()&&b<30){s7sdk.Util.timeout(s7sdk.ParameterManager.checkCSS,100,[c,++b])}else{if(b>=30){s7sdk.Logger.log(s7sdk.Logger.SEVERE,"Cannot load CSS")}if(s7sdk.browser.name==="ie"){}s7sdk.Event.dispatch(c.eventObj,s7sdk.Event.SDK_READY,true);var d=c.get("title","",c.getClassName(),c.id);if(d!=""){window.document.title=d}}};s7sdk.ParameterManager.check=function(d){if(!s7sdk.Util.lib.isAllJSLoaded()||s7sdk.browser.isNoScreenSize()){s7sdk.Util.timeout(s7sdk.ParameterManager.check,100,[d])}else{s7sdk.Class.resolveAllPending();if(d.config!=null){var b=new s7sdk.IS();b.getHttpReq(d.config+"?req=userdata,json,UTF-8&locale="+d.locale,s7sdk.ParameterManager.loadConfig,null,d)}else{d.hadCustomSize=d.get("size",null)!=null;var c=d.resolveCSSPathFromStyleModifier();if(c==null){if(d.defaultCSS!=""){s7sdk.Util.css.include(d.defaultCSS)}else{if(s7sdk.Util.css.defaultCSS!=""){s7sdk.Util.css.include(s7sdk.Util.css.defaultCSS)}}}else{s7sdk.Util.css.include(c,null,true)}s7sdk.ParameterManager.checkCSS(d,0)}}};s7sdk.ParameterManager.prototype.trackLoad=function(b){if(this.loadTracked){return}var c=new s7sdk.event.UserEvent(s7sdk.event.UserEvent.LOAD,this.createLoadData().split(","),true);s7sdk.Event.dispatch(b.obj,c,false);this.sendLoadMessage();this.loadTracked=true};s7sdk.ParameterManager.prototype.sendLoadMessage=function(){var e="";var d=(new Date()).getTime();var h="";for(var g in this.params){if(typeof g==="string"){if((g.indexOf(".asset")!=-1&&g.indexOf(".asset")==g.lastIndexOf(".asset"))||(g=="asset")){h=this.params[g]}}}var b=(this.params.serverurl)?this.params.serverurl+"/":"/is/image/";var f=(b+h).replace(/%2f|%2F/g,"/").match(new RegExp("(http[s]?://[^/]+)?[/]+([^/]+[/]+[^/]+)[/]+([^/]+)[/]+([^\\?]+)[\\?]?","i"));if((f==null)||(f.length<3)){s7sdk.Logger.log(s7sdk.Logger.WARNING,"Invalid image set.")}else{while(b.length>0&&b.lastIndexOf("/")==(b.length-1)){b=b.substr(0,b.length-1)}var c=new Image();e=b+"/"+escape(f[3])+"?req=message&message=,0,LOAD,"+this.viewerType+","+this.viewerName+","+this.viewerVersion+","+s7sdk.Version.version+",,,"+f[3]+"/"+f[4];c.src=e}};s7sdk.ParameterManager.prototype.setViewer=function(b){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.setViewer - inParams: %0",b);var c=b.split(",");if(c.length==3){this.viewerType=c[0];this.viewerVersion=c[1];this.viewerName=c[2]}else{if(c.length==2){this.viewerType=c[0];this.viewerVersion=c[1]}else{s7sdk.Logger.log(s7sdk.Logger.WARNING,"Invalid parameter for ParameterManager.setViewer(<inParams>):"+b)}}};s7sdk.ParameterManager.prototype.createLoadData=function(){var d=window.location.href;if(!this.viewerName||this.viewerName.length<1){this.viewerName=d.split("?")[0].split("/").pop();if(this.viewerName.indexOf(".")>0){this.viewerName=this.viewerName.split(".")[0]}}var e="",c="";var f=this.get("asset");if(!f){f=this.get("asset","","MediaSet")}if(f&&f.length>0){var b=f.indexOf("/");if(b>-1){c=f.substring(0,b);e=f.substring(b+1)}}return this.viewerType+","+this.viewerName+","+this.viewerVersion+","+s7sdk.Version.version+","+c+","+e};s7sdk.ParameterManager.prototype.onReady=function(){};s7sdk.ParameterManager.prototype.getModKey=function(c){var b=c.split(".");b[b.length-1]=b[b.length-1].toLowerCase();return b.join(".")};s7sdk.ParameterManager.prototype.push=function(b,d){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.push - key: %0, value: %1",b,d);var c=this.getModKey(b);if(!s7sdk.Util.isNull(this.modifierMap)&&!s7sdk.Util.isNull(this.modifierMap[c])){c=this.modifierMap[c]}if(!this.params[c]){this.params[c]=d}};s7sdk.ParameterManager.prototype.del=function(b){var c=this.getModKey(b);delete this.params[c]};s7sdk.ParameterManager.prototype.bulkPush=function(c){for(var b in c){if(!c.hasOwnProperty(b)){continue}this.push(b,(c.hasOwnProperty(b)?c[b]:null))}};s7sdk.ParameterManager.prototype.get=function(c,b,d,g){var f;var e=c.toLowerCase();if(g&&this.params[g+"."+e]){f=this.params[g+"."+e]}else{if(d&&this.params[d+"."+e]){f=this.params[d+"."+e]}else{f=(this.params[e]?this.params[e]:b)}}return f};s7sdk.ParameterManager.prototype.toString=function(){var c="ParameterManager: { ";for(var b in this.params){if(this.params.hasOwnProperty(b)){c+=b+"="+this.params[b]+" "}}c+="}";return c};s7sdk.ParameterManager.prototype.getLocalizedText=function(b,c){if(!s7sdk.Util.isNull(this.i18n[b])){return this.i18n[b]}return c};s7sdk.ParameterManager.prototype.listSymbols=function(){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.ParameterManager.listSymbols");var h=this.getRegisteredComponents();var b={};var g="";var e;for(var f=0;f<h.length;f++){e=h[f].getSymbols();if(e!=null){for(var d in e){if(this.i18n[h[f].getClassName()+"."+d]){b[h[f].getClassName()+"."+d]=this.i18n[h[f].getClassName()+"."+d]}else{b[h[f].getClassName()+"."+d]=e[d]}var c='"'+h[f].getClassName()+"."+d+'":"'+b[h[f].getClassName()+"."+d]+'"';if(g==""){g+=c}else{g+=","+c}}}}return"{"+g+"}"};s7sdk.ParameterManager.prototype.populateLocalizedTexts=function(){var c=this.localizedTexts[this.locale];if(s7sdk.Util.isNull(c)){c=this.localizedTexts[(!s7sdk.Util.isNull(this.localizedTexts.defaultLocale)?this.localizedTexts.defaultLocale:"en")]}for(var b in c){if(c.hasOwnProperty(b)){this.i18n[b]=c[b]}}};s7sdk.ParameterManager.prototype.remap=function(){if(this.modifierMap!=null){var d={};for(var c in this.params){if(!this.params.hasOwnProperty(c)){continue}if(!s7sdk.Util.isNull(this.modifierMap[c])){var b=this.modifierMap[c];d[b]=this.params[c]}else{d[c]=this.params[c]}}this.params=d}}}if(!s7sdk.Color){s7sdk.Color=function(b){this.rawdata=b;this.hex=(typeof b=="number"?b.toString(16):b);this.hex=this.hex.replace("#","");this.hex=this.hex.replace("0x","");this.hex=this.hex.substring(0,6);var c=parseInt(this.hex,16);this.rgb={r:(c>>16)&255,g:(c>>8)&255,b:c&255}};s7sdk.Color.prototype.toString=function(){return"RAW:"+this.rawdata+"HEX:"+this.hex};s7sdk.Color.prototype.hexColor=function(){return"#"+this.hex};s7sdk.Color.prototype.rgbColor=function(){return this.rgb}}if(!s7sdk.Logger){s7sdk.Logger={console:{minlink:{id:"s7debugmaxlink",obj:null,pos:{x:5,y:5}},popup:{id:"s7debug",obj:null,pos:{x:5,y:5}},content:{id:"s7debugcontent",obj:null},nativeConsole:null},NONE:-1,SEVERE:0,WARNING:1,INFO:2,CONFIG:3,FINE:4,FINER:5,FINEST:6,severity:["SEVERE","WARNING","INFO","CONFIG","FINE","FINER","FINEST"],traceLevel:-1,enablePopup:false,enableInline:false,init:function(){var c=s7sdk.query.getValue("loglevel","SEVERE").toUpperCase();var d=c.split(",")[0];s7sdk.Logger.enablePopup=((c.split(",").length>1?c.split(",")[1]:"NONE")=="POPUP");s7sdk.Logger.enableInline=((c.split(",").length>1?c.split(",")[1]:"NONE")=="INLINE");var b=s7sdk.Logger[d];s7sdk.Logger.traceLevel=(typeof b=="undefined"?0:b);if(s7sdk.Logger.traceLevel>-1){if(s7sdk.Logger.enableInline){s7sdk.Logger.inlineDiv=null;s7sdk.Util.css.add("div.s7debuginline","height:300px;background-color:#FFFFFF;border:1px solid #CCCCCC;overflow:auto;position:relative;bottom:0px;width:100%")}if(s7sdk.Logger.enablePopup){s7sdk.Util.css.add("a.s7debugmaxlink","position:absolute;top:0px;left:0px;font-family:Arial;font-size:10px;font-weight:bold;text-align:center;display:block;height:15px;line-height:15px;width:80px;border:1px dotted #FF6600;color: #FF6600;background-color:#FFFFFF;z-index:1000;text-decoration:none;opacity:0.8;");s7sdk.Util.css.add("a.s7debugmaxlink:hover","border:1px solid #FF0000; color:#FF0000;");s7sdk.Util.css.add("a.s7debugminlink","display:block;width:80px;margin-right:5px;font-family:Arial;font-size:10px;font-weight:bold;color:#FF6600;text-decoration:none;");s7sdk.Util.css.add("a.s7debugminlink:hover","color:#FF6600;");s7sdk.Util.css.add("div.s7debugpopup","position:absolute;width:300px;height:200px;z-index:1000;border:1px solid #CCCCCC;background-color:#CCCCCC;box-shadow:2px 2px 2px #555555;cursor:move;opacity:0.9;border-radius:5px;");s7sdk.Util.css.add("div.s7debugcontent","width:280px;height:170px;margin: 0 0 0 9px; border:1px solid #CCCCCC;overflow:scroll;background-color:#FFFFFF;cursor:pointer;");s7sdk.Util.css.add("div.s7debugheader","width:298px;line-height:20px;clear:both;");s7sdk.Util.css.add("div.s7debuglabel","width:150px;font-weight:bold;color:#222222;float:left;margin-left:5px;font-family:Arial;font-size:11px;");s7sdk.Util.css.add("div.s7debugitem","border-bottom:1px dotted #CCCCCC;font:11px Arial;padding:5px 0px 5px 5px;");if(window.addEventListener){window.addEventListener("load",s7sdk.Logger.createConsole,false)}else{if(document.attachEvent){window.attachEvent("onload",function(){s7sdk.Logger.createConsole()})}}}if(typeof window.console!="undefined"){s7sdk.Logger.console.nativeConsole=function(e){window.console.log(e)}}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){s7sdk.Logger.console.nativeConsole=function(e){console.log(e)}}else{s7sdk.Logger.console.nativeConsole=function(e){}}}}},minimize:function(b){s7sdk.Logger.console.popup.obj.style.top=(b?"-1000px":s7sdk.Logger.console.popup.pos.y+"px");s7sdk.Logger.console.minlink.obj.style.top=(b?s7sdk.Logger.console.minlink.pos.y+"px":"-1000px")},createConsole:function(){var c=document.createElement("a");c.className="s7debugmaxlink";c.setAttribute("id","s7debugmaxlink");c.setAttribute("href","javascript:void(0);");c.setAttribute("title","Click to show trace console");c.appendChild(document.createTextNode("+ Show Trace"));if(c.addEventListener){c.addEventListener("click",function(){s7sdk.Logger.minimize(false)},false)}else{c.attachEvent("onclick",function(){s7sdk.Logger.minimize(false)})}s7sdk.Util.setObjPos(c,s7sdk.Logger.console.minlink.pos.x,s7sdk.Logger.console.minlink.pos.y);s7sdk.Logger.console.minlink.obj=c;document.body.appendChild(c);var f=document.createElement("div");f.setAttribute("id","s7debug");s7sdk.Util.setObjPos(f,s7sdk.Logger.console.popup.pos.x,s7sdk.Logger.console.popup.pos.y);f.className="s7debugpopup";if(f.addEventListener){f.addEventListener("mousedown",s7sdk.Logger.drag,false);f.addEventListener("mouseup",s7sdk.Logger.drop,false)}else{f.attachEvent("onmousedown",s7sdk.Logger.drag);f.attachEvent("onmouseup",s7sdk.Logger.drop)}f.dragStart=false;f.dragRef={x:0,y:0};s7sdk.Logger.console.popup.obj=f;var b=document.createElement("div");b.setAttribute("align","right");b.className="s7debugheader";var d=document.createElement("div");d.className="s7debuglabel";d.setAttribute("align","left");d.appendChild(document.createTextNode("S7 Trace Console"));b.appendChild(d);var g=document.createElement("a");g.setAttribute("href","javascript:void(0);");g.className="s7debugminlink";g.setAttribute("title","Click to minimize trace console");g.onclick=function(){s7sdk.Logger.minimize(true)};g.appendChild(document.createTextNode("- minimize"));b.appendChild(g);f.appendChild(b);var e=document.createElement("div");e.setAttribute("id","s7debugcontent");e.nodrag=true;e.className="s7debugcontent";f.appendChild(e);s7sdk.Logger.console.content.obj=e;document.body.appendChild(f);s7sdk.Logger.minimize(false)},getPos:function(b){if(b.pageX||b.pageY){return{x:b.pageX,y:b.pageY}}else{return{x:b.clientX+document.body.scrollLeft-document.body.clientLeft,y:b.clientY+document.body.scrollTop-document.body.clientTop}}},drag:function(d){var c=s7sdk.Event.getTarget(d);var b=(typeof c.nodrag=="undefined"?false:c.nodrag);if(!b){s7sdk.Logger.console.popup.obj.dragStart=true;s7sdk.Logger.console.popup.obj.dragRef=s7sdk.Logger.getPos(d);if(document.addEventListener){document.addEventListener("mousemove",s7sdk.Logger.move,false)}else{document.attachEvent("onmousemove",s7sdk.Logger.move)}}},move:function(d){if(s7sdk.Logger.console.popup.obj.dragStart){var f=s7sdk.Logger.getPos(d);var c=f.x-s7sdk.Logger.console.popup.obj.dragRef.x;var b=f.y-s7sdk.Logger.console.popup.obj.dragRef.y;s7sdk.Logger.console.popup.obj.dragRef=f;s7sdk.Logger.console.popup.pos.x=s7sdk.Logger.console.popup.pos.x+c;s7sdk.Logger.console.popup.pos.y=s7sdk.Logger.console.popup.pos.y+b;s7sdk.Logger.console.popup.obj.style.top=s7sdk.Logger.console.popup.pos.y+"px";s7sdk.Logger.console.popup.obj.style.left=s7sdk.Logger.console.popup.pos.x+"px"}},drop:function(c){var b=s7sdk.Event.getTarget(c);s7sdk.Logger.console.popup.obj.dragStart=false;if(document.addEventListener){document.addEventListener("mousemove",s7sdk.Logger.move,false)}else{document.attachEvent("onmousemove",s7sdk.Logger.move)}},log:function(){var j=(arguments.length>=1?arguments[0]:"");if(s7sdk.Logger.traceLevel>=j){var d=s7sdk.Logger.severity[j];var h=(arguments.length>=2?arguments[1]:"");var c=new Array();for(var e=2;e<arguments.length;e++){c.push(arguments[e])}h=s7sdk.Logger.parseMacro(h,c);var g=(new Date()+" ").substring(0,34);if(s7sdk.Logger.console.content.obj!=null){var f=document.createElement("div");f.className="s7debugitem";f.appendChild(document.createTextNode(g+" - "+d+":"+h));f.nodrag=true;s7sdk.Logger.console.content.obj.appendChild(f);s7sdk.Logger.console.content.obj.scrollTop=s7sdk.Logger.console.content.obj.scrollHeight}if(s7sdk.Logger.enableInline&&document.body){if(null==s7sdk.Logger.inlineDiv){s7sdk.Logger.inlineDiv=document.createElement("div");s7sdk.Logger.inlineDiv.className="s7debuginline";document.body.appendChild(s7sdk.Logger.inlineDiv)}var b=s7sdk.Logger.inlineDiv.innerHTML;if(b.length>5000){b=b.substr(0,5000)}s7sdk.Logger.inlineDiv.innerHTML=d+":"+h+"<br>"+b}if(s7sdk.browser.name!="ie"){s7sdk.Logger.console.nativeConsole(g+" - "+d+":"+h)}}},parseMacro:function(f,e){var b=f;for(var c=e.length;c>0;c--){var d=new RegExp("%"+(c-1),"g");b=b.replace(d,e[c-1])}return b}};s7sdk.Logger.init()}if(!s7sdk.ImagePool){s7sdk.ImagePool=function(){this.freeImages=[];this.usedImages=[]};s7sdk.ImagePool.prototype.getImage=function(){var b;if(this.freeImages.length>0){b=this.freeImages.pop()}else{b=new Image()}this.usedImages.push(b);return b};s7sdk.ImagePool.prototype.releaseImage=function(c){c.height=1;c.width=1;c.onload=function(){};c.onerror=function(){};c.onabort=function(){};var b=this.usedImages.indexOf(c);if(b>=0){this.usedImages.splice(b,1)}else{s7sdk.Logger.log(s7sdk.Logger.WARNING,"ImagePool.releaseImage with unused image.")}var b=this.freeImages.indexOf(c);if(b>=0){s7sdk.Logger.log(s7sdk.Logger.SEVERE,"ImagePool.releaseImage double release.")}else{this.freeImages.push(c)}};s7sdk.imagePool=new s7sdk.ImagePool()}if(!s7sdk.CSSUtility){s7sdk.CSSUtility=function(){};s7sdk.CSSUtility.getPageCSSByDescription=function(f){var c=document.getElementsByTagName("style");var e=f[0];var b=f[1];var d=this.getStyleByDataDescriptor(f,c,f);return d};s7sdk.CSSUtility.getStyleByDataDescriptor=function(b,e,f){var d=0,c=e.length;for(d=0;d<c;d+=1){element=e[d];if(element.getAttribute("data-description")==f){return element}}return null};s7sdk.CSSUtility.addStyle=function(d,l,k,g){var f="";for(var e in g){f=e+"{\n";for(var j in g[e]){f+=("\t"+j+":"+g[e][j]+";\n")}f+="}";var b=s7sdk.Util.createElement("style",{type:"text/css",media:"screen","data-description":e,"data-component":e});if(b.styleSheet){b.styleSheet.cssText=f}else{b.appendChild(document.createTextNode(f))}var h=document.head||document.getElementsByTagName("head")[0];var c=s7sdk.CSSUtility.getPageCSSByDescription(e);if(c){h.removeChild(c)}h.appendChild(b)}}}if(!s7sdk.Window){s7sdk.Window={resizedObjs:[],resizeTimeout:null,currentSize:{w:0,h:0},monitorSizeTime:10000,monitorSizeTimeout:0,monitorSizeTimer:null,attach:function(c,b){if(typeof b!="string"){b="resize"}this.resizedObjs.push({o:c,fn:b})},notfWindowResized:function(){s7sdk.browser.screensize=s7sdk.browser.detectScreen();if((s7sdk.browser.name=="ie")&&(s7sdk.browser.version.minor>5.5)&&(s7sdk.browser.version.minor<=8)){s7sdk.Window.ignoreNextResize=true}s7sdk.Window.sendNotifications()},sendNotifications:function(){for(var b=0;b<s7sdk.Window.resizedObjs.length;b++){if(s7sdk.Window.resizedObjs[b]){var d=s7sdk.Window.resizedObjs[b].o;var c=s7sdk.Window.resizedObjs[b].fn;d[c](s7sdk.browser.screensize.w,s7sdk.browser.screensize.h)}}},monitorSize:function(){s7sdk.browser.screensize=s7sdk.browser.detectScreen();if(s7sdk.Window.currentSize.w!=s7sdk.browser.screensize.w||s7sdk.Window.currentSize.h!=s7sdk.browser.screensize.h){s7sdk.Window.currentSize=s7sdk.browser.screensize;s7sdk.Window.sendNotifications()}if((new Date()).getTime()>s7sdk.Window.monitorSizeTimeout){clearInterval(s7sdk.Window.monitorSizeTimer);s7sdk.Window.monitorSizeTimer=null}},startMonitoringSize:function(){s7sdk.Window.monitorSizeTimeout=(new Date()).getTime()+s7sdk.Window.monitorSizeTime;if(null==s7sdk.Window.monitorSizeTimer){s7sdk.Window.monitorSizeTimer=window.setInterval(s7sdk.Window.monitorSize,100)}}};if(("onorientationchange" in window)&&s7sdk.browser.device!=""){window.onorientationchange=s7sdk.Window.startMonitoringSize;window.onresize=s7sdk.Window.startMonitoringSize}else{window.onresize=function(){if(s7sdk.Window.ignoreNextResize){s7sdk.Window.ignoreNextResize=false;return}if(s7sdk.Window.resizeTimeout){clearTimeout(s7sdk.Window.resizeTimeout)}s7sdk.Window.resizeTimeout=setTimeout(s7sdk.Window.notfWindowResized,100)}}}if(!s7sdk.Observable){s7sdk.Observable=function Observable(){this.listeners=new Object();this.properties=new Object()};s7sdk.Observable.prototype.notifyPropertyChanged=function(e,b,f){if(b&&b.equal(f)||b===f){return}var d=this.listeners[e];if(s7sdk.Util.isNull(d)){return}for(var c=0;c<d.length;c++){d[c](e,b,f)}};s7sdk.Observable.prototype.addPropertyListener=function(d,c){if(!c||typeof c!=="function"){return}var b=this.listeners[d];if(!b){b=this.listeners[d]=new Array()}b.push(c)};s7sdk.Observable.prototype.addPropertyListeners=function(b){for(property in this.properties){this.addPropertyListener(property,b)}};s7sdk.Observable.prototype.removePropertyListener=function(e,d){if(d||typeof d!=="function"){return}var c=this.listeners[e];if(!c){return}var b=c.indexOf(d);if(b!==-1){c.splice(b,1)}};s7sdk.Observable.prototype.removePropertyListeners=function(b){for(property in this.properties){this.removePropertyListener(property,b)}}}if(!s7sdk.TrackingManager){s7sdk.TrackingManager=function TrackingManager(b,d,c){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.TrackingManager constructor - containerId: %0, settings: %1 , compId: %2",b,d,c);if(null==d){d=new s7sdk.ParameterManager()}if(null==b){b="TrackMan"+s7sdk.Util.createUniqueId()}arguments.callee.superclass.apply(this,[c,b,"span",null,d]);this.initialized=false;this.trackComponents=[];this.trackEvents=[];this.eventObj=new Image();this.hadCustomSize=false;this.obj=this.eventObj;this.obj.style.display="none";this.eventTable={};this.handlerTable={};this.callback=undefined};s7sdk.Class.inherits("s7sdk.TrackingManager","s7sdk.Component");s7sdk.TrackingManager.prototype.modifiers={enableTracking:{params:["events"],defaults:[""],parseParams:false},disableTracking:{params:["events"],defaults:[""],parseParams:false}};s7sdk.TrackingManager.prototype.setCallback=function(c,b){this.callback=c;if(b){this.callbackContext=b}};s7sdk.TrackingManager.prototype.initializeComponentEvents=function(d){var h=[];if(s7sdk.TrackingManager.AVAILABLE_EVENTS.length<1){s7sdk.TrackingManager.AVAILABLE_EVENTS=[s7sdk.event.UserEvent.SWAP,s7sdk.event.UserEvent.SWATCH,s7sdk.event.UserEvent.PAGE,s7sdk.event.UserEvent.PLAY,s7sdk.event.UserEvent.PAUSE,s7sdk.event.UserEvent.STOP,s7sdk.event.UserEvent.MILESTONE,s7sdk.event.UserEvent.METADATA,s7sdk.event.UserEvent.HREF,s7sdk.event.UserEvent.ITEM,s7sdk.event.UserEvent.TARG,s7sdk.event.UserEvent.LOAD,s7sdk.event.UserEvent.ZOOM,s7sdk.event.UserEvent.SPIN,s7sdk.event.UserEvent.PAN]}var g=this.disableTracking.split(",");var c;if(g.length>0&&this.enableTracking.length==0){c=s7sdk.TrackingManager.AVAILABLE_EVENTS}else{c=this.enableTracking.split(",")}if(g.length>0){for(var b=0;b<c.length;b++){var f=c[b];if(g.indexOf(f)<0){h.push(f)}}}this.eventTable[d.pid]=h};s7sdk.TrackingManager.prototype.initializeEvents=function(){this.trackEvents=[];if(s7sdk.TrackingManager.AVAILABLE_EVENTS.length<1){s7sdk.TrackingManager.AVAILABLE_EVENTS=[s7sdk.event.UserEvent.SWAP,s7sdk.event.UserEvent.SWATCH,s7sdk.event.UserEvent.PAGE,s7sdk.event.UserEvent.PLAY,s7sdk.event.UserEvent.PAUSE,s7sdk.event.UserEvent.STOP,s7sdk.event.UserEvent.MILESTONE,s7sdk.event.UserEvent.METADATA,s7sdk.event.UserEvent.HREF,s7sdk.event.UserEvent.ITEM,s7sdk.event.UserEvent.TARG,s7sdk.event.UserEvent.LOAD,s7sdk.event.UserEvent.ZOOM,s7sdk.event.UserEvent.SPIN,s7sdk.event.UserEvent.PAN]}var d=this.disableTracking.split(",");var f;if(d.length>0&&this.enableTracking.length==0){f=s7sdk.TrackingManager.AVAILABLE_EVENTS}else{f=this.enableTracking.split(",")}if(d.length>0){for(var b=0;b<f.length;b++){var c=f[b];if(d.indexOf(c)<0){this.trackEvents.push(c)}}}this.initialized=true};s7sdk.TrackingManager.AVAILABLE_EVENTS=[];s7sdk.TrackingManager.modifiers="";s7sdk.TrackingManager.prototype.attach=function(b,c){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.TrackingManager.attach - component: %0",b);if(null==b){return}if(this.trackComponents.indexOf(b)<0){this.trackComponents.push(b);this.initializeComponentEvents(b);b.trackingManager=this;s7sdk.Event.addEventHandler(b,s7sdk.event.UserEvent.NOTF_USER_EVENT,b,this.onUserEvent,false)}if(c){this.handlerTable[b.pid]=c}};s7sdk.TrackingManager.prototype.detach=function(c){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.TrackingManager.detach - component: %0",c);if(null==c){return}c.removeEventListener(s7sdk.event.UserEvent.NOTF_USER_EVENT,this.onUserEvent,false);var b=this.trackComponents.indexOf(c);if(b<0){return}this.eventTable[c.pid]=[];this.trackComponents=this.trackComponents.splice(b,1);if(this.handlerTable.contains(c.pid)){this.handlerTable[c.pid]=null}};s7sdk.TrackingManager.prototype.onUserEvent=function(b){if(!this.trackingManager){return}var d=this.trackingManager.eventTable[this.pid];if(d.indexOf(b.s7event.trackEvent)==-1){return}s7sdk.Logger.log(s7sdk.Logger.CONFIG,"onUserEvent "+b.s7event.toString());var c=s7sdk.Event.getTarget(b);this.trackingManager.callTrackingHandler(this,(c&&c.id)?c.id:"",b.s7event.toString())};s7sdk.TrackingManager.prototype.callTrackingHandler=function(e,c,g){s7sdk.Logger.log(s7sdk.Logger.FINE,"s7sdk.TrackingManager.callTrackingHandler - component: %0, instanceName: %1 , dataString: %2",e,c,g);var b=e.pid;var f=e.cl;var d=(new Date()).getTime();if(null==c){c=""}if(this.handlerTable[b]&&typeof this.handlerTable[b]=="function"){(this.handlerTable[b])(b,f,c,d,g)}else{if(this.callback&&typeof this.callback=="function"){if(this.callbackContext){this.callback.apply(this.callbackContext,[b,f,c,d,g])}else{(this.callback)(b,f,c,d,g)}}else{if("s7ComponentEvent" in window){s7ComponentEvent(b,f,c,d,g)}}}};s7sdk.TrackingManager.prototype.parseTrack=function(e,b){var c=e.split(",");if(c.length==1){if((c[0]).toLowerCase()=="all"){this.trackEvents=b?s7sdk.TrackingManager.AVAILABLE_EVENTS.concat():[];return}}if(b){this.trackEvents=[]}for(var d=0;d<c.length;d++){var g=c[d].toUpperCase();g=g.replace(/^[ \t]+/,"");g=g.replace(/[ \t]+$/,"");var f=this.AVAILABLE_EVENTS.indexOf(g);if(f!=-1){if(b){f=this.trackEvents.indexOf(g);if(f==-1){this.trackEvents.push(g)}}else{f=this.trackEvents.indexOf(g);if(f!=-1){this.trackEvents.splice(f,1)}}}}}};