/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.mouse.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(c)return;this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted)return b.preventDefault(),!0}return!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||!!b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.position.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),a.curCSS||(a.curCSS=a.css),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.accordion.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(c.disabled)return;a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(c.disabled)return;a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b=="active"&&this.activate(c),b=="icons"&&(this._destroyIcons(),c&&this._createIcons()),b=="disabled"&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(this.options.disabled||b.altKey||b.ctrlKey)return;var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0},resize:function(){var b=this.options,c;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?typeof b=="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(d.disabled)return;if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);this._toggle(g,e,f);return}var h=a(b.currentTarget||c),i=h[0]===this.active[0];d.active=d.collapsible&&i?!1:this.headers.index(h);if(this.running||!d.collapsible&&i)return;var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"));return},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(!g)return;return g._completed.apply(g,arguments)};g._trigger("changestart",null,g.data),g.running=c.size()===0?b.size():c.size();if(h.animated){var j={};h.collapsible&&e?j={toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:j={toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),a.extend(a.ui.accordion,{version:"1.8.23",animations:{slide:function(b,c){b=a.extend({easing:"swing",duration:300},b,c);if(!b.toHide.size()){b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);return}if(!b.toShow.size()){b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);return}var d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],i,j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){c.prop=="height"&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.autocomplete.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.dialog.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),i=(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i),k=(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),l=a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c=this,d,e;if(!1===c._trigger("beforeClose",b))return;return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d=this,e=d.options,f;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)},open:function(){if(this._isOpen)return;var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode!==a.ui.keyCode.TAB)return;var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),!1}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof b=="object"&&b!==null&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){if(a==="click")return;a in e?e[a](b):e.attr(a,b)}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var b=this,c=b.options,d=a(document),e;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e=c.height==="auto"?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g=typeof c=="string"?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],d=[0,0],e;if(b){if(typeof b=="string"||typeof b=="object"&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],c.length===1&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&typeof d=="string"&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b=this.options,c,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c);if(b.height==="auto")if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);c!=-1&&this.oldInstances.push(this.instances.splice(c,1)[0]),this.instances.length===0&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.slider.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&d.values.length!==2&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(d.range==="min"||d.range==="max"?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e=a(this).data("index.ui-slider-handle"),f,g,h,i;if(b.options.disabled)return;switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:d.preventDefault();if(!b._keySliding){b._keySliding=!0,a(this).addClass("ui-state-active"),f=b._start(d,e);if(f===!1)return}}i=b.options.step,b.options.values&&b.options.values.length?g=h=b.values(e):g=h=b.value();switch(d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options,d,e,f,g,h,i,j,k,l;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,i),j===!1?!1:(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0,!0))},_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return this.orientation==="horizontal"?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),this.orientation==="vertical"&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),this.options.values.length===2&&this.options.range===!0&&(b===0&&c>d||b===1&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(b,c){var d,e,f;if(arguments.length>1){this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);return}if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values,e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments);switch(b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b),b;c=this.options.values.slice();for(d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return Math.abs(c)*2>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,f,g={},h,i,j,k;this.options.values&&this.options.values.length?this.handles.each(function(b,i){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&(d.orientation==="horizontal"?(b===0&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(b===0&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),b===1&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g[d.orientation==="horizontal"?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),b==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),b==="max"&&this.orientation==="horizontal"&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),b==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),b==="max"&&this.orientation==="vertical"&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.23"})})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.tabs.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if(a=="selected"){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var g=a(c).attr("href"),h=g.split("#")[0],i;h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g);if(f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&g!=="#"){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return e.selected=a,!1}),typeof e.selected!="number"&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),typeof e.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):e.selected===null&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return d.lis.index(a)}))).sort(),a.inArray(e.selected,e.disabled)!=-1&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var g=0,h;h=this.lis[g];g++)a(h)[a.inArray(g,e.disabled)!=-1&&!a(h).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(e.event!=="mouseover"){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b,c){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;e.selected=d.anchors.index(this),d.abort();if(e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}e.cookie&&d._cookie(e.selected,e.cookie);if(g.length)f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this));else throw"jQuery UI Tabs: Mismatching fragment identifier.";a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a}),this._tabify(),this.anchors.length==1&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(a.inArray(b,c.disabled)==-1)return;return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this,c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){a=this._getIndex(a);if(a==-1)if(this.options.collapsible&&this.options.selected!=-1)a=this.options.selected;else return this;return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");this.abort();if(!f||this.element.queue("tabs").length!==0&&a.data(e,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(b).addClass("ui-state-processing");if(d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.23"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.core.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&b.length==3?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]}function d(b,d){var e;do{e=(a.curCSS||a.css)(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]]){var e=a.length;while(e--)c=a[e],typeof a[c]=="string"&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c])}else for(c in a)typeof a[c]=="string"&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(d==null||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){typeof b=="object"&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={});if(typeof c=="number"||a.fx.speeds[c])e=d,d=c,c={};return a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:typeof d=="number"?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||typeof b=="number"||a.fx.speeds[b]?!0:typeof b=="string"&&!a.effects[b]?!0:!1}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),m,n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),typeof g.attr("style")=="object"?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.23",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return b=="toggle"&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),b.css("position")=="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){var b,c=4;while(a<((b=Math.pow(2,--c))-1)/11);return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return a<.5?c(a*2)/2:c(a*-2+2)/-2+1}})}(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.bounce.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",g=b.options.distance||(j=="top"?c.outerHeight(!0)/3:c.outerWidth(!0)/3);e=="show"&&c.css("opacity",0).css(j,k=="pos"?-g:g),e=="hide"&&(g=g/(h*2)),e!="hide"&&h--;if(e=="show"){var l={opacity:1};l[j]=(k=="pos"?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g=g/2,h--}for(var m=0;m<h;m++){var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing),g=e=="hide"?g*2:g/2}if(e=="hide"){var l={opacity:0};l[j]=(k=="pos"?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},p={};n[j]=(k=="pos"?"-=":"+=")+g,p[j]=(k=="pos"?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.explode.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;var g=e.outerWidth(!0),h=e.outerHeight(!0);for(var i=0;i<c;i++)for(var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+(b.options.mode=="show"?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+(b.options.mode=="show"?(i-Math.floor(c/2))*(h/c):0),opacity:b.options.mode=="show"?0:1}).animate({left:f.left+j*(g/d)+(b.options.mode=="show"?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+(b.options.mode=="show"?0:(i-Math.floor(c/2))*(h/c)),opacity:b.options.mode=="show"?1:0},b.duration||500);setTimeout(function(){b.options.mode=="show"?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.fade.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.pulsate.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=(b.options.times||5)*2-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),(d=="hide"&&g||d=="show"&&!g)&&e--;for(var i=0;i<e;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){h==0&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.shake.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"left",g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j=f=="up"||f=="down"?"top":"left",k=f=="up"||f=="left"?"pos":"neg",l={},m={},n={};l[j]=(k=="pos"?"-=":"+=")+g,m[j]=(k=="pos"?"+=":"-=")+g*2,n[j]=(k=="pos"?"-=":"+=")+g*2,c.animate(l,i,b.options.easing);for(var p=1;p<h;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}})(jQuery);;/*! jQuery UI - v1.8.23 - 2012-08-15
* https://github.com/jquery/jquery-ui
* Includes: jquery.effects.slide.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */
(function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g=f=="up"||f=="down"?"top":"left",h=f=="up"||f=="left"?"pos":"neg",i=b.options.distance||(g=="top"?c.outerHeight(!0):c.outerWidth(!0));e=="show"&&c.css(g,h=="pos"?isNaN(i)?"-"+i:-i:i);var j={};j[g]=(e=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){e=="hide"&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}})(jQuery);;/*
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(b){b.support.touch="ontouchend" in document;if(!b.support.touch){return;}var c=b.ui.mouse.prototype,e=c._mouseInit,a;function d(g,h){if(g.originalEvent.touches.length>1){return;}g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);g.target.dispatchEvent(f);}c._touchStart=function(g){var f=this;if(a||!f._mouseCapture(g.originalEvent.changedTouches[0])){return;}a=true;f._touchMoved=false;d(g,"mouseover");d(g,"mousemove");d(g,"mousedown");};c._touchMove=function(f){if(!a){return;}this._touchMoved=true;d(f,"mousemove");};c._touchEnd=function(f){if(!a){return;}d(f,"mouseup");d(f,"mouseout");if(!this._touchMoved){d(f,"click");}a=false;};c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd"));e.call(f);};})(jQuery);(function(a){if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}}(function(e){var o="left",n="right",d="up",v="down",c="in",w="out",l="none",r="auto",k="swipe",s="pinch",x="tap",i="doubletap",b="longtap",A="horizontal",t="vertical",h="all",q=10,f="start",j="move",g="end",p="cancel",a="ontouchstart" in window,y="TouchSwipe";var m={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,triggerOnTouchEnd:true,triggerOnTouchLeave:false,allowPageScroll:"auto",fallbackToMouseEvents:true,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};e.fn.swipe=function(D){var C=e(this),B=C.data(y);if(B&&typeof D==="string"){if(B[D]){return B[D].apply(this,Array.prototype.slice.call(arguments,1))}else{e.error("Method "+D+" does not exist on jQuery.swipe")}}else{if(!B&&(typeof D==="object"||!D)){return u.apply(this,arguments)}}return C};e.fn.swipe.defaults=m;e.fn.swipe.phases={PHASE_START:f,PHASE_MOVE:j,PHASE_END:g,PHASE_CANCEL:p};e.fn.swipe.directions={LEFT:o,RIGHT:n,UP:d,DOWN:v,IN:c,OUT:w};e.fn.swipe.pageScroll={NONE:l,HORIZONTAL:A,VERTICAL:t,AUTO:r};e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:h};function u(B){if(B&&(B.allowPageScroll===undefined&&(B.swipe!==undefined||B.swipeStatus!==undefined))){B.allowPageScroll=l}if(B.click!==undefined&&B.tap===undefined){B.tap=B.click}if(!B){B={}}B=e.extend({},e.fn.swipe.defaults,B);return this.each(function(){var D=e(this);var C=D.data(y);if(!C){C=new z(this,B);D.data(y,C)}})}function z(a0,aq){var av=(a||!aq.fallbackToMouseEvents),G=av?"touchstart":"mousedown",au=av?"touchmove":"mousemove",R=av?"touchend":"mouseup",P=av?null:"mouseleave",az="touchcancel";var ac=0,aL=null,Y=0,aX=0,aV=0,D=1,am=0,aF=0,J=null;var aN=e(a0);var W="start";var T=0;var aM=null;var Q=0,aY=0,a1=0,aa=0,K=0;var aS=null;try{aN.bind(G,aJ);aN.bind(az,a5)}catch(ag){e.error("events not supported "+G+","+az+" on jQuery.swipe")}this.enable=function(){aN.bind(G,aJ);aN.bind(az,a5);return aN};this.disable=function(){aG();return aN};this.destroy=function(){aG();aN.data(y,null);return aN};this.option=function(a8,a7){if(aq[a8]!==undefined){if(a7===undefined){return aq[a8]}else{aq[a8]=a7}}else{e.error("Option "+a8+" does not exist on jQuery.swipe.options")}return null};function aJ(a9){if(ax()){return}if(e(a9.target).closest(aq.excludedElements,aN).length>0){return}var ba=a9.originalEvent?a9.originalEvent:a9;var a8,a7=a?ba.touches[0]:ba;W=f;if(a){T=ba.touches.length}else{a9.preventDefault()}ac=0;aL=null;aF=null;Y=0;aX=0;aV=0;D=1;am=0;aM=af();J=X();O();if(!a||(T===aq.fingers||aq.fingers===h)||aT()){ae(0,a7);Q=ao();if(T==2){ae(1,ba.touches[1]);aX=aV=ap(aM[0].start,aM[1].start)}if(aq.swipeStatus||aq.pinchStatus){a8=L(ba,W)}}else{a8=false}if(a8===false){W=p;L(ba,W);return a8}else{ak(true)}return null}function aZ(ba){var bd=ba.originalEvent?ba.originalEvent:ba;if(W===g||W===p||ai()){return}var a9,a8=a?bd.touches[0]:bd;var bb=aD(a8);aY=ao();if(a){T=bd.touches.length}W=j;if(T==2){if(aX==0){ae(1,bd.touches[1]);aX=aV=ap(aM[0].start,aM[1].start)}else{aD(bd.touches[1]);aV=ap(aM[0].end,aM[1].end);aF=an(aM[0].end,aM[1].end)}D=a3(aX,aV);am=Math.abs(aX-aV)}if((T===aq.fingers||aq.fingers===h)||!a||aT()){aL=aH(bb.start,bb.end);ah(ba,aL);ac=aO(bb.start,bb.end);Y=aI();aE(aL,ac);if(aq.swipeStatus||aq.pinchStatus){a9=L(bd,W)}if(!aq.triggerOnTouchEnd||aq.triggerOnTouchLeave){var a7=true;if(aq.triggerOnTouchLeave){var bc=aU(this);a7=B(bb.end,bc)}if(!aq.triggerOnTouchEnd&&a7){W=ay(j)}else{if(aq.triggerOnTouchLeave&&!a7){W=ay(g)}}if(W==p||W==g){L(bd,W)}}}else{W=p;L(bd,W)}if(a9===false){W=p;L(bd,W)}}function I(a7){var a8=a7.originalEvent;if(a){if(a8.touches.length>0){C();return true}}if(ai()){T=aa}a7.preventDefault();aY=ao();Y=aI();if(a6()){W=p;L(a8,W)}else{if(aq.triggerOnTouchEnd||(aq.triggerOnTouchEnd==false&&W===j)){W=g;L(a8,W)}else{if(!aq.triggerOnTouchEnd&&a2()){W=g;aB(a8,W,x)}else{if(W===j){W=p;L(a8,W)}}}}ak(false);return null}function a5(){T=0;aY=0;Q=0;aX=0;aV=0;D=1;O();ak(false)}function H(a7){var a8=a7.originalEvent;if(aq.triggerOnTouchLeave){W=ay(g);L(a8,W)}}function aG(){aN.unbind(G,aJ);aN.unbind(az,a5);aN.unbind(au,aZ);aN.unbind(R,I);if(P){aN.unbind(P,H)}ak(false)}function ay(bb){var ba=bb;var a9=aw();var a8=aj();var a7=a6();if(!a9||a7){ba=p}else{if(a8&&bb==j&&(!aq.triggerOnTouchEnd||aq.triggerOnTouchLeave)){ba=g}else{if(!a8&&bb==g&&aq.triggerOnTouchLeave){ba=p}}}return ba}function L(a9,a7){var a8=undefined;if(F()||S()){a8=aB(a9,a7,k)}else{if((M()||aT())&&a8!==false){a8=aB(a9,a7,s)}}if(aC()&&a8!==false){a8=aB(a9,a7,i)}else{if(al()&&a8!==false){a8=aB(a9,a7,b)}else{if(ad()&&a8!==false){a8=aB(a9,a7,x)}}}if(a7===p){a5(a9)}if(a7===g){if(a){if(a9.touches.length==0){a5(a9)}}else{a5(a9)}}return a8}function aB(ba,a7,a9){var a8=undefined;if(a9==k){aN.trigger("swipeStatus",[a7,aL||null,ac||0,Y||0,T]);if(aq.swipeStatus){a8=aq.swipeStatus.call(aN,ba,a7,aL||null,ac||0,Y||0,T);if(a8===false){return false}}if(a7==g&&aR()){aN.trigger("swipe",[aL,ac,Y,T]);if(aq.swipe){a8=aq.swipe.call(aN,ba,aL,ac,Y,T);if(a8===false){return false}}switch(aL){case o:aN.trigger("swipeLeft",[aL,ac,Y,T]);if(aq.swipeLeft){a8=aq.swipeLeft.call(aN,ba,aL,ac,Y,T)}break;case n:aN.trigger("swipeRight",[aL,ac,Y,T]);if(aq.swipeRight){a8=aq.swipeRight.call(aN,ba,aL,ac,Y,T)}break;case d:aN.trigger("swipeUp",[aL,ac,Y,T]);if(aq.swipeUp){a8=aq.swipeUp.call(aN,ba,aL,ac,Y,T)}break;case v:aN.trigger("swipeDown",[aL,ac,Y,T]);if(aq.swipeDown){a8=aq.swipeDown.call(aN,ba,aL,ac,Y,T)}break}}}if(a9==s){aN.trigger("pinchStatus",[a7,aF||null,am||0,Y||0,T,D]);if(aq.pinchStatus){a8=aq.pinchStatus.call(aN,ba,a7,aF||null,am||0,Y||0,T,D);if(a8===false){return false}}if(a7==g&&a4()){switch(aF){case c:aN.trigger("pinchIn",[aF||null,am||0,Y||0,T,D]);if(aq.pinchIn){a8=aq.pinchIn.call(aN,ba,aF||null,am||0,Y||0,T,D)}break;case w:aN.trigger("pinchOut",[aF||null,am||0,Y||0,T,D]);if(aq.pinchOut){a8=aq.pinchOut.call(aN,ba,aF||null,am||0,Y||0,T,D)}break}}}if(a9==x){if(a7===p||a7===g){clearTimeout(aS);if(V()&&!E()){K=ao();aS=setTimeout(e.proxy(function(){K=null;aN.trigger("tap",[ba.target]);if(aq.tap){a8=aq.tap.call(aN,ba,ba.target)}},this),aq.doubleTapThreshold)}else{K=null;aN.trigger("tap",[ba.target]);if(aq.tap){a8=aq.tap.call(aN,ba,ba.target)}}}}else{if(a9==i){if(a7===p||a7===g){clearTimeout(aS);K=null;aN.trigger("doubletap",[ba.target]);if(aq.doubleTap){a8=aq.doubleTap.call(aN,ba,ba.target)}}}else{if(a9==b){if(a7===p||a7===g){clearTimeout(aS);K=null;aN.trigger("longtap",[ba.target]);if(aq.longTap){a8=aq.longTap.call(aN,ba,ba.target)}}}}}return a8}function aj(){var a7=true;if(aq.threshold!==null){a7=ac>=aq.threshold}return a7}function a6(){var a7=false;if(aq.cancelThreshold!==null&&aL!==null){a7=(aP(aL)-ac)>=aq.cancelThreshold}return a7}function ab(){if(aq.pinchThreshold!==null){return am>=aq.pinchThreshold}return true}function aw(){var a7;if(aq.maxTimeThreshold){if(Y>=aq.maxTimeThreshold){a7=false}else{a7=true}}else{a7=true}return a7}function ah(a7,a8){if(aq.allowPageScroll===l||aT()){a7.preventDefault()}else{var a9=aq.allowPageScroll===r;switch(a8){case o:if((aq.swipeLeft&&a9)||(!a9&&aq.allowPageScroll!=A)){a7.preventDefault()}break;case n:if((aq.swipeRight&&a9)||(!a9&&aq.allowPageScroll!=A)){a7.preventDefault()}break;case d:if((aq.swipeUp&&a9)||(!a9&&aq.allowPageScroll!=t)){a7.preventDefault()}break;case v:if((aq.swipeDown&&a9)||(!a9&&aq.allowPageScroll!=t)){a7.preventDefault()}break}}}function a4(){var a8=aK();var a7=U();var a9=ab();return a8&&a7&&a9}function aT(){return!!(aq.pinchStatus||aq.pinchIn||aq.pinchOut)}function M(){return!!(a4()&&aT())}function aR(){var ba=aw();var bc=aj();var a9=aK();var a7=U();var a8=a6();var bb=!a8&&a7&&a9&&bc&&ba;return bb}function S(){return!!(aq.swipe||aq.swipeStatus||aq.swipeLeft||aq.swipeRight||aq.swipeUp||aq.swipeDown)}function F(){return!!(aR()&&S())}function aK(){return((T===aq.fingers||aq.fingers===h)||!a)}function U(){return aM[0].end.x!==0}function a2(){return!!(aq.tap)}function V(){return!!(aq.doubleTap)}function aQ(){return!!(aq.longTap)}function N(){if(K==null){return false}var a7=ao();return(V()&&((a7-K)<=aq.doubleTapThreshold))}function E(){return N()}function at(){return((T===1||!a)&&(isNaN(ac)||ac===0))}function aW(){return((Y>aq.longTapThreshold)&&(ac<q))}function ad(){return!!(at()&&a2())}function aC(){return!!(N()&&V())}function al(){return!!(aW()&&aQ())}function C(){a1=ao();aa=event.touches.length+1}function O(){a1=0;aa=0}function ai(){var a7=false;if(a1){var a8=ao()-a1;if(a8<=aq.fingerReleaseThreshold){a7=true}}return a7}function ax(){return!!(aN.data(y+"_intouch")===true)}function ak(a7){if(a7===true){aN.bind(au,aZ);aN.bind(R,I);if(P){aN.bind(P,H)}}else{aN.unbind(au,aZ,false);aN.unbind(R,I,false);if(P){aN.unbind(P,H,false)}}aN.data(y+"_intouch",a7===true)}function ae(a8,a7){var a9=a7.identifier!==undefined?a7.identifier:0;aM[a8].identifier=a9;aM[a8].start.x=aM[a8].end.x=a7.pageX||a7.clientX;aM[a8].start.y=aM[a8].end.y=a7.pageY||a7.clientY;return aM[a8]}function aD(a7){var a9=a7.identifier!==undefined?a7.identifier:0;var a8=Z(a9);a8.end.x=a7.pageX||a7.clientX;a8.end.y=a7.pageY||a7.clientY;return a8}function Z(a8){for(var a7=0;a7<aM.length;a7++){if(aM[a7].identifier==a8){return aM[a7]}}}function af(){var a7=[];for(var a8=0;a8<=5;a8++){a7.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0})}return a7}function aE(a7,a8){a8=Math.max(a8,aP(a7));J[a7].distance=a8}function aP(a7){if(J[a7]){return J[a7].distance}return undefined}function X(){var a7={};a7[o]=ar(o);a7[n]=ar(n);a7[d]=ar(d);a7[v]=ar(v);return a7}function ar(a7){return{direction:a7,distance:0}}function aI(){return aY-Q}function ap(ba,a9){var a8=Math.abs(ba.x-a9.x);var a7=Math.abs(ba.y-a9.y);return Math.round(Math.sqrt(a8*a8+a7*a7))}function a3(a7,a8){var a9=(a8/a7)*1;return a9.toFixed(2)}function an(){if(D<1){return w}else{return c}}function aO(a8,a7){return Math.round(Math.sqrt(Math.pow(a7.x-a8.x,2)+Math.pow(a7.y-a8.y,2)))}function aA(ba,a8){var a7=ba.x-a8.x;var bc=a8.y-ba.y;var a9=Math.atan2(bc,a7);var bb=Math.round(a9*180/Math.PI);if(bb<0){bb=360-Math.abs(bb)}return bb}function aH(a8,a7){var a9=aA(a8,a7);if((a9<=45)&&(a9>=0)){return o}else{if((a9<=360)&&(a9>=315)){return o}else{if((a9>=135)&&(a9<=225)){return n}else{if((a9>45)&&(a9<135)){return v}else{return d}}}}}function ao(){var a7=new Date();return a7.getTime()}function aU(a7){a7=e(a7);var a9=a7.offset();var a8={left:a9.left,right:a9.left+a7.outerWidth(),top:a9.top,bottom:a9.top+a7.outerHeight()};return a8}function B(a7,a8){return(a7.x>a8.left&&a7.x<a8.right&&a7.y>a8.top&&a7.y<a8.bottom)}}}));function CookieJar(options){this.initialize(options);}
CookieJar.prototype={options:{},initialize:function(options){this.options={expires:3600,path:'',domain:'',secure:''};for(var prop in options||{})
this.options[prop]=options[prop];if(this.options.expires!=''){var date=new Date();date.setTime(date.getTime()+(this.options.expires*1000));this.options.expires='; expires='+date.toGMTString();}
if(this.options.path!='')
this.options.path='; path='+escape(this.options.path);if(this.options.domain!='')
this.options.domain='; domain='+escape(this.options.domain);if(this.options.secure=='secure')
this.options.secure='; secure';else
this.options.secure='';},put:function(name,value){var cookie=this.options;switch(typeof value){case'undefined':case'function':case'unknown':return false;case'boolean':case'string':case'number':value=String(value.toString());}
var cookie_str=name+"="+escape(value);try{document.cookie=cookie_str+cookie.expires+cookie.path+cookie.domain+cookie.secure;}catch(e){return false;}
return true;},remove:function(name){var cookie=this.options;try{var date=new Date();date.setTime(date.getTime()-(3600*1000));var expires='; expires='+date.toGMTString();document.cookie=name+"="+expires+cookie.path+cookie.domain+cookie.secure;}catch(e){return false;}
return true;},get:function(name){var cookies=document.cookie.match(name+'=(.*?)(;|$)');if(cookies)
return unescape(cookies[1]);else
return null;},empty:function(){var keys=this.getKeys();var size=keys.length;for(var i=0;i<size;i++)
this.remove(keys[i]);},getPack:function(){var pack={};var keys=this.getKeys();var size=keys.length;for(var i=0;i<size;i++)
pack[keys[i]]=this.get(keys[i]);return pack;},keyRe:/[^=; ]+(?=\=)/g,getKeys:function(){var keys=[];var str=document.cookie;while((match=this.keyRe.exec(str))!=undefined)
keys.push(match[0].replace(/^\s*|\s*$/g,''));return keys;}};Venda.Platform=function(){};Venda.Platform.getUrlParam=function(url,urlParam){var re=new RegExp('[?&]'+urlParam+'=([^&]+)');var match=url.match(re);return match?unescape(match[1]):false;};Venda.Platform.escapeHTML=function(strToEscape){var container=document.createElement('span');container.appendChild(document.createTextNode(strToEscape));return container.innerHTML;};Venda.Platform.SelectBoxToggle=function(selectBoxName,selectBoxValue,arrayToHide,arrayToShow,rSpeed){var spd=(typeof rSpeed==="undefined")?0:rSpeed;var hideFields=function(){if(this.value==selectBoxValue){for(var i=0;i<arrayToHide.length;i++){jQuery("#"+arrayToHide[i]+" > *").each(function(){if(this.type=='text'){this.value='';}
else if(this.type=='select-one'){jQuery("#"+this.id+" > *").each(function(){if(this.value==''){this.selected=true;}});}});jQuery("#"+arrayToHide[i]).hide(spd);}
for(var i=0;i<arrayToShow.length;i++){jQuery("#"+arrayToShow[i]).show(spd);}}
else{for(var i=0;i<arrayToShow.length;i++){jQuery("#"+arrayToShow[i]+" > *").each(function(){if(this.type=='text'){this.value='';}
else if(this.type=='select-one'){jQuery("#"+this.id+" > *").each(function(){if(this.value==''){this.selected=true;}});}});jQuery("#"+arrayToShow[i]).hide(spd);}
for(var i=0;i<arrayToHide.length;i++){jQuery("#"+arrayToHide[i]).show(spd);}}};jQuery("#"+selectBoxName).each(hideFields).bind('change',hideFields);};Venda.Platform.CookieJar=new CookieJar({expires:3600*24*7,path:'/'});jQuery.fn.extend({serializeToLatin1:function(){var pairs=this.serialize().split(/&/);return jQuery.map(pairs,function(pair,idx){var kv=pair.split('=');return[escape(decodeURIComponent(kv[0])),escape(decodeURIComponent(kv[1]))].join('=');}).join('&').replace(/%20/g,'+');}});!function(global){'use strict';function defineModule(Venda,$){var options,Atts;options={endpoint:{details:'/page/home?layout=minicart',addProduct:'#tag-codehttp',multiFormUrl:['bsref=shop&log=22&ex=co_disp-shopc&','mode=addmul&param1=bulk&param2=invt&layout=minicart&'],singleFormUrl:['bsref=shop&log=22&ex=co_disp-shopc&','mode=add&layout=minicart&']},node:{general:{wrapper:'.minicartDetailWrapper',details:'.basketholder'},dropdown:{attachedTo:'#basketSection',wrapper:'#basketSection .minicartDetailWrapper',header:'#basketSection #minicart-header',footer:'#basketSection #minicart-footer',content:'#basketSection #basketWrapper, #basketSection #minicart_empty',details:'#basketSection .basketholder'},offCanvas:{wrapper:'#js-canvas-content-right .minicartDetailWrapper'},addingToBasket:'.js-addingtobasket',buttonUp:'.buttonUp',buttonDown:'.buttonDown',form:'#addproductform',totalItems:'#basketSection .js-updateItems',totalItemsTiny:'.js-canvas-right .js-updateTotalMini',totalItemsText:'.js-updateItemsText',totalPrice:'#basketSection .js-updateTotal',addProduct:'.js-addproduct',minicartHeaderText:'.minicart-header-text',productUpdate:'.productdetail-wrap',productUpdateMulti:'.productdetail-wrap',quantity:'select.js-qty',notify:'.js-oneProductContent #notify',notifyMobile:'.overlay-notify #notify',notifyTemplate:'#notifyTemplate',productName:'#tag-invtname',attStyles:'.js-attributesForm',labels:'#attributeNames'},device:util.checkDevice(),duration1:300,duration2:500,duration3:5000,duration4:10000,duration5:750,timer:null,isResponsive:true,showMinicartDetail:'hover',showAfterAddProd:false,showNotifications:true,appendNotify:false,highlight:true,scrollSpeed:10,autoload:false,animOpen:true,largeDeviceSmoothScroll:true};Atts=Venda.Attributes;var MinicartDetail={init:function(options){util.merge(this,options);this.minicartLoaded=false;this.pending=false;this.visible=false;this.productIds={};this.multiForm=false;this.multiFormType=false;this.multiTest=['productdetailSet','productset','productdetailMulti'];this.largeDevices=['standard','large','tablet'];this.checkboxes={};this.device=util.checkDevice();if(this.autoload&&this.showMinicartDetail!=='disabled'){this.loadMinicartHtml();}
return this;},loadMinicartHtml:function(highlight,update,callback){var _this,loader,$wrapper,loaded,uID,l,i,arr,att1,att2,att3,att4;_this=this;loaded=0;this.minicartLoaded=false;$('.js-minicart i.icon-shopping-cart').replaceWith('<i class="icon-spinner"></i>');loader=this.template('loader').join('');$wrapper=$(this.node.general.wrapper);if(this.device==='mobile'){$wrapper.empty().append(loader);}
$wrapper.load(this.endpoint.details,function(response,status,xhr){loaded++;_this.cacheProductIds();_this.minicartLoaded=true;_this.updateTotals(response);if(Venda.Attributes!=undefined){Venda.Attributes.minicartData=[];$wrapper.find('.hiddenfields').each(function(){Venda.Attributes.minicartData[$(this).find('input[name="hash"]').val()]=parseInt($(this).find('input[name="oioqty"]').val(),10);});$('.js-oneProduct').each(function(){uID=$(this).attr('id').substr(11);for(i=0,l=Atts.productArr.length;i<l;i++){arr=Atts.productArr[i];att1=arr.attSet.att1.selected;att2=arr.attSet.att2.selected;att3=arr.attSet.att3.selected;att4=arr.attSet.att4.selected;if(uID===arr.attSet.id){Venda.Attributes.SelectedValues(att1,att2,att3,att4,uID);}}});Venda.Attributes.Paint();}
if(loaded<2&&update&&_this.showAfterAddProd){_this.toggleVisibility();}
if(highlight&&_this.highlight){_this.highlightProduct(highlight);}
$('.js-minicart i.icon-spinner').replaceWith('<i class="icon-shopping-cart"></i>');if(callback&&status=='success'){callback();}});return this;},highlightProduct:function(id){var $el,position;$el=$(this.node.dropdown.details).find('li.minicart-'+id);$el.addClass('minicartHighlight');position=$el.position();if(this.showAfterAddProd){this.scrollMinicartDetails(null,position.top);}
return this;},cacheProductIds:function(){var $hidden,obj,i;obj={};$hidden=$(this.node.general.details).find('.hiddenfields');$hidden.each(function(){var hash,id;id=$(this).find('[name="line-id"]').val();hash=$(this).find('[name="hash"]').val();obj[hash]=id;});for(i in obj){if(obj.hasOwnProperty(i)){if(!this.productIds[i]){this.productIds[i]=obj[i];}}}
return this;},template:function(template){var obj;obj={alert:['<div id="notify" class="box box-section alertNotify">','<div class="box-header info">'+$('#tag-oops').text()+'</div>','<div class="js-closeAdded right"><a class="close-reveal-modal icon-close1"><span class="hidescreenreadersafe">Close</span></a></div>','<div class="box-body alert">','<div class="row nomarg">','<div class="notifydetails notifydetails-content large-24 columns nopad">','<div class="alertText">','#{alert}','</div>','</div>','</div>','</div>','</div>'],detailsLine:['<div class="text #{label}"><span class="bold #{label}"><span class="spacefr">#{label}</span>: </span><span class="value #{label}">#{select}</span></div>'],multicheckbox:['<label style="display: none;">','<input type="checkbox" id="checkAllProducts" /> #{text}','</label>'],loader:['<div class="canvas-loading text-center">','<img src="'+$('.js-minicart-loading-image').text()+'" alt="Loading..." /><br>','<span>'+$('.js-minicart-loading-text').text()+'</span>','</div>']};return obj[template];},toggleVisibility:function(){var isDesktop,_this,checkDevice,$cart;_this=this;checkDevice=util.checkDevice();this.device=(checkDevice===undefined)?'large':checkDevice;isDesktop=this.largeDevices.contains(this.device);if(parseInt(jQuery(".js-updateTotalMini").text())==0&&jQuery(".js-updateTotalMini").length){window.location=jQuery("#tag-codehttp").html()+'?ex=co_wizr-shopcart&log=22';return this;}
if(isDesktop){if(this.visible){this.toggleMinicart('close');}else{if(!this.minicartLoaded){$cart=$('#showcart i').attr('class');$('#showcart i').removeClass($cart).addClass("loading icon-bag");this.loadMinicartHtml(null,null,function(){_this.setPosition();_this.toggleMinicart('show');$('#showcart i').removeClass("loading icon-bag").addClass($cart);});}else{if(jQuery('#tag-invtivtype').text()=='shopthelook'){jQuery('html,body').animate({scrollTop:jQuery('body').offset().top},300);}
this.setPosition();this.toggleMinicart('show');}}}
return this;},prepareElements:function(){var elements,i,l;elements=Array.prototype.slice.call(arguments);for(i=0,l=elements.length;i<l;i++){elements[i].css({opacity:0,visibility:'visible'});}
return this;},showMinicart:function(){var $content,$footer,$wrapper,_this,height;_this=this;$wrapper=$(this.node.dropdown.wrapper).show();$footer=$(this.node.dropdown.footer);$content=$(this.node.dropdown.content);height=$footer.position().top+$footer.outerHeight();if(this.animOpen){this.prepareElements($wrapper);$wrapper.css({opacity:1.0});$wrapper.animate({height:height},this.duration1,function(){_this.setPosition('resize');_this.visible=true;_this.pending=false;});}else{$wrapper.css({visibility:'visible',height:height});this.setPosition('resize');this.visible=true;this.pending=false;$wrapper.css({opacity:1.0});}
return this;},hideMinicart:function(){var $content,$footer,$wrapper,_this;_this=this;$wrapper=$(this.node.dropdown.wrapper);$footer=$(this.node.dropdown.footer);$content=$(this.node.dropdown.content);if(this.animOpen){$wrapper.animate({height:0},this.duration1,function(){$wrapper.hide();_this.pending=false;_this.visible=false;});}else{$wrapper.hide();this.pending=false;this.visible=false;}
return this;},toggleMinicart:function(type){if(type==='show'){this.showMinicart();}
if(type==='close'){this.hideMinicart();}
return this;},setPosition:function(type){this.positionContent();this.positionFooter();this.positionMinicartDetail(type);this.toggleDirectionButtons();return this;},positionContent:function(){var $content,$header,detailsHeight,height,mainHeight,headerLowerPos;$content=$(this.node.dropdown.content);$header=$(this.node.dropdown.header);detailsHeight=$(this.node.dropdown.details).outerHeight()+10;mainHeight=$(window).height()-$(this.node.dropdown.attachedTo).outerHeight()-370;if(mainHeight>detailsHeight){height=(detailsHeight<120)?120:detailsHeight;;}else{height=(mainHeight<120)?120:mainHeight;}
headerLowerPos=$header.offset().top;$content.offset({top:headerLowerPos});$content.height(height);return this;},positionFooter:function(){var contentLowerPos,$content,$footer;$footer=$(this.node.dropdown.footer);$content=$(this.node.dropdown.content);contentLowerPos=$content.offset().top+$content.height()-26;$footer.offset({top:contentLowerPos});return this;},positionMinicartDetail:function(type){var $wrapper,$attachedTo,$footer,widthDiff;$wrapper=$(this.node.dropdown.wrapper);$attachedTo=$(this.node.dropdown.attachedTo);$footer=$(this.node.dropdown.footer);widthDiff=$wrapper.outerWidth()-$attachedTo.outerWidth()-1;$wrapper.css({top:$attachedTo.position().top+$attachedTo.height(),left:-widthDiff});if(type==='resize'){$wrapper.css({height:$footer.position().top+$footer.outerHeight()});}
if(type==='removed'){$wrapper.animate({height:$footer.position().top+$footer.outerHeight()},500);}
return this;},resetForm:function(){var $selects,text,$form;$form=$(this.node.form);text=$(this.node.attStyles).text();switch(text){case'dropdown':$selects=$form.find('select');$selects.each(function(){$(this).prop('selectedIndex',0)
.trigger('change')
.trigger('liszt:updated');});break;case'swatch':$selects=$form.find('select');break;case'halfswatch':break;}
return this;},enableButton:function(button,text,type){var $button;$button=$(button);if(type&&type==='anchor'){$button.html(text);}else{$button.val(text);}
$button.removeAttr('disabled');$button.removeClass('loading');$button.css({opacity:1});$button.find('i').remove();return this;},disableButton:function(button,text,type){var $button;$button=$(button);if(type&&type==='anchor'){$button.html(text);}else{$button.val(text);}
$button.append('<i class="small-loading"></i>');$button.attr('disabled','disabled');$button.addClass('loading');$button.css({opacity:0.5});return this;},bagAddProduct:function(ele){var isValid=this.validate();var $form=$(this.node.form);this.disableButton(ele,$('.js-updatingbasket').text(),'anchor');var serialisedForm=this.createSerialisedForm($form,false,$(ele));$.ajax({type:'POST',global:false,url:$(this.endpoint.addProduct).html(),data:serialisedForm})
.done(function(jqXHR,status,error){window.location=$('#tag-codehttp').text()+'?ex=co_wizr-shopcart&log=22';})
.error(function(jqXHR,status,error){console.log(error);});},addProduct:function(ele){var serialisedForm,$form,isValid,isAddSingle=$(ele).is('.js-addproduct-single');if(isAddSingle){isValid=true;}else{isValid=this.validate();}
if(isValid){$form=$(this.node.form);$form.find('input[name="layout"]').val('minicart');$form.find('input[name="ex"]').val('co_disp-shopc');if(isAddSingle&&$('.modal-load-url').text()==""){this.disableButton($(ele),$(this.node.addingToBasket).text(),'anchor');}else{this.disableButton($(this.node.addProduct),$(this.node.addingToBasket).text(),'anchor');}
this.removeNotify();serialisedForm=this.createSerialisedForm($form,isAddSingle,$(ele));$.ajax({type:'POST',global:false,url:$(this.endpoint.addProduct).html(),data:serialisedForm})
.done(this.processReturnedHTML.bind(this,$(ele)))
.error(function(jqXHR,status,error){console.log(error);});this.showMinicartDetail='hover';}
return this;},createSerialisedForm:function($form,isAddSingle,$addBtn){var serialisedForm,formType,$inputs,params,$addItem,$allprod,oixtfieldSet=[];formType=$('.js-attributesForm').attr('id');if(isAddSingle){params=[];$addItem=$addBtn.parents('.js-prodMulti');params.push('invt='+$addItem.find('#invtref').text());params.push('buy='+$addItem.find('#invtref').text());params.push('ivref='+$addItem.find('#invtref').text());params.push('qty='+$addItem.find('.js-qty').val());if(($addItem.find('[name="att1"]').val()||"")!=""){params.push('att1='+($addItem.find('[name="att1"]').val()||""));}
if(($addItem.find('[name="att2"]').val()||"")!=""){params.push('att2='+($addItem.find('[name="att2"]').val()||""));}
if(($addItem.find('[name="att3"]').val()||"")!=""){params.push('att3='+($addItem.find('[name="att3"]').val()||""));}
if(($addItem.find('[name="att4"]').val()||"")!=""){params.push('att4='+($addItem.find('[name="att4"]').val()||""));}
params.push($addItem.find('.oixtfield').attr('name')+'='+$addItem.find('.oixtfield').val());params.push($addItem.find('.oixtfield_price').attr('name')+'='+$addItem.find('.oixtfield_price').val());serialisedForm=this.endpoint.singleFormUrl.join('')+params.join('&');}else if(this.multiTest.contains(formType)){$allprod=$('.js-oneProduct.js-prodMulti');params=[];params.push('invt='+$('#addproductform').find('input[name="invt"]').val());$.each($allprod,function(i,e){$addItem=$(e);params.push('itemlist='+$addItem.find('#invtref').text());params.push('qtylist='+$addItem.find('[name="qtylist"]').val());if(($addItem.find('[name="att1"]').val()||"")!=""){params.push('att1list='+($addItem.find('[name="att1"]').val()||""));}else{params.push('att1list=');}
if(($addItem.find('[name="att2"]').val()||"")!=""){params.push('att2list='+($addItem.find('[name="att2"]').val()||""));}else{params.push('att2list=');}
if(($addItem.find('[name="att3"]').val()||"")!=""){params.push('att3list='+($addItem.find('[name="att3"]').val()||""));}else{params.push('att3list=');}
if(($addItem.find('[name="att4"]').val()||"")!=""){params.push('att4list='+($addItem.find('[name="att4"]').val()||""));}else{params.push('att4list=');}
oixtfieldSet.push($addItem.find('.oixtfield').attr('name')+'='+$addItem.find('.oixtfield').val());oixtfieldSet.push($addItem.find('.oixtfield_price').attr('name')+'='+$addItem.find('.oixtfield_price').val());});serialisedForm=this.endpoint.multiFormUrl.join('')+params.join('&')+'&'+oixtfieldSet.join('&');}else{serialisedForm=$form.serializeToLatin1();}
return serialisedForm;},processReturnedHTML:function($btn,html){this.hideMinicart();var highlight,hasAlert,addToBasketText,$form=$(this.node.form),attsFormId=$('.js-attributesForm').attr('id'),_this=this;hasAlert=$(html).find('.alert-box').length>0?true:false;if(this.showMinicartDetail!=='disabled'){highlight=Atts.dataObj.atrsku;if(!$btn.is('.js-addproduct-single')&&$('.productdetail-wrap.shop-the-look').length>0){this.loadMinicartHtml(highlight,true,function(){_this.toggleVisibility();});}else{this.loadMinicartHtml(highlight,true);}
this.updateTotals(html);$('body').trigger('minicart-items-added');}
if($btn.is('.js-addproduct-single')){this.processNotifications(html,$form,$btn);if($('.modal-load-url').text()!=""){addToBasketText=$('.js-updatingbasket').text();this.disableButton($btn,addToBasketText,'anchor');}
else{addToBasketText=$('.js-addtobasket-single').text();this.enableButton($btn,addToBasketText,'anchor');}
$form.find('input[name="layout"]').val('');$form.find('input[name="ex"]').val('co_wizr-shopcart');$('#js-aria')
.attr('role','alert')
.attr('aria-live','assertive')
.hide()
.show();$('#js-aria-viewbasket').focus();}else{if(attsFormId!=="productdetailSet"){this.processNotifications(html,$form,$btn);}else{if(Modernizr.mq('only all and (max-width: 767px)')){this.processNotifications(html,$form,$btn);}}
if(jQuery('#tag-invtivtype').text()=='shopthelook'){addToBasketText=$('.js-addtobasket-multi').text();}else{addToBasketText=$('.js-addtobasket').text();}
this.enableButton($(this.node.addProduct),addToBasketText,'anchor');$form.find('input[name="layout"]').val('');$form.find('input[name="ex"]').val('co_wizr-shopcart');$('#js-aria')
.attr('role','alert')
.attr('aria-live','assertive')
.hide()
.show();$('#js-aria-viewbasket').focus();}
return this;},updateTotals:function(html){var $html,obj;obj={};$html=$(html);if($html.length>0){obj.totalItems=$html.find('.js-updateItems').text();obj.totalItemsTiny=$html.find('.js-updateTotalMini').text();obj.totalItemsText=$html.find('.js-updateItemsText').text();obj.totalPrice=$html.find('.js-updateTotal').text();$(this.node.totalItems).text(obj.totalItems);$(this.node.totalItemsTiny).text(obj.totalItems);$(this.node.totalItemsText).text(obj.totalItemsText);$(this.node.totalPrice).text(obj.totalPrice);}
return this;},processNotifications:function(html,$form,$btn){var _this,$html,$alert,templateObject,hasAlert,attsFormId,nodeNotify;_this=this;$html=$(html);attsFormId=$('.js-attributesForm').attr('id');$alert=$html.find('.alert-box[data-alert]');hasAlert=$alert.length>0?true:false;this.device=util.checkDevice();nodeNotify=(this.device==='mobile')?this.node.notifyMobile:this.node.notify;if(this.showNotifications){if(hasAlert){templateObject={alert:$alert.html()};this.showNotify(templateObject,'alert',$btn);}else{if(this.multiForm||attsFormId==='productdetailMulti'){if(attsFormId==="productdetailSet"){templateObject=this.createProductNotify($btn.parents('.js-prodMulti'));templateObject.text='';}else{templateObject={text:'Items added to your bag.'};}}else{templateObject=this.createProductNotify($form);}
this.showNotify(templateObject,'default',$btn);}}
this.clearTimeoutTrigger(this.timer);this.timeoutTrigger();$(nodeNotify).on('mouseleave',function(e){_this.timeoutTrigger();});$(nodeNotify).on('mouseover',function(e){_this.clearTimeoutTrigger(_this.timer);});return this;},getLabels:function(){var labels;labels=[];$(this.node.labels).find('div').each(function(){var text;text=$(this).text();if(text){labels.push(text);}});return labels;},createProductNotify:function($form){var product,quantity,details,attribute,attr,labels,obj,$choice,select,label,i,l,o,template;product=$(this.node.productName).text();quantity=$form.find(this.node.quantity).val();labels=this.getLabels();if($form.find('#attributeNames').length>0){template=this.template('detailsLine');details='';for(i=labels.length-1;i>=0;i--){attr=i+1;attribute='[name="att'+attr+'"]';if(attr!='3'){if(attribute&&attribute.length>0){$choice=$form.find(attribute);select=$choice.val();label=labels[i];o={label:label,select:select};details+=util.applyTemplate(template,o);}}}
if(labels.length>0){details=details;}
obj={quantity:quantity,product:product,details:details};}else{obj={quantity:quantity,product:product};}
return obj;},removeNotify:function(){var _this,node;_this=this;this.device=util.checkDevice();node=(this.device==='mobile')?this.node.notifyMobile:this.node.notify;$(node).fadeOut('slow',function(){if(_this.device==='mobile'){$('#notify').hide();$('.overlay-notify').hide();}else{$(node).remove();}});return this;},showNotify:function(templateObject,type,$btn){var html,template,attachedTo,node,$template,attsFormId,isAtBottom,$form,position;if(type==='default'){$template=$(this.node.notifyTemplate);$form=$('.js-attributesForm');attsFormId=$form.attr('id');if(!this.multiForm&&attsFormId!=='productdetailMulti'){$template.find('#js-notify-text').empty();}
template=$template.html();}else{template=this.template(type);}
if($(".modal-load-url").text()==""&&$(".quickViewModal").length==0){html=util.applyTemplate(template,templateObject);node=this.node;isAtBottom=type!=='alert'||this.multiForm||attsFormId==='productdetailMulti';attachedTo=this.multiForm?node.productUpdateMulti:node.productUpdate;if(jQuery('.overlay-notify').length>0){jQuery('.overlay-notify').empty();if(this.appendNotify||this.multiForm){$(html).appendTo($('.overlay-notify'));}else{$(html).appendTo($('.overlay-notify'));}
if(isAtBottom==false){jQuery('.overlay-notify .js-closeAdded').html('X');}
jQuery('.overlay-notify').show();}else{$(html).appendTo($btn.parents('.js-oneProductContent'));}
if($btn.is('.js-addproduct-single')){if($btn.parents('.js-prodMulti').find('#attributeNames').length==1){Venda.Ebiz.addImage($btn.parents('.js-prodMulti').attr('id').substr(11));}else{Venda.Ebiz.addNormalIem($btn.parents('.js-prodMulti').attr('id').substr(11));}}else{if((jQuery('.js-attributesForm').attr('id')||"productdetail")==="productdetailSet"){}else{if(jQuery('.js-attributesForm').length==1){Venda.Ebiz.addImage($('.js-oneProduct').attr('id').substr(11));}else{Venda.Ebiz.addNormalIem($('.js-oneProduct').attr('id').substr(11));}}}}
Venda.Ebiz.fixEuroSign();Venda.Ebiz.fixProdName();return this;},toggleDirectionButtons:function(){var $content,position,height,scrollHeight,$up,$down,totalItems;$content=$(this.node.dropdown.content);$up=$(this.node.buttonUp);$down=$(this.node.buttonDown);position=$content.scrollTop();scrollHeight=$content[0].scrollHeight;height=$content.outerHeight();totalItems=parseInt($(this.node.totalItems).html(),10);if(totalItems>0){$up.removeClass('off').addClass('on');$down.removeClass('off').addClass('on');if(position<=0){$up.removeClass('active').addClass('inactive');this.scrollStop();}
if(position>0){$up.removeClass('inactive').addClass('active');}
if(position>=scrollHeight-height){$down.removeClass('active').addClass('inactive');this.scrollStop();}
if(position<scrollHeight-height){$down.removeClass('inactive').addClass('active');}}else{$up.removeClass('on').addClass('off');$down.removeClass('on').addClass('off');}
return this;},scrollMinicartDetails:function(direction,highlightPos){var pos,$wrapper,speed;$wrapper=$(this.node.dropdown.content);pos=$wrapper.scrollTop();if(direction){speed=this.scrollSpeed;$wrapper.scrollTop(direction==='up'?pos-speed:pos+speed);}else{$wrapper.scrollTop(highlightPos);}
this.setPosition();return this;},scrollStart:function(direction){var _this;_this=this;if(['mobile','tablet'].contains(this.device)||!this.largeDeviceSmoothScroll){this.scrollMinicartDetails(direction);}else{(function scroller(){_this.scrollMinicartDetails(direction);_this.scrollInterval=setTimeout(scroller,100);}());}
return this;},scrollStop:function(){if(this.largeDeviceSmoothScroll){clearTimeout(this.scrollInterval);}
return this;},populateProductIds:function(){var $hidden,_this;_this=this;$hidden=$(this.node.general.details).find('.hiddenfields');$hidden.each(function(){var hash,id,$this,$input;$this=$(this);id=$this.find('[name="line-id"]').val();hash=$this.find('[name="hash"]').val();if(_this.productIds[hash]){$input=$this.find('input');$input.each(function(){var name,value,regex,$this;$this=$(this);name=$this.attr('name');value=$this.attr('value');regex=new RegExp('\\*|'+id,'g');$this.attr('name',name.replace(regex,_this.productIds[hash]));$this.attr('value',value.replace(regex,_this.productIds[hash]));});}});return this;},createItemRemovalForm:function(el,callback){var $hidden,$normal,$dataline,numberStart,quantity,i,l,lineid,$form,template;$form=$('<form id="deleteitem"></form>');$hidden=$(el).closest('.prod-details').find('.hiddenfields');$normal=$hidden.find('input.normal');$dataline=$hidden.find('input.dataline');$normal.appendTo($form);$dataline.appendTo($form);lineid=$normal.filter('[name="line-id"]').val();numberStart=parseInt($normal.filter('[name="numberstart"]').val(),10);quantity=parseInt($normal.filter('[name="quantity"]').val(),10);template='<input name="oirfnbr-id-#{lineid}" value="#{i}"/>';for(i=numberStart,l=numberStart+quantity;i<l;i++){template.replace('#{lineid}',lineid).replace('#{i}',i);$(template).appendTo($form);}
callback($form);},removeItem:function(el){var _this;_this=this;this.disableButton(el,'Removing','anchor');this.populateProductIds();setTimeout(function(){_this.createItemRemovalForm(el,function(form){$.ajax({type:'POST',async:false,url:'/bin/venda',data:form.serialize(),success:function(html){_this.loadMinicartHtml(null,null,function(){_this.setPosition('removed');_this.updateTotals(html);});}});});},10);return this;},checkMultipage:function(type){var check;check=this.multiTest.contains(type);this.multiFormType=type;if(check){this.multiForm=check;this.addCheckAllBox();this.initCheckboxes();this.toggleAllProducts(false);}
return this;},initCheckboxes:function(){$('.js-addToCheckBoxLabel').css('display','block');$('.js-addToCheckBox').each(function(){$(this).removeAttr('checked');});$('#checkAllProducts').removeAttr('checked');return this;},addCheckAllBox:function(){var text,label,template;text=$('#attributes-addAllProduct').text();template=this.template('multicheckbox');label=util.applyTemplate(template,{text:text});$('.js-buyControlsMulti').prepend(label);return this;},getCheckboxUid:function(el){var id,uid,type,$el;$el=$(el);id=$el.attr('id');type=this.multiFormType;if(type!=='productdetailMulti'){uid=$el.closest('.js-oneProduct').attr('id').substr(11);}else{uid=id;}
return{id:id,uid:uid};},enableCheckbox:function(el){var obj;obj=this.getCheckboxUid(el);this.checkboxes[obj.uid]=true;if(el){$(el).prop('checked',true);}else{$('.js-addToCheckBox').prop('checked',true);}
return this;},disableCheckbox:function(el){var obj;obj=this.getCheckboxUid(el);this.checkboxes[obj.uid]=false;if(el){$(el).prop('checked',false);}else{$('.js-addToCheckBox').prop('checked',false);}
return this;},checkCheckAllBox:function(){var prop,check;check=true;for(prop in this.checkboxes){if(this.checkboxes.hasOwnProperty(prop)){if(!this.checkboxes[prop]){check=false;}}}
if(check){$('#checkAllProducts').attr('checked',true);}else{$('#checkAllProducts').removeAttr('checked');}
return this;},itemsSelected:function(){var prop,check;check=false;for(prop in this.checkboxes){if(this.checkboxes.hasOwnProperty(prop)){if(this.checkboxes[prop]){check=true;}}}
return check;},toggleAllProducts:function(box){var $checkboxes,$box,_this,checked;_this=this;$checkboxes=$('input.js-addToCheckBox');if(!box){$checkboxes.each(function(){_this.disableCheckbox(this);});}else{$box=$(box);checked=$box.prop('checked');if(checked){$checkboxes.attr('checked',true);$checkboxes.each(function(){_this.enableCheckbox(this);});}else{$checkboxes.prop('checked',false);$checkboxes.each(function(){_this.disableCheckbox(this);});}}
return this;},validateRoutine:function(uID){var i,l,arr,att1,att2,att3,att4,isValid;if(this.multiFormType!=='productdetailMulti'){isValid=false;if(Atts.productArr.length>0){switch(this.multiFormType){case'productdetail':case'quickBuyFast':case'quickBuyDetails':case'productdetailSet':case'productset':case'quickShop':for(i=0,l=Atts.productArr.length;i<l;i++){arr=Atts.productArr[i];att1=arr.attSet.att1.selected;att2=arr.attSet.att2.selected;att3=arr.attSet.att3.selected;att4=arr.attSet.att4.selected;if(uID===arr.attSet.id){if(Atts.IsAllSelected(att1,att2,att3,att4,uID)){switch(Atts.Get('stockstatus')){case'Out of stock':alert($('#attributes-stockOut').text());isValid=false;break;case'Not Available':alert($('#attributes-stockNA').text());isValid=false;break;default:isValid=true;break;}}}}
break;}}}else{isValid=true;}
return isValid;},validate:function(){var _this,arr,uID;_this=this;arr=[];if(!$('#addproductform').valid()){return false;}
if($('.js-attributesForm').length===0){return true;}
$('.js-oneProduct').each(function(){uID=$(this).attr('id').substr(11);arr.push(_this.validateRoutine(uID));});if(arr.contains(false)){return false;}
return true;},validateSingle:function($this){var _this,arr,uID;_this=this;arr=[];$this.parents('.js-oneProduct').each(function(){uID=$(this).attr('id').substr(11);arr.push(_this.validateRoutine(uID));});if(arr.contains(false)){return false;}
return true;},updateDisplay:function(){var isDesktop;this.device=util.checkDevice();isDesktop=this.largeDevices.contains(this.device);if(isDesktop){this.setPosition('resize');$(this.node.el).fadeIn(this.duration1);}else{$(this.node.el).fadeOut(this.duration1);}},hoverBasketSection:function(){var _this=this,_item=$('#showcart #updateItems');if(_item.length&&parseInt(_item.text())!==0){if(this.showMinicartDetail==='hover'){if(this.visible&&!this.pending){clearTimeout(this.timerout);}
if(!this.visible&&!this.pending){this.pending=true;this.timerin=setTimeout(function(){_this.toggleVisibility();},this.duration1);}}}},unhoverBasketSection:function(){var _this=this;if(this.pending){clearTimeout(this.timerin);this.pending=!this.pending;}else{this.timerout=setTimeout(function(){if(_this.visible&&!_this.pending&&_this.showMinicartDetail==='hover'){_this.pending=true;_this.toggleVisibility();}},this.duration4);}},revealAPI:function(){return{minicartLoaded:this.minicartLoaded,loadMinicartHtml:this.loadMinicartHtml.bind(this),checkMultipage:this.checkMultipage.bind(this)};},lookButton:function(){var checkAll=true;jQuery('.js-oneProduct.js-prodMulti').each(function(){var $this=$(this),qty=parseInt($this.find('.js-qty').val()),$att1=$this.find("[name=att1]"),$att2=$this.find("[name=att2]"),$att3=$this.find("[name=att3]"),$att4=$this.find("[name=att4]"),addCheckBox=$this.find(".js-addToCheckBox").is(':checked'),checkSingle=true,prodname=$this.find('.prod-name').text();if($this.find('.info-webapproved').length!==0){checkAll=false;}
if(!addCheckBox){checkSingle=false;}
if(qty<1){checkAll=false;checkSingle=false;}
if($att1&&$att1.val()===""){checkAll=false;checkSingle=false;}
if($att2&&$att2.val()===""){checkAll=false;checkSingle=false;}
if($att3&&$att3.val()===""){checkAll=false;checkSingle=false;}
if($att4&&$att4.val()===""){checkAll=false;checkSingle=false;}
if(checkSingle&&!$this.find('.js-addproduct-single').is('.reached-limit')){$this.find('.js-addproduct-single').prop('disabled',false).removeClass('disabled');}else{checkAll=false;$this.find('.js-addproduct-single').prop('disabled',true).addClass('disabled');}});if(checkAll){jQuery('.js-addproduct').prop('disabled',false).removeClass('disabled');}else{jQuery('.js-addproduct').prop('disabled',true).addClass('disabled');}},timeoutTrigger:function(){MinicartDetail.timer=setTimeout(function(){MinicartDetail.removeNotify();},this.duration3);},clearTimeoutTrigger:function(){window.clearTimeout(MinicartDetail.timer);},validateReachedOrderLimit:function(self){var _this,arr,uID,$parent;_this=this;arr=[];if($(self).is('.add-all-item')){$('.js-oneProduct').each(function(){uID=$(this).attr('id').substr(11);arr.push(_this.reachedOrderLimitNotify(uID,$(this)));});}else{$parent=($('.js-prodMulti').length>0)?$(self).parents('.js-oneProduct'):$(self).parents('#addproductform');uID=$(self).parents('.js-oneProduct').attr('id').substr(11);arr.push(_this.reachedOrderLimitNotify(uID,$parent));}
if(arr.contains(false)){return false;}
return true;},reachedOrderLimitNotify:function(uID,$parent){var att1=$parent.find('[name=att1]').val()||'',att2=$parent.find('[name=att2]').val()||'',att3=$parent.find('[name=att3]').val()||'',att4=$parent.find('[name=att4]').val()||'',atrData=Venda.Attributes.GetAll(att1,att2,att3,att4,'all',uID),attronhandvalue=atrData.atronhand-(Venda.Attributes.Settings.lowStockThreshold),attrskuvalue=atrData.atrsku,onBasket=Venda.Attributes.minicartData[attrskuvalue]||0,maxorder=parseInt($parent.find('#invt-maxorder').text(),10)||5,netMaxorder=(attronhandvalue>maxorder)?maxorder:attronhandvalue;if(netMaxorder-onBasket<=0){$('#oneProduct_'+uID+' .js-attrFeedback #productstatus')
.show()
.html($('#attributes-onhand-limit-reach').text())
.removeClass("js-Re-paint-out")
.addClass("js-Re-paint");$('#oneProduct_'+uID+' .js-attrFeedback #productselected').hide();$('#oneProduct_'+uID+' .js-attrFeedback #stockstatus').hide();$('#oneProduct_'+uID).find('.js-addproduct-single, .js-addproduct').prop('disabled',true).addClass('disabled reached-limit');if($('.js-prodMulti').length>0){$('.add-all-item').prop('disabled',true).addClass('disabled reached-limit');}
return false;}
return true;}};$(window).on('load',function(){$('.js-minicart a').on('click');$(this).bind('resize',function(){if(MinicartDetail.visible){MinicartDetail.updateDisplay();}});});jQuery(document).on('fetch-minicart',function(){var $wrapper=$(MinicartDetail.node.general.wrapper);if(!Venda.Attributes.minicartData){$wrapper.load(MinicartDetail.endpoint.details,function(response,status,xhr){Venda.Attributes.minicartData=[];$('#minicart_products').find('.hiddenfields').each(function(){Venda.Attributes.minicartData[$(this).find('input[name="hash"]').val()]=parseInt($(this).find('input[name="oioqty"]').val(),10);});$('.js-oneProduct').each(function(){var uID=$(this).attr('id').substr(11),i,l,arr,att1,att2,att3,att4;for(i=0,l=Atts.productArr.length;i<l;i++){arr=Atts.productArr[i];att1=arr.attSet.att1.selected;att2=arr.attSet.att2.selected;att3=arr.attSet.att3.selected;att4=arr.attSet.att4.selected;if(uID===arr.attSet.id){Venda.Attributes.SelectedValues(att1,att2,att3,att4,uID);}}});Venda.Attributes.Paint();if($('.js-prodMulti').length>0){MinicartDetail.lookButton();}});}});$(document).ready(function(){$('.js-minicart a').off('click');var formType;formType=$('.js-attributesForm').attr('id');MinicartDetail.checkMultipage(formType);$(document)
.on('touchstart','.buttonUp',function(){MinicartDetail.scrollStart('up');})
.on('touchstart','.buttonDown',function(){MinicartDetail.scrollStart('down');})
.on('touchend','.buttonDown, .buttonUp',function(){MinicartDetail.scrollStop();})
.on('mousedown','.buttonUp',function(){MinicartDetail.scrollStart('up');})
.on('mousedown','.buttonDown',function(){MinicartDetail.scrollStart('down');})
.on('mouseup','.buttonDown, .buttonUp',function(){MinicartDetail.scrollStop();})
.on('click','.offCanvasRightMenu .js-offCanvasClose',function(){MinicartDetail.toggleVisibility();})
.on('click','.js-closeAdded',function(){MinicartDetail.removeNotify();})
.on('click','.js-closeMinicart',function(){MinicartDetail.toggleVisibility();})
.on('click','#continue',function(){MinicartDetail.removeNotify();MinicartDetail.resetForm();});if(Modernizr.touch){$('#basketSection').on('touchstart',function(e){if(!MinicartDetail.visible){e.preventDefault();MinicartDetail.toggleVisibility();setTimeout(function(){MinicartDetail.unhoverBasketSection();},5000);}else{return true;}});}else{$('#basketSection').click(function(e){if(MinicartDetail.showMinicartDetail==='click'){e.preventDefault();MinicartDetail.toggleVisibility();}else{return true;}});}
var minicartHoverTimer=false;$('#basketSection').hover(function(){MinicartDetail.hoverBasketSection();if(minicartHoverTimer){clearTimeout(minicartHoverTimer);}
minicartHoverTimer=setTimeout(function(){MinicartDetail.hideMinicart();},15000);},function(){});$(document).on('click',function(e){if($('#basketSection').length>0){var nodeInBasket=$.contains($('#basketSection')[0],e.target);if(!nodeInBasket&&MinicartDetail.visible&&MinicartDetail.showMinicartDetail==='click'){MinicartDetail.toggleVisibility();}}});$(document).on('keypress','#qty',function(e){if(e.which==='13'){$('.js-addproduct').trigger('click');return false;}});$(document).on('click','.js-bag-addproduct',function(e){var $productStatus;var formType=$('.js-attributesForm').attr('id');MinicartDetail.checkMultipage(formType);if(MinicartDetail.validate()){MinicartDetail.disableButton($(this),$('.js-updatingbasket').text(),'anchor');if($(this).is('.js-bag-addproduct')){e.preventDefault();var _this=this;if($('.modal-load-url').text()!=""){var line=Venda.Platform.getUrlParam($('.modal-load-url').text(),'delline');var wizard=Venda.Platform.getUrlParam($('.modal-load-url').text(),'wizard');var form=jQuery('form[name=shopcartform]');if(line!=false&&wizard!=false){jQuery("input[name='"+line+"']").val(1);jQuery("input[name='wizard']").val(wizard);var url=new Uri(jQuery(form).attr("action"));var param=jQuery(form).find("input, select, textarea").serialize();var loadURL=url+"?"+param+"&layout=noheaders";jQuery.get(loadURL,function(data){MinicartDetail.bagAddProduct(_this);});}}}}else{e.preventDefault();$productStatus=$('.js-stockFeedbackBox #productstatus');if($productStatus.length>0&&$productStatus.is(':visible')){$productStatus.effect('pulsate',{times:2},700);}
return false;}});$(document).on('click','.js-addproduct, .js-buynow',function(e){var $productStatus,isShopcart=((jQuery('#tag-curstep').text()||'')==='shopcart'),$parent=$(this).parents('#addproductform'),uID=$parent.find('.js-oneProduct').attr('id').substr(11);if(MinicartDetail.validate()){if($(this).is('.js-addproduct')){e.preventDefault();if(!isShopcart&&MinicartDetail.validateReachedOrderLimit(this)){MinicartDetail.addProduct(this);}}}else{e.preventDefault();$productStatus=$('.js-stockFeedbackBox #productstatus');if($productStatus.length>0&&$productStatus.is(':visible')){$productStatus.effect('pulsate',{times:2},700);}
return false;}});$(document).on('click','.js-addproduct-single',function(e){var $productStatus,isShopcart=((jQuery('#tag-curstep').text()||'')==='shopcart'),uID=$(this).parents('.js-oneProduct').attr('id').substr(11);e.preventDefault();if(MinicartDetail.validateSingle($(this))){if(!isShopcart&&MinicartDetail.validateReachedOrderLimit(this)){MinicartDetail.addProduct(this);}}});$(document).on('change','#addproductform select',function(){if($('#addproductform #notify').length>0){MinicartDetail.removeNotify();}
if($('.productdetail.shop-the-look').length>0){MinicartDetail.lookButton();}});$(document).on('click','#addproductform .js-attributeSwatch',function(){if($('#addproductform #notify').length>0){MinicartDetail.removeNotify();}});$('.minicartDetailWrapper').on('click','.js-removeItem',function(e){e.preventDefault();MinicartDetail.removeItem(this);});$(document).on('click','#checkAllProducts',function(){MinicartDetail.toggleAllProducts(this);});$(document).on('click','.js-addToCheckBox',function(){var checked;checked=$(this).prop('checked');if(checked){$(this).parents('.js-prodMulti').addClass('open');}else{$(this).parents('.js-prodMulti').removeClass('open');}
if($('.productdetail.shop-the-look').length>0){MinicartDetail.lookButton();}});if($('.productdetail.shop-the-look').length>0){MinicartDetail.lookButton();$('.js-addToCheckBox:first').click();}});return MinicartDetail.init(options).revealAPI();}
global.Venda=global.Venda||{};global.Venda.MinicartDetail=defineModule(global.Venda,global.jQuery);}(this);(function(Venda,$){var step,ord,items,user,srch,sess,load3DS;step=Venda.Widget.Tracking.Step();ord=Venda.Widget.Tracking.orderJSON;items=Venda.Widget.Tracking.orditemsArray;user=Venda.Widget.Tracking.Ses();srch=Venda.Widget.Tracking.Search();load3DS=false;if(step){dataLayer.push({'event':'pageURL','pageURL':step});}
if(typeof ord!=='undefined'){var i,gtmItems,atts,cat,pay;gtmItems=[];for(i=0;i<items.length;i++){atts=items[i].attributes,cat=items[i].category+=':';if(atts.att1!==''){cat+=' '+atts.att1;}
if(atts.att2!==''){cat+=' '+atts.att2;}
if(atts.att3!==''){cat+=' '+atts.att3;}
if(atts.att4!==''){cat+=' '+atts.att4;}
if(items[i].brand){cat+=' '+items[i].brand;}
cat+=' '+items[i].type;if(items[i].giftwrap!==''){cat+=' Gift Wrapped ('+items[i].giftwrap+')';}
var obj={'id':items[i].sku,'sku':items[i].sku,'name':items[i].name,'category':cat,'price':items[i].price,'discount':items[i].discount,'quantity':items[i].qty};gtmItems.push(obj);}
pay=ord.payment;switch(ord.payment){case'0':pay='Credit Card';break;case'5':pay='Manual Payment';break;case'8':pay='Free Order';break;case'12':pay='PayPal';break;default:pay='Payment Type'+pay;}
dataLayer.push({'event':'transaction','transactionId':ord.ref,'transactionAffiliation':ord.store,'transactionTotal':ord.total,'transactionTax':ord.tax,'transactionShipping':ord.shipping,'transactionDiscount':ord.discount,'transactionPaymentType':pay,'transactionCurrency':ord.currency,'transactionProducts':gtmItems});}
sess={'event':'updateUser','Language':user.lang,'Region':user.locn,'visitorGroup':user.group,'visitorId':user.usid,'visitorType':user.ustype};if(Modernizr.sessionstorage){var stored=sessionStorage.gtmSess;if(!stored){dataLayer.push(sess);sessionStorage.gtmSess=JSON.stringify(sess);}else{if(JSON.stringify(sess)!==stored){dataLayer.push(sess);sessionStorage.gtmSess=JSON.stringify(sess);}}}else{dataLayer.push(sess);}
$('#content-search').bind('search-loading-end',function(){dataLayer.push({'event':'sitesearch','siteSearchTerm':srch.term,'siteSearchResults':srch.results});});$(document).ajaxSend(function(event,xhr,settings){dataLayer.push({'event':'pageURL','pageURL':settings.url});});$('body').bind('minicart-items-added',function(){dataLayer.push({'event':'gaEvent','eventCategory':'Shopping','eventAction':'Add to Cart','eventLabel':$('#tag-invtname').text()});});$('body').bind('promotion-applied',function(){dataLayer.push({'event':'gaEvent','eventCategory':'Promotional code','eventAction':'Promotion applied','eventLabel':jQuery.trim(jQuery('#vcode').val())});});$('body').on('click','[data-trackNav] a',function(ev){var nav,category,label;nav=$(ev.target).closest('[data-trackNav]');category=nav.attr('data-trackNav');if(this.host!==window.location.host){label=this.href;}else{label=this.pathname;}
dataLayer.push({'event':'gaEvent','eventCategory':category,'eventAction':'Navigation','eventLabel':label});});$('body').on('click','[data-trackEvent]',function(ev){var btn,category,tag,label,action;btn=$(ev.target);category=btn.attr('data-trackEvent');tag=btn.prop('tagName');switch(tag){case'IMG':label=btn.attr('src');action='Image';break;case'A':label=btn.text();action='Link';break;case'INPUT':label=btn.val();action='Input';break;default:label=btn.attr('id');action=tag;}
dataLayer.push({'event':'gaEvent','eventCategory':category,'eventAction':action,'eventLabel':label});});$('#iframe').load(function(){if(!load3DS){load3DS=true;dataLayer.push({'event':'gaEvent','eventCategory':'3DSecure','eventAction':'load3DSecure','eventLabel':'iFrame Document'});}else{dataLayer.push({'event':'gaEvent','eventCategory':'3DSecure','eventAction':'bankResponse','eventLabel':'iFrame Document'});}});}(window.Venda||{},jQuery));Venda.namespace("Widget.createTab");Venda.Widget.createTab=function(ID,config){var defaults={activeIndex:0,className:"js-tabview",hideEmpty:true,callBack:function(){}};this.totalHide=0;this.options=jQuery.extend(defaults,config);this.tabID=ID;};Venda.Widget.createTab.prototype={options:{},totalHide:null,tabElement:null,tabNav:null,init:function(){jQuery(this.tabID).addClass(this.options.className);this.tabNav=jQuery(this.tabID).find(".js-tab-header > .js-tab-nav li a");this.tabElement=jQuery(this.tabID).find(".js-tab-content > .js-tab");if(this.options.hideEmpty){this.hideEmptyTab(this.tabID);}if(this.totalHide<this.getTotalTab()){this.setActiveTab(this.options.activeIndex);this.tabNav.bind("click",{scope:this},this.clickedTab);}else{jQuery(this.tabID).hide();}},hideEmptyTab:function(ID){var totalHide=0,txt="",tabID="";var activeTab=this.options.activeIndex;var setNewactiveTab=false;jQuery(ID).find(".js-tab-header > .js-tab-nav li").each(function(i){txt=jQuery(ID).find(".js-tab-content > .js-tab").eq(i).text();txt=jQuery.trim(txt);if(txt.length==0&&!jQuery(ID).find(".js-tab-content > .js-tab").eq(i).hasClass("tab-lmzone")){totalHide++;jQuery(ID).find(".js-tab-header > .js-tab-nav li").eq(i).hide();jQuery(ID).find(".js-tab-content > .js-tab").eq(i).hide();if(i==activeTab){setNewactiveTab=true;}}});if(setNewactiveTab){this.options.activeIndex=jQuery(ID).find(".js-tab-header > .js-tab-nav li:visible").index(ID+' .js-tab-header > .js-tab-nav li');this.setActiveTab(this.options.activeIndex);}this.totalHide=totalHide;},setActiveTab:function(index){this.tabNav.parent().removeClass("js-tab-active");this.tabElement.hide().removeClass("js-tab-active");this.tabNav.eq(index).parent().addClass("js-tab-active");this.tabElement.eq(index).addClass("js-tab-active").show();},getTotalTab:function(){return this.tabNav.length;},clickedTab:function(evt){if(!jQuery(this).parent().hasClass('js-ignoretab')){evt.preventDefault();var obj=evt.data.scope;obj.options.activeIndex=obj.tabNav.index(jQuery(this));obj.setActiveTab(obj.options.activeIndex);obj.options.callBack();}}};window.JSON||(window.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c=="number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if(typeof c.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},typeof c.init!="undefined"&&c.init()}(window),function(a,b){"use strict";var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if(typeof g.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");g.initHtml4=function(){if(typeof g.initHtml4.initialized!="undefined")return!1;g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var b=g.getHashByIndex(),c;return c=a===b,c},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return typeof a=="undefined"?b=g.savedHashes[g.savedHashes.length-1]:a<0?b=g.savedHashes[g.savedHashes.length+a]:b=g.savedHashes[a],b},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var d=g.getHashByState(a),e;return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var b=g.getHashByState(a),c;return c=g.discardedStates[b]||!1,c},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=function(){g.checkerFunction=null;var b="",d,e,h,i;return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null,i=null,j;return g.isLastHash(e)?(g.busy(!1),!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),j=g.discardedState(f),j?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(f!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")})},typeof g.init!="undefined"&&g.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined")throw new Error("History.js Core has already been loaded...");m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0)},m.initCore=function(){if(typeof m.initCore.initialized!="undefined")return!1;m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];if(typeof i=="object"&&typeof k!="undefined")try{i=k.stringify(i)}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0]);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1)a+=":"+d.location.port;return a+="/",a},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"}),c},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b=m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined")b=m.stateToId[c];else if(typeof m.store.stateToId[c]!="undefined")b=m.store.stateToId[c];else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined")break}m.stateToId[c]=b,m.idToState[b]=a}}return b},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object")a={};if(typeof a.normalized!="undefined")return a;if(!a.data||typeof a.data!="object")a.data={};b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash,c},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(a){return decodeURI(a)},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(a){var b=m.normalizeHash(a);return b=encodeURI(b),m.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),b},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){typeof a!="undefined"?m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(m.busy.flag)return;for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0)continue;d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay)}};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;if(!m.isLastSavedState(b))c=b;else return;return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;c<=a;++c)m.forward(b);else{if(!(a<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b))continue;a.idToState[b]=m.idToState[b]}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b))continue;a.urlToId[b]=m.urlToId[b]}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b))continue;a.stateToId[b]=m.stateToId[b]}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload));if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})}},m.init()}(window)
/*
 * Viewport - jQuery selectors for finding elements in viewport
 *
 * Copyright (c) 2008-2009 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *  http://www.appelsiini.net/projects/viewport
 *
 */;(function($){$.belowthefold=function(element,settings){var fold=$(window).height()+$(window).scrollTop();return fold<=$(element).offset().top-settings.threshold;};$.abovethetop=function(element,settings){var top=$(window).scrollTop();return top>=$(element).offset().top+$(element).height()-settings.threshold;};$.rightofscreen=function(element,settings){var fold=$(window).width()+$(window).scrollLeft();return fold<=$(element).offset().left-settings.threshold;};$.leftofscreen=function(element,settings){var left=$(window).scrollLeft();return left>=$(element).offset().left+$(element).width()-settings.threshold;};$.inviewport=function(element,settings){return!$.rightofscreen(element,settings)&&!$.leftofscreen(element,settings)&&!$.belowthefold(element,settings)&&!$.abovethetop(element,settings);};$.extend($.expr[':'],{"below-the-fold":function(a,i,m){return $.belowthefold(a,{threshold:0});},"above-the-top":function(a,i,m){return $.abovethetop(a,{threshold:0});},"left-of-screen":function(a,i,m){return $.leftofscreen(a,{threshold:0});},"right-of-screen":function(a,i,m){return $.rightofscreen(a,{threshold:0});},"in-viewport":function(a,i,m){return $.inviewport(a,{threshold:0});}});})(jQuery);var Query=function(a){"use strict";var b=function(a){var b=[],c,d,e,f;if(typeof a=="undefined"||a===null||a==="")return b;a.indexOf("?")===0&&(a=a.substring(1)),d=a.toString().split(/[&;]/);for(c=0;c<d.length;c++)e=d[c],f=e.split("="),b.push([f[0],f[1]]);return b},c=b(a),d=function(){var a="",b,d;for(b=0;b<c.length;b++)d=c[b],a.length>0&&(a+="&"),a+=d.join("=");return a.length>0?"?"+a:a},e=function(a){a=decodeURIComponent(a),a=a.replace("+"," ");return a},f=function(a){var b,d;for(d=0;d<c.length;d++){b=c[d];if(e(a)===e(b[0]))return b[1]}},g=function(a){var b=[],d,f;for(d=0;d<c.length;d++)f=c[d],e(a)===e(f[0])&&b.push(f[1]);return b},h=function(a,b){var d=[],f,g,h,i;for(f=0;f<c.length;f++)g=c[f],h=e(g[0])===e(a),i=e(g[1])===e(b),(arguments.length===1&&!h||arguments.length===2&&!h&&!i)&&d.push(g);c=d;return this},i=function(a,b,d){arguments.length===3&&d!==-1?(d=Math.min(d,c.length),c.splice(d,0,[a,b])):arguments.length>0&&c.push([a,b]);return this},j=function(a,b,d){var f=-1,g,j;if(arguments.length===3){for(g=0;g<c.length;g++){j=c[g];if(e(j[0])===e(a)&&decodeURIComponent(j[1])===e(d)){f=g;break}}h(a,d).addParam(a,b,f)}else{for(g=0;g<c.length;g++){j=c[g];if(e(j[0])===e(a)){f=g;break}}h(a),i(a,b,f)}return this};return{getParamValue:f,getParamValues:g,deleteParam:h,addParam:i,replaceParam:j,toString:d}},Uri=function(a){"use strict";var b=!1,c=function(a){var c={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},f=c[b?"strict":"loose"].exec(a),g={},h=14;while(h--)g[d[h]]=f[h]||"";g[e.name]={},g[d[12]].replace(e.parser,function(a,b,c){b&&(g[e.name][b]=c)});return g},d=c(a||""),e=new Query(d.query),f=function(a){typeof a!="undefined"&&(d.protocol=a);return d.protocol},g=null,h=function(a){typeof a!="undefined"&&(g=a);return g===null?d.source.indexOf("//")!==-1:g},i=function(a){typeof a!="undefined"&&(d.userInfo=a);return d.userInfo},j=function(a){typeof a!="undefined"&&(d.host=a);return d.host},k=function(a){typeof a!="undefined"&&(d.port=a);return d.port},l=function(a){typeof a!="undefined"&&(d.path=a);return d.path},m=function(a){typeof a!="undefined"&&(e=new Query(a));return e},n=function(a){typeof a!="undefined"&&(d.anchor=a);return d.anchor},o=function(a){f(a);return this},p=function(a){h(a);return this},q=function(a){i(a);return this},r=function(a){j(a);return this},s=function(a){k(a);return this},t=function(a){l(a);return this},u=function(a){m(a);return this},v=function(a){n(a);return this},w=function(a){return m().getParamValue(a)},x=function(a){return m().getParamValues(a)},y=function(a,b){arguments.length===2?m().deleteParam(a,b):m().deleteParam(a);return this},z=function(a,b,c){arguments.length===3?m().addParam(a,b,c):m().addParam(a,b);return this},A=function(a,b,c){arguments.length===3?m().replaceParam(a,b,c):m().replaceParam(a,b);return this},B=function(){var a="",b=function(a){return a!==null&&a!==""};b(f())?(a+=f(),f().indexOf(":")!==f().length-1&&(a+=":"),a+="//"):h()&&b(j())&&(a+="//"),b(i())&&b(j())&&(a+=i(),i().indexOf("@")!==i().length-1&&(a+="@")),b(j())&&(a+=j(),b(k())&&(a+=":"+k())),b(l())?a+=l():b(j())&&(b(m().toString())||b(n()))&&(a+="/"),b(m().toString())&&(m().toString().indexOf("?")!==0&&(a+="?"),a+=m().toString()),b(n())&&(n().indexOf("#")!==0&&(a+="#"),a+=n());return a},C=function(){return new Uri(B())};return{protocol:f,hasAuthorityPrefix:h,userInfo:i,host:j,port:k,path:l,query:m,anchor:n,setProtocol:o,setHasAuthorityPrefix:p,setUserInfo:q,setHost:r,setPort:s,setPath:t,setQuery:u,setAnchor:v,getQueryParamValue:w,getQueryParamValues:x,deleteQueryParam:y,addQueryParam:z,replaceQueryParam:A,toString:B,clone:C}},jsUri=Uri;Venda.namespace('Venda.Search');Venda.Search=function(options){this._searchLifo=[];jQuery.extend(this,{maxPagesCached:5,showViewAll:false,viewAllLimit:10,useHistory:true,features:[]},options);this.features.push('PriceSlider','MultiRefine','IndicateLoading','FilterRefinements','ViewStyleSwitcher','ColorSwatch','ViewMoreLess');};Venda.Search.start=function(options){new Venda.Search(options).initialise();};Venda.Search._decodeURI=function(u){return decodeURIComponent(u.replace(/\+/g,'%20'));};Venda.Search.fixRefinementUri=function(refine,chosen){var uri=new Uri(refine.url);if(chosen){var rem=uri.getQueryParamValues(refine.field);uri.deleteQueryParam(refine.field);jQuery.each(rem,function(i,f){if(Venda.Search._decodeURI(f)!=refine.facet)
uri.addQueryParam(refine.field,f);});}
return uri.toString();};Venda.Search.prototype={initialise:function(){if(this.useHistory)
History.init();this.setupSearchHandlers();this.setupDomHandlers();jQuery(window).bind('statechange',jQuery.proxy(this,'stateChangeHandler'));var state=History.getState();if(History.getHash().match(/&_suid=/)){var newState=jQuery.extend(state.data,{forceLoad:new Date});History.replaceState(newState,this.getDocumentTitle(),state.url);}else{jQuery('#content-search').trigger('search-loading-end',[{url:state.url}]);}},setupSearchHandlers:function(){jQuery('#content-search').bind('search-loading-end',jQuery.proxy(this,'showFeaturesHandler'));jQuery('#content-search').bind('search-navigate',jQuery.proxy(this,'updateHistoryHandler'));if(this.useHistory)
jQuery('#content-search').bind('search-navigate',jQuery.proxy(this,'moveResultsIntoViewHandler'));},setupDomHandlers:function(){var me=this;jQuery('#content-search').delegate('#sortby','change',this.getNavHandler());var refine=this.getNavHandler({resetPrice:true});jQuery('#content-search').delegate('#collate a.js-updatesearch, #term a.js-removesearch','click',refine);jQuery('#content-search').delegate('#collate input:checkbox','change',refine);var pagination=this.getNavHandler({pagination:true});jQuery('#content-search').delegate('.js-pagn a:not(.js-iconGrid, .js-iconImage, .js-iconList)','click',pagination);jQuery('#content-search').delegate('.js-pagn select','change',pagination);},validSearchUrl:function(url){var u=new Uri(url);return url&&u.path().match(new RegExp('/(icat/|search\\b)'));},getNavHandler:function(params){var self=this;return function navigationHandler(evt){var href=this.href||jQuery(this).val();if(!self.validSearchUrl(href))
return;jQuery('#content-search').trigger('search-navigate',[jQuery.extend(params||{},{url:href})]);return false;};},getDocumentTitle:function(uri){return window.document.title;},updateHistoryHandler:function(evt,params){var uri=new Uri(params.url);uri.setProtocol(window.location.protocol);if(!params.pagination)
uri.deleteQueryParam('setpagenum');if(params.resetPrice){uri.deleteQueryParam('minprice');uri.deleteQueryParam('maxprice');}
var uriStr=uri.toString();if(this.useHistory)
History.pushState({realUri:uriStr},this.getDocumentTitle(),uriStr);else
window.location.href=uriStr;},moveResultsIntoViewHandler:function(){if(jQuery('#content-top:in-viewport').is('a'))
return;jQuery('html, body').animate({scrollTop:jQuery("#content-search").offset().top});},showFeaturesHandler:function(){jQuery.each(this.features,function(idx,f){var feature=typeof f==='string'?Venda.Search.Feature[f]:f;if(!feature)return;var featureObj=new feature();if(featureObj.display)featureObj.display();});},stateChangeHandler:function(evt){var state=History.getState(),url=state.data.realUri||state.url;if(!contentDisplayType){jQuery('#content-search').trigger('search-loading-start',[{url:url}]);this.loadResults(url);}
contentDisplayType=false;},_addToStack:function(content,url){this._searchLifo.push({content:content,url:url});if(this._searchLifo.length>this.maxPagesCached)
this._searchLifo.shift();},_onStack:function(url){var res=jQuery.grep(this._searchLifo,function(res,idx){return res.url==url});return res[0];},loadResults:function(url){var seenOnStack=this._onStack(url);if(!this.validSearchUrl(url)){jQuery('#content-search').trigger('search-loading-end',[{url:null}]);}else if(seenOnStack){jQuery('#content-search')
.html(seenOnStack.content)
.trigger('search-loading-end',[{url:url}]);Venda.Ebiz.customSelect();}else{jQuery('#content-search').load(url+' #content-search-body',jQuery.proxy(function(html,status,xhr){this._addToStack(jQuery('#content-search').html(),url);jQuery('#content-search').trigger('search-loading-end',[{url:url}]);Venda.Ebiz.customSelect();if($('#js_useScroll').length>0){$('.js-scroll-hide, .js-scroll-hide .pagn-item-info').hide();}
if($('.pagn-next a').length){$('#temp').hide();}},this));}}};Venda.namespace('Venda.Search.Feature');Venda.Search.Feature.PriceSlider=function(){var state=History.getState(),uri=new Uri(state.data.realUri||state.url),minprice=uri.getQueryParamValue('minprice'),maxprice=uri.getQueryParamValue('maxprice');jQuery.extend(this,{currency:jQuery("#tag-currsym").text(),minprice:minprice!==undefined?Number(minprice):Math.floor(this._getPrice('minprice')),maxprice:maxprice!==undefined?Number(maxprice):Math.ceil(this._getPrice('maxprice')),from:Math.floor(this._getPrice('pricefrom')),to:Math.ceil(this._getPrice('priceto'))});this._sliderOptions={range:true,min:this.minprice,max:this.maxprice,values:[this.from,this.to]};};Venda.Search.Feature.PriceSlider.prototype={setText:function(from,to){var removesearchId="#removeprice"+from+"-"+to;jQuery("#pricerangevalues, "+removesearchId).text(this.currency+from+' - '+this.currency+to);jQuery("#pricerangevalues, "+removesearchId).html(function(idx,price){return price.replace(/\u0080([\d.]+)/g,"\u20ac$1");});},_getPrice:function(id){return parseFloat(jQuery("#tag-"+id).text());},slideHandler:function(event,ui){this.setText(ui.values[0],ui.values[1]);},stopHandler:function(event,ui){var uri=new Uri(History.getState().url),newFrom=ui.values[0],newTo=ui.values[1];if(newFrom==this.from&newTo==this.to)
return;uri.replaceQueryParam('price_from',newFrom);uri.replaceQueryParam('price_to',newTo);uri.replaceQueryParam('minprice',this.minprice);uri.replaceQueryParam('maxprice',this.maxprice);jQuery('#content-search').trigger('search-navigate',[{url:uri.toString()}]);},display:function(){jQuery("#priceslider").slider(jQuery.extend(this._sliderOptions,{slide:jQuery.proxy(this,'slideHandler'),stop:jQuery.proxy(this,'stopHandler')}));this.setText(this.from,this.to);}};Venda.Search.Feature.ViewMoreLess=function(){this.showViewAll=1==jQuery('#tag-showviewall').text();this.viewAllLimit=Number(jQuery('#tag-viewallcount').text());if(this.viewAllLimit)
this.viewAllLimit-=1;};Venda.Search.Feature.ViewMoreLess.prototype={clickHandler:function(evt){var facet=jQuery(evt.currentTarget).parent().parent();facet.find('.js-toggleviewall .js-viewmorerefinements').toggle();facet.find('.js-toggleviewall .js-viewlessrefinements').toggle();facet.find('div:nth-child('+this.viewAllLimit+') ~ div').toggle();return false;},display:function(){if(!this.showViewAll)
return false;jQuery('#content-search').delegate('#collate .js-toggleviewall a','click',jQuery.proxy(this,'clickHandler'));var limit=this.viewAllLimit;jQuery('#content-search .js-showviewall').each(function(){var facet=jQuery(this);if(facet.find('.js-termtext').length<=limit||facet.find('.js-chosen').length>0)
return;facet.find('.js-toggleviewall').show();facet.find('div:nth-child('+limit+') ~ div').toggle();});return false;}};Venda.Search.Feature.MultiRefine=function(){};Venda.Search.Feature.MultiRefine.prototype={clickHandler:function(evt){return false;},display:function(){jQuery('#content-search').bind('search-loading-end',jQuery.proxy(this,'clickHandler'));var self=this;jQuery('.js-multirefine .js-termtext').each(function(idx,refine){var multi=jQuery('#multirefine-tmpl label').clone(true),single=jQuery(refine),chosen=single.hasClass('js-chosen'),cb=multi.find('input:checkbox');if(chosen)
cb.get(0).checked=true;cb.val(Venda.Search.fixRefinementUri(single.data(),chosen));multi.find('.js-facet').html(single.find('.js-facet').html());single.html(multi);});return false;}};Venda.Search.Feature.IndicateLoading=function(){};Venda.Search.Feature.IndicateLoading.prototype={clickHandler:function(evt){jQuery('#loadingsearch').fadeIn(300);return false;},display:function(){jQuery('#content-search').bind('search-loading-start',jQuery.proxy(this,'clickHandler'));return false;}};Venda.Search.Feature.HideLoading=function(){};Venda.Search.Feature.HideLoading.prototype={clickHandler:function(evt){jQuery('#loadingsearch').fadeOut(300);return false;},display:function(){jQuery('#content-search').bind('search-loading-end',jQuery.proxy(this,'clickHandler'));return false;}};Venda.Search.Feature.FilterRefinements=function(){};Venda.Search.Feature.FilterRefinements.prototype={clickHandler:function(evt){var $this=jQuery(evt.target);jQuery(".js-refine-"+$this.data('areaToRefine')+" .js-termtext").each(function(){var $termtextThis=jQuery(this);if($termtextThis.text().search(new RegExp($this.val(),"i"))<0){$termtextThis.addClass("hide");}
else{$termtextThis.removeClass("hide");}});return false;},display:function(){var input=jQuery('<input type="text" class="js-filterinput search-collate-filter"/>').attr({name:'filtertype'});jQuery('.js-search-collate-facet:not(#priceresults)').prepend(input);jQuery(".js-filterinput").each(function(){jQuery(this).data('areaToRefine',jQuery(this).parent().prev('.js-collateheading').attr('id'));});jQuery(".js-filterinput").bind('keyup',jQuery.proxy(this,'clickHandler'));return false;}};Venda.Search.Feature.PopListItems=function(){};Venda.Search.Feature.PopListItems.prototype={display:function(){jQuery('#content-search-body .js-prod').hide();jQuery(".js-prod").each(function(index){jQuery(this).delay(200*index).fadeIn(300);})
return false;}};Venda.Search.Feature.ViewStyleSwitcher=function(){};Venda.Search.Feature.ViewStyleSwitcher.prototype={display:function(){Venda.Widget.ViewStyle.setCookieForViewStyle();Venda.Widget.ViewStyle.addClassForViewStyle(viewStyleCookieName);return false;}};Venda.Search.Feature.ColorSwatch=function(){};Venda.Search.Feature.ColorSwatch.prototype={display:function(){var colorSwatch=new Venda.Ebiz.colorSwatch();colorSwatch.init();return false;}};Venda.namespace('Platform.EqualHeight');Venda.Platform.EqualHeight=function(){};Venda.Platform.EqualHeight.init=function(elementsToSet){var elementsToSetLen=elementsToSet.length;for(var i=0;i<elementsToSetLen;i++){var maxHeight=0;jQuery(elementsToSet[i]).each(function(){var curHeight=jQuery(this).height();if(curHeight>=maxHeight){maxHeight=curHeight;}});jQuery(elementsToSet[i]).css((jQuery.browser.msie&&jQuery.browser.version<7?'':'min-')+'height',maxHeight+'px');}};jQuery(function(){if(typeof Venda.Platform.EqualHeight!="undefined"){var classtoset=new Array('.js-cat-icatsdesc','.js-scatname','.js-payment-details','.js-store','.js-addressname','.js-address','.js-addresslink');Venda.Platform.EqualHeight.init(classtoset);}});// Copyright 2012 Google Inc. All Rights Reserved.
var _ga=_ga||{};var _gaq=_gaq||[];_ga.getSocialActionTrackers_=function(network,socialAction,opt_target,opt_pagePath){return function(){var trackers=_gat._getTrackers();for(var i=0,tracker;tracker=trackers[i];i++){tracker._trackSocial(network,socialAction,opt_target,opt_pagePath);}};};_ga.trackFacebook=function(opt_pagePath){try{if(FB&&FB.Event&&FB.Event.subscribe){FB.Event.subscribe('edge.create',function(opt_target){_gaq.push(_ga.getSocialActionTrackers_('facebook','like',opt_target,opt_pagePath));});FB.Event.subscribe('edge.remove',function(opt_target){_gaq.push(_ga.getSocialActionTrackers_('facebook','unlike',opt_target,opt_pagePath));});FB.Event.subscribe('message.send',function(opt_target){_gaq.push(_ga.getSocialActionTrackers_('facebook','send',opt_target,opt_pagePath));});}}catch(e){}};_ga.trackTwitterHandler_=function(intent_event,opt_pagePath){var opt_target;if(intent_event&&intent_event.type=='tweet'||intent_event.type=='click'){if(intent_event.target.nodeName=='IFRAME'){opt_target=_ga.extractParamFromUri_(intent_event.target.src,'url');}
var socialAction=intent_event.type+((intent_event.type=='click')?'-'+intent_event.region:'');_gaq.push(_ga.getSocialActionTrackers_('twitter',socialAction,opt_target,opt_pagePath));}};_ga.trackTwitter=function(opt_pagePath){intent_handler=function(intent_event){_ga.trackTwitterHandler_(intent_event,opt_pagePath);};twttr.events.bind('click',intent_handler);twttr.events.bind('tweet',intent_handler);};_ga.extractParamFromUri_=function(uri,paramName){if(!uri){return;}
var regex=new RegExp('[\\?&#]'+paramName+'=([^&#]*)');var params=regex.exec(uri);if(params!=null){return unescape(params[1]);}
return;};(function($){"use strict";$.fn.socialButtons=function(method,options){var defaults={networks:['twitter','facebook','googlePlus'],fadeInTime:2000};var opts=$.extend({},defaults,options);var methods={load:function(){return this.each(function(){var $this=$(this);$this.hide();for(var i=0;i<(opts.networks.length);i++){$this.socialButtons(opts.networks[i]);}
$this.delay(opts.fadeInTime).fadeIn();});},twitter:function(){window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}});}(document,"script","twitter-wjs"));twttr.ready(function(twttr){_ga.trackTwitter();});},facebook:function(){window.fbAsyncInit=function(){FB.init({appId:jQuery('#tag-fbAppId').html(),status:true,cookie:true,xfbml:true});_ga.trackFacebook();};(function(d){var js,id='facebook-jssdk',ref=d.getElementsByTagName('script')[0];if(d.getElementById(id)){return;}
js=d.createElement('script');js.id=id;js.async=true;js.src="//connect.facebook.net/en_US/all.js";ref.parentNode.insertBefore(js,ref);}(document));},googlePlus:function(){methods._createScript('https://apis.google.com/js/plusone.js');},pinterest:function(){methods._createScript('https://assets.pinterest.com/js/pinit.js');},tumblr:function(){methods._createScript('//platform.tumblr.com/v1/share.js');},_createScript:function(src){var t,s=document.createElement('script');s.type='text/javascript';s.async=true;s.src=src;document.getElementById('socialButtons').appendChild(s);}};if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.load.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.socialButtons');}};})(jQuery);jQuery(function(){if(jQuery('#socialButtons').length>0){jQuery('#socialButtons').socialButtons();jQuery('#socialButtons').addClass('js-loaded');}});(function($){'use strict';var params={cid:'',showEditLink:false,showTermsLink:false,enabledProviders:'facebook, twitter, googleplus',hideGigyaLink:true};var nextStep;if($('#tag-workflow').text()==='checkout'){nextStep='checkout&step=ordersummary';}else{nextStep='myaccount&step=myaccount';}
var codehttps=$('#tag-codehttp').text().replace('http:','https:');if($('#socialLogin').length>0){var loginParams={}
if($('.box-sidebar').length>0){loginParams={containerID:'socialLogin',buttonsStyle:'fullLogo',width:117,height:145,UIConfig:'<config><body><controls><snbuttons buttonsize="45" /></controls></body></config>',redirectURL:codehttps+'?ex=co_wizr-'+nextStep+'&log=1&auth=gigya'};}
else{loginParams={containerID:'socialLogin',buttonsStyle:'signInWith',UIConfig:'<config><body><controls><snbuttons buttonsize="25" /></controls></body></config>',redirectURL:codehttps+'?ex=co_wizr-'+nextStep+'&log=1&auth=gigya'};if(Modernizr.mq('only all and (max-width: 767px)')){loginParams.width=176;loginParams.height=85;}else{loginParams.width=538;loginParams.height=25;}}
gigya.socialize.showLoginUI($.extend({},params,loginParams));var oldW=$(window).width();$(window).on("resize",function(){var newW=$(window).width();if($('.box-sidebar').length<1){if(Modernizr.mq('only all and (max-width: 767px)')){loginParams.width=176;loginParams.height=85;}else{loginParams.width=538;loginParams.height=25;}}
if(oldW>=768&&newW<768){oldW=$(window).width();gigya.socialize.showLoginUI($.extend({},params,loginParams));}
if(oldW<768&&newW>=768){oldW=$(window).width();gigya.socialize.showLoginUI($.extend({},params,loginParams));}});}
if($('#socialConnections').length>0){var myaccountAddParams={containerID:'socialConnections',buttonsStyle:'signInWith',UIConfig:'<config><body><controls><snbuttons buttonsize="25" /></controls></body></config>',showEditLink:'false'};if(Modernizr.mq('only all and (max-width: 767px)')){myaccountAddParams.width=176;myaccountAddParams.height=85;}else{myaccountAddParams.width=538;myaccountAddParams.height=25;}
gigya.socialize.showAddConnectionsUI($.extend({},params,myaccountAddParams));var oldW=$(window).width();$(window).on("resize",function(){var newW=$(window).width();if(Modernizr.mq('only all and (max-width: 767px)')){myaccountAddParams.width=176;myaccountAddParams.height=85;}else{myaccountAddParams.width=538;myaccountAddParams.height=25;}
if(oldW>=768&&newW<768){oldW=$(window).width();gigya.socialize.showAddConnectionsUI($.extend({},params,myaccountAddParams));}
if(oldW<768&&newW>=768){oldW=$(window).width();gigya.socialize.showAddConnectionsUI($.extend({},params,myaccountAddParams));}});var myaccountEditParams={};$('#socialEditConnections').on('click',function(){gigya.socialize.showEditConnectionsUI($.extend({},params,myaccountEditParams));});var deauthGigyaUser=function(evt){$.post('/gigya/deauth',evt.user,function(response){});};var addNewGigyaUser=function(evt){var uri=new Uri('/gigya/add-account');$.each(evt.user,function(k,v){uri.replaceQueryParam(k,encodeURIComponent(v));});$('#socialConnections').css("height","").children("div").css("height","").children("div").css("height","");location.href=uri.toString();};gigya.socialize.addEventHandlers({onConnectionRemoved:deauthGigyaUser,onConnectionAdded:addNewGigyaUser});}
if($('#socialfields').length>0){var name='';var nickname=$('input[name = "nickname"]');var firstname=$('input[name = "firstname"]');var lastname=$('input[name = "lastname"]');if(nickname.length>0){name=' '+nickname.val();}else if(firstname.length>0&&lastname.length>0){name=' '+firstname.val()+' '+lastname.val();}
$('#socialnickname').text(name);$('#socialprovider').text($('input[name = "loginProvider"]').val());}
if($('#sociallinkaccounts').length>0){var getParameter=function(name){name=name.replace(/[\[]/,'\\[').replace(/[\]]/,'\\]');var regex=new RegExp('[\\?&]'+name+'=([^&#]*)'),results=regex.exec(location.search);return results===null?'':decodeURIComponent(results[1].replace(/\+/g,' '));};var emailparam=getParameter('email');var emailfield=$('#email').val();if(emailparam!==''&&emailfield===''){$('#email').val(emailparam);}}})($);!function($){var defaults={expandedclass:'expanded',target:''};var expandedBox=function(element,options){this.$element=$(element),this.options=$.extend({},defaults,options);};expandedBox.prototype={init:function(){var opt=this.options;if(opt.target===""||(opt.target!==""&&$(opt.target).length===0)){return;}
this.$element.on('click',$.proxy(this._clickHandler,this));},_clickHandler:function(e){var opt=this.options;e.preventDefault();$(opt.target).toggleClass(opt.expandedclass);}};$.fn.expandedBox=function(option){return this.each(function(){var options=$(this).data()||{};(new expandedBox(this,options)).init();});};$('.js-expanded-box').expandedBox();}(window.jQuery);Venda.namespace("Widget.RecentlyViewedItems");Venda.Widget.RecentlyViewedItems.SEPARATOR=',';Venda.Widget.RecentlyViewedItems.COOKIE_NAME='RVI';Venda.Widget.RecentlyViewedItems.check=1;Venda.Widget.RecentlyViewedItems.getRecentlyViewedItems=function(rviCookie){return rviCookie.split(Venda.Widget.RecentlyViewedItems.SEPARATOR);};Venda.Widget.RecentlyViewedItems.saveRecentlyViewedItems=function(item,cj,numberofrvi){var cookieVal='';var rviCookie=cj.get(Venda.Widget.RecentlyViewedItems.COOKIE_NAME);var cj=new CookieJar({expires:3600*24*7,path:'/'});if(rviCookie){var rvi=Venda.Widget.RecentlyViewedItems.getRecentlyViewedItems(rviCookie);for(var i=0;i<rvi.length;i++)
if(rvi[i]==item)
return;rvi.unshift(item);cookieVal+=rvi.slice(0,numberofrvi).join(Venda.Widget.RecentlyViewedItems.SEPARATOR);}else
cookieVal+=item;return cj.put(Venda.Widget.RecentlyViewedItems.COOKIE_NAME,cookieVal);};Venda.Widget.RecentlyViewedItems.setRecentlyViewedItems=function(invtref,numberofrvi){var cj=new CookieJar({expires:3600*24*7,path:'/'});var rviCookie=cj.get(Venda.Widget.RecentlyViewedItems.COOKIE_NAME);if(rviCookie){document.getElementById('showRVI').style.display="block";}
Venda.Widget.RecentlyViewedItems.saveRecentlyViewedItems(invtref,cj,numberofrvi);};Venda.Widget.RecentlyViewedItems.setRVISiteWide=function(){var cj=new CookieJar({expires:3600*24*7,path:'/'});var rviCookie=cj.get(Venda.Widget.RecentlyViewedItems.COOKIE_NAME);if(rviCookie){document.getElementById('showRVISiteWide').style.display="block";}
jQuery('#showRVISiteWide li').hover(function(){jQuery(this).find('.js-rviTooltip').removeClass("hide");},function(){jQuery(this).find('.js-rviTooltip').addClass("hide");});};Venda.Widget.eraseCookieIfLoggedOut=function(cookieName){var urlParam='';var loggedout=4;urlStr=document.location.href.split('&');for(i=0;i<urlStr.length;i++){var t=urlStr[i].split('=');if(t[0]=="log"){urlParam=t[1];}}
if(urlParam==loggedout){new CookieJar({path:'/'}).remove(cookieName);}
return urlParam;};jQuery(function(){Venda.Widget.eraseCookieIfLoggedOut("RVI");if(jQuery('#showRVI').length>0){var venda_invtref=jQuery('#tag-invtref').text();Venda.Widget.RecentlyViewedItems.setRecentlyViewedItems(venda_invtref,(venda_invtref,10));}
if(jQuery('#showRVISiteWide').length>0){Venda.Widget.RecentlyViewedItems.setRVISiteWide(Venda.Platform.CookieJar)}});Venda.namespace('Widget.Highlight');Venda.Widget.Highlight.initialize=function(){var Settings={topnav:true,multimenu:true,category:true};Venda.Widget.Highlight.menuHighlight(Settings);};Venda.Widget.Highlight.menuHighlight=function(obj){var referenceAsString=document.getElementById("tags_cattree").innerHTML;referenceAsString=referenceAsString.replace(/\s+/g," ");var references=referenceAsString.split(",");for(var i=0;i<references.length;i++){references[i]=references[i].split(' ').join('');switch(i){case 0:if(obj.topnav)jQuery("#topnav"+references[i]).addClass("js-topnav-active");if(obj.multimenu)jQuery("#mm_icat"+references[i]).addClass("js-mm-active1");if(obj.category)jQuery("#categoryNavigation #nav"+references[i]+" a:first").addClass("js-nav-active1");if(obj.category)jQuery("#helpNavigation #nav"+references[i]+" a:first").addClass("js-nav-active1");break;case 1:if(obj.multimenu)jQuery("#mm_sub"+references[i]).addClass("js-mm-active2");if(obj.category)jQuery("#categoryNavigation #nav"+references[i]+" a:first").addClass("js-nav-active2");if(obj.category)jQuery("#helpNavigation #nav"+references[i]+" a:first").addClass("js-nav-active2");break;case 2:if(obj.multimenu)jQuery("#mm_sub"+references[i]).addClass("js-mm-active2");if(obj.category)jQuery("#categoryNavigation #nav"+references[i]+" a:first").addClass("js-nav-active2");if(obj.category)jQuery("#helpNavigation #nav"+references[i]+" a:first").addClass("js-nav-active2");break;}}};jQuery(document).ready(function(){if(Venda.Widget.Highlight.initialize&&document.getElementById("tags_cattree")!==null){Venda.Widget.Highlight.initialize();};});/*
Copyright  2013 Adobe Systems Incorporated.

Licensed under the Apache License, Version 2.0 (the License);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an AS IS BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
/**
 * @fileOverview accessibleMegaMenu plugin
 *
 *<p>Licensed under the Apache License, Version 2.0 (the License)
 *<br />Copyright  2013 Adobe Systems Incorporated.
 *<br />Project page <a href="https://github.com/adobe-accessibility/Accessible-Mega-Menu">https://github.com/adobe-accessibility/Accessible-Mega-Menu</a>
 * @version 0.1
 * @author Michael Jordan
 * @requires jquery
 */
(function($,window,document){"use strict";var pluginName="accessibleMegaMenu",defaults={uuidPrefix:"accessible-megamenu",menuClass:"accessible-megamenu",topNavItemClass:"accessible-megamenu-top-nav-item",panelClass:"accessible-megamenu-panel",panelGroupClass:"accessible-megamenu-panel-group",hoverClass:"hover",focusClass:"focus",openClass:"open"},Keyboard={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,keyMap:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",190:"."}};function AccessibleMegaMenu(element,options){this.element=element;this.settings=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.mouseTimeoutID=null;this.focusTimeoutID=null;this.mouseFocused=false;this.justFocused=false;this.init();}
AccessibleMegaMenu.prototype=(function(){var uuid=0,keydownTimeoutDuration=1000,keydownSearchString="",isTouch=typeof window.hasOwnProperty==="function"&&!!window.hasOwnProperty("ontouchstart"),_getPlugin,_addUniqueId,_togglePanel,_clickHandler,_clickOutsideHandler,_DOMAttrModifiedHandler,_focusInHandler,_focusOutHandler,_keyDownHandler,_mouseDownHandler,_mouseOverHandler,_mouseOutHandler,_toggleExpandedEventHandlers;_getPlugin=function(element){return $(element).closest(':data(plugin_'+pluginName+')').data("plugin_"+pluginName);};_addUniqueId=function(element){element=$(element);var settings=this.settings;if(!element.attr("id")){element.attr("id",settings.uuidPrefix+"-"+new Date().getTime()+"-"+(++uuid));}};_togglePanel=function(event,hide){var target=$(event.target),that=this,settings=this.settings,menu=this.menu,topli=target.closest('.'+settings.topNavItemClass),panel=target.hasClass(settings.panelClass)?target:target.closest('.'+settings.panelClass),newfocus;_toggleExpandedEventHandlers.call(this,hide);$('html').off('mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu, pointerup.outside-accessible-megamenu',_clickOutsideHandler);menu.find('[aria-expanded].'+this.settings.panelClass).off('DOMAttrModified.accessible-megamenu');if(hide){topli=menu.find('.'+settings.topNavItemClass+' .'+settings.openClass+':first').closest('.'+settings.topNavItemClass);if(!(topli.is(event.relatedTarget)||topli.has(event.relatedTarget).length>0)){if((event.type==='mouseout'||event.type==='focusout')&&topli.has(document.activeElement).length>0){return;}
topli.find('[aria-expanded]')
.attr('aria-expanded','false')
.removeClass(settings.openClass)
.filter('.'+settings.panelClass)
.attr('aria-hidden','true');if((event.type==='keydown'&&event.keyCode===Keyboard.ESCAPE)||event.type==='DOMAttrModified'){newfocus=topli.find(':tabbable:first');setTimeout(function(){menu.find('[aria-expanded].'+that.settings.panelClass).off('DOMAttrModified.accessible-megamenu');newfocus.focus();that.justFocused=false;},99);}}else if(topli.length===0){menu.find('[aria-expanded=true]')
.attr('aria-expanded','false')
.removeClass(settings.openClass)
.filter('.'+settings.panelClass)
.attr('aria-hidden','true');}}else{clearTimeout(that.focusTimeoutID);topli.siblings()
.find('[aria-expanded]')
.attr('aria-expanded','false')
.removeClass(settings.openClass)
.filter('.'+settings.panelClass)
.attr('aria-hidden','true');topli.find('[aria-expanded]')
.attr('aria-expanded','true')
.addClass(settings.openClass)
.filter('.'+settings.panelClass)
.attr('aria-hidden','false');if(event.type==='mouseover'&&target.is(':tabbable')&&topli.length===1&&panel.length===0&&menu.has(document.activeElement).length>0){target.focus();that.justFocused=false;}
_toggleExpandedEventHandlers.call(that);}};_clickHandler=function(event){var target=$(event.target),topli=target.closest('.'+this.settings.topNavItemClass),panel=target.closest('.'+this.settings.panelClass);if(topli.length===1&&panel.length===0&&topli.find('.'+this.settings.panelClass).length===1){if(!target.hasClass(this.settings.openClass)){event.preventDefault();event.stopPropagation();_togglePanel.call(this,event);}else{if(this.justFocused){event.preventDefault();event.stopPropagation();this.justFocused=false;}else if(isTouch){event.preventDefault();event.stopPropagation();_togglePanel.call(this,event,target.hasClass(this.settings.openClass));}}}};_clickOutsideHandler=function(event){if(this.menu.has($(event.target)).length===0){event.preventDefault();event.stopPropagation();_togglePanel.call(this,event,true);}};_DOMAttrModifiedHandler=function(event){if(event.originalEvent.attrName==='aria-expanded'&&event.originalEvent.newValue==='false'&&$(event.target).hasClass(this.settings.openClass)){event.preventDefault();event.stopPropagation();_togglePanel.call(this,event,true);}};_focusInHandler=function(event){clearTimeout(this.focusTimeoutID);$(event.target)
.addClass(this.settings.focusClass)
.on('click.accessible-megamenu',$.proxy(_clickHandler,this));this.justFocused=!this.mouseFocused;this.mouseFocused=false;if(this.panels.filter('.'+this.settings.openClass).length){_togglePanel.call(this,event);}};_focusOutHandler=function(event){this.justFocused=false;var that=this,target=$(event.target),topli=target.closest('.'+this.settings.topNavItemClass),keepOpen=false;target
.removeClass(this.settings.focusClass)
.off('click.accessible-megamenu',$.proxy(_clickHandler,this));if(window.cvox){that.focusTimeoutID=setTimeout(function(){window.cvox.Api.getCurrentNode(function(node){if(topli.has(node).length){clearTimeout(that.focusTimeoutID);}else{that.focusTimeoutID=setTimeout(function(scope,event,hide){_togglePanel.call(scope,event,hide);},275,that,event,true);}});},25);}else{that.focusTimeoutID=setTimeout(function(){_togglePanel.call(that,event,true);},300);}};_keyDownHandler=function(event){var that=(this.constructor===AccessibleMegaMenu)?this:_getPlugin(this),settings=that.settings,target=$($(this).is('.'+settings.hoverClass+':tabbable')?this:event.target),menu=that.menu,topnavitems=that.topnavitems,topli=target.closest('.'+settings.topNavItemClass),tabbables=menu.find(':tabbable'),panel=target.hasClass(settings.panelClass)?target:target.closest('.'+settings.panelClass),panelGroups=panel.find('.'+settings.panelGroupClass),currentPanelGroup=target.closest('.'+settings.panelGroupClass),next,keycode=event.keyCode||event.which,start,i,o,label,found=false,newString=Keyboard.keyMap[event.keyCode]||'',regex,isTopNavItem=(topli.length===1&&panel.length===0);if(target.is("input:focus, select:focus, textarea:focus, button:focus")){return;}
if(target.is('.'+settings.hoverClass+':tabbable')){$('html').off('keydown.accessible-megamenu');}
switch(keycode){case Keyboard.ESCAPE:_togglePanel.call(that,event,true);break;case Keyboard.DOWN:event.preventDefault();if(isTopNavItem){_togglePanel.call(that,event);found=(topli.find('.'+settings.panelClass+' :tabbable:first').focus().length===1);}else{found=(tabbables.filter(':gt('+tabbables.index(target)+'):first').focus().length===1);}
if(!found&&window.opera&&opera.toString()==="[object Opera]"&&(event.ctrlKey||event.metaKey)){tabbables=$(':tabbable');i=tabbables.index(target);found=($(':tabbable:gt('+$(':tabbable').index(target)+'):first').focus().length===1);}
break;case Keyboard.UP:event.preventDefault();if(isTopNavItem&&target.hasClass(settings.openClass)){_togglePanel.call(that,event,true);next=topnavitems.filter(':lt('+topnavitems.index(topli)+'):last');if(next.children('.'+settings.panelClass).length){found=(next.children()
.attr('aria-expanded','true')
.addClass(settings.openClass)
.filter('.'+settings.panelClass)
.attr('aria-hidden','false')
.find(':tabbable:last')
.focus()===1);}}else if(!isTopNavItem){found=(tabbables.filter(':lt('+tabbables.index(target)+'):last').focus().length===1);}
if(!found&&window.opera&&opera.toString()==="[object Opera]"&&(event.ctrlKey||event.metaKey)){tabbables=$(':tabbable');i=tabbables.index(target);found=($(':tabbable:lt('+$(':tabbable').index(target)+'):first').focus().length===1);}
break;case Keyboard.RIGHT:event.preventDefault();if(isTopNavItem){found=(topnavitems.filter(':gt('+topnavitems.index(topli)+'):first').find(':tabbable:first').focus().length===1);}else{if(panelGroups.length&&currentPanelGroup.length){found=(panelGroups.filter(':gt('+panelGroups.index(currentPanelGroup)+'):first').find(':tabbable:first').focus().length===1);}
if(!found){found=(topli.find(':tabbable:first').focus().length===1);}}
break;case Keyboard.LEFT:event.preventDefault();if(isTopNavItem){found=(topnavitems.filter(':lt('+topnavitems.index(topli)+'):last').find(':tabbable:first').focus().length===1);}else{if(panelGroups.length&&currentPanelGroup.length){found=(panelGroups.filter(':lt('+panelGroups.index(currentPanelGroup)+'):last').find(':tabbable:first').focus().length===1);}
if(!found){found=(topli.find(':tabbable:first').focus().length===1);}}
break;case Keyboard.TAB:i=tabbables.index(target);if(event.shiftKey&&isTopNavItem&&target.hasClass(settings.openClass)){_togglePanel.call(that,event,true);next=topnavitems.filter(':lt('+topnavitems.index(topli)+'):last');if(next.children('.'+settings.panelClass).length){found=next.children()
.attr('aria-expanded','true')
.addClass(settings.openClass)
.filter('.'+settings.panelClass)
.attr('aria-hidden','false')
.find(':tabbable:last')
.focus();}}else if(event.shiftKey&&i>0){found=(tabbables.filter(':lt('+i+'):last').focus().length===1);}else if(!event.shiftKey&&i<tabbables.length-1){found=(tabbables.filter(':gt('+i+'):first').focus().length===1);}else if(window.opera&&opera.toString()==="[object Opera]"){tabbables=$(':tabbable');i=tabbables.index(target);if(event.shiftKey){found=($(':tabbable:lt('+$(':tabbable').index(target)+'):last').focus().length===1);}else{found=($(':tabbable:gt('+$(':tabbable').index(target)+'):first').focus().length===1);}}
if(found){event.preventDefault();}
break;case Keyboard.SPACE:if(isTopNavItem){event.preventDefault();_clickHandler.call(that,event);}else{return true;}
break;case Keyboard.ENTER:return true;break;default:clearTimeout(this.keydownTimeoutID);keydownSearchString+=newString!==keydownSearchString?newString:'';if(keydownSearchString.length===0){return;}
this.keydownTimeoutID=setTimeout(function(){keydownSearchString='';},keydownTimeoutDuration);if(isTopNavItem&&!target.hasClass(settings.openClass)){tabbables=tabbables.filter(':not(.'+settings.panelClass+' :tabbable)');}else{tabbables=topli.find(':tabbable');}
if(event.shiftKey){tabbables=$(tabbables.get()
.reverse());}
for(i=0;i<tabbables.length;i++){o=tabbables.eq(i);if(o.is(target)){start=(keydownSearchString.length===1)?i+1:i;break;}}
regex=new RegExp('^'+keydownSearchString.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,'\\$&'),'i');for(i=start;i<tabbables.length;i++){o=tabbables.eq(i);label=$.trim(o.text());if(regex.test(label)){found=true;o.focus();break;}}
if(!found){for(i=0;i<start;i++){o=tabbables.eq(i);label=$.trim(o.text());if(regex.test(label)){o.focus();break;}}}
break;}
that.justFocused=false;};_mouseDownHandler=function(event){if($(event.target).is(":tabbable, :focusable, ."+this.settings.panelClass)){this.mouseFocused=true;}
this.mouseTimeoutID=setTimeout(function(){clearTimeout(this.focusTimeoutID);},1);};_mouseOverHandler=function(event){clearTimeout(this.mouseTimeoutID);$(event.target)
.addClass(this.settings.hoverClass);_togglePanel.call(this,event);if($(event.target).is(':tabbable')){$('html').on('keydown.accessible-megamenu',$.proxy(_keyDownHandler,event.target));}};_mouseOutHandler=function(event){var that=this;$(event.target)
.removeClass(that.settings.hoverClass);that.mouseTimeoutID=setTimeout(function(){_togglePanel.call(that,event,true);},250);if($(event.target).is(':tabbable')){$('html').off('keydown.accessible-megamenu');}};_toggleExpandedEventHandlers=function(hide){var menu=this.menu;if(hide){$('html').off('mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu',_clickOutsideHandler);menu.find('[aria-expanded].'+this.settings.panelClass).off('DOMAttrModified.accessible-megamenu',_DOMAttrModifiedHandler);}else{$('html').on('mouseup.outside-accessible-megamenu, touchend.outside-accessible-megamenu, mspointerup.outside-accessible-megamenu,  pointerup.outside-accessible-megamenu',$.proxy(_clickOutsideHandler,this));menu.find('[aria-expanded=true].'+this.settings.panelClass).on('DOMAttrModified.accessible-megamenu',$.proxy(_DOMAttrModifiedHandler,this));}};return{constructor:AccessibleMegaMenu,init:function(){var that=this,settings=this.settings,nav=this.nav=$(this.element),menu=this.menu=nav.children().first(),topnavitems=this.topnavitems=menu.children();nav.attr("role","navigation");menu.addClass(settings.menuClass);topnavitems.each(function(i,topnavitem){var topnavitemlink,topnavitempanel;topnavitem=$(topnavitem);topnavitem.addClass(settings.topNavItemClass);topnavitemlink=topnavitem.find(":tabbable:first");topnavitempanel=topnavitem.children(":not(:tabbable):last");_addUniqueId.call(that,topnavitemlink);if(topnavitempanel.length){_addUniqueId.call(that,topnavitempanel);topnavitemlink.attr({"aria-haspopup":true,"aria-owns":topnavitempanel.attr("id"),"aria-controls":topnavitempanel.attr("id"),"aria-expanded":false});topnavitempanel.attr({"role":"group","aria-expanded":false,"aria-hidden":true})
.addClass(settings.panelClass)
.not("[aria-labelledby]")
.attr("aria-labelledby",topnavitemlink.attr("id"));}});this.panels=menu.find("."+settings.panelClass);menu.on("focusin.accessible-megamenu",":tabbable, :focusable, ."+settings.panelClass,$.proxy(_focusInHandler,this))
.on("focusout.accessible-megamenu",":tabbable, :focusable, ."+settings.panelClass,$.proxy(_focusOutHandler,this))
.on("keydown.accessible-megamenu",$.proxy(_keyDownHandler,this))
.on("mouseover.accessible-megamenu",$.proxy(_mouseOverHandler,this))
.on("mouseout.accessible-megamenu",$.proxy(_mouseOutHandler,this))
.on("mousedown.accessible-megamenu",$.proxy(_mouseDownHandler,this));if(isTouch){menu.on("touchstart.accessible-megamenu",$.proxy(_clickHandler,this));}
menu.find("hr").attr("role","separator");},getDefaults:function(){return this._defaults;},getOption:function(opt){return this.settings[opt];},getAllOptions:function(){return this.settings;},setOption:function(opt,value,reinitialize){this.settings[opt]=value;if(reinitialize){this.init();}}};}());$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new AccessibleMegaMenu(this,options));}});};function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden";}).length;}
function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName);};}):function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});}(jQuery,window,document));Venda.namespace('Widget.MegaMenu');Venda.Widget.MegaMenu.switched=true;Venda.Widget.MegaMenu.setAccessibleMegamenu=function(){jQuery('.topnav').removeData('plugin_accessibleMegaMenu');jQuery('.topnav').accessibleMegaMenu({uuidPrefix:'accessible-megamenu',menuClass:'mm_ul',topNavItemClass:'js-nav-item',panelClass:'js-mm-sub',panelGroupClass:'js-sub-nav-group',hoverClass:'hover',focusClass:'focus',openClass:'js-mm-liselected'});};jQuery(window).on('load ready',function(){if(Modernizr.mq('only all and (max-width: 939px)')){Venda.Widget.MegaMenu.switched=false;}
if($.cookie('GEOIP_ccode')!='GB'){$('.mm_ul .nav-sale').hide();}
if($.cookie('GEOIP_ccode')=='GB'){$('.mm_ul .nav-sale').show();Venda.Widget.MegaMenu.dynamicMenuWidth();}});var geoIPInterval=setInterval(function(){if($.cookie('GEOIP_ccode')=='GB'){$('.mm_ul .nav-sale').show();Venda.Widget.MegaMenu.dynamicMenuWidth();}
clearInterval(geoIPInterval);},8000);jQuery(window).on('resize load ready',function(){if(Modernizr.mq('only all and (max-width: 939px)')&&!Venda.Widget.MegaMenu.switched){Venda.Widget.MegaMenu.switched=true;Venda.Widget.MegaMenu.toggleMenu();Venda.Widget.MegaMenu.resetMenuWidth();$('.nav-topnav').css('visibility','visible');}else if(Modernizr.mq('only all and (min-width: 940px)')&&Venda.Widget.MegaMenu.switched){Venda.Widget.MegaMenu.switched=false;Venda.Widget.MegaMenu.hoverMenu();}});Venda.Widget.MegaMenu.toggleMenu=function(){jQuery('.topnav ul#mm_ul a.js-mm_icat, .js-mm-sub').removeClass('open js-mm-liselected').removeAttr('style');jQuery('.topnav ul#mm_ul').addClass('js-mobile_ul');if(Modernizr.touch){jQuery('.topnav ul#mm_ul, .topnav ul#mm_ul a.js-mm_icat').off('click mouseover touchend touchstart');}else{Venda.Widget.MegaMenu.setAccessibleMegamenu();jQuery('.topnav ul#mm_ul, .topnav ul#mm_ul a.js-mm_icat').off('click focusin focusout mouseover mouseout');}
jQuery('.topnav ul#mm_ul a.js-mm_icat').on('click',function(event){if(jQuery(this).next('.js-mm-sub').children().length>0){}});};Venda.Widget.MegaMenu.hoverMenu=function(){jQuery('.topnav ul#mm_ul').removeClass('js-mobile_ul');jQuery('.js-mm-sub').removeClass('is-open');jQuery('.topnav ul#mm_ul, .js-mm-sub').removeAttr('style');Venda.Widget.MegaMenu.dynamicMenuWidth();Venda.Widget.MegaMenu.setAccessibleMegamenu();};Venda.Widget.MegaMenu.resetMenuWidth=function(){jQuery(".topnav #mm_ul > li").each(function(i,v){$(v).css("width","100%").css("clear","both");});};Venda.Widget.MegaMenu.dynamicMenuWidth=function(){$('.nav-topnav').css('visibility','hidden');var menuW=0;var megamenuWidth=parseFloat(jQuery('.top-nav-and-search').width());jQuery(".topnav #mm_ul > li").each(function(){menuW+=jQuery(this).css("clear","none").css("width","auto").css("margin",0).outerWidth()});menuW=Math.floor((jQuery(".topnav #mm_ul").outerWidth()-menuW)/(jQuery(".topnav #mm_ul > li").not(':hidden').length-1));jQuery(".topnav #mm_ul > li").not(':hidden').each(function(i,v){if(i==0){jQuery(this).css("text-align","left").addClass('first');jQuery(this).css("width",Math.floor(jQuery(this).outerWidth()+(menuW/2)));}
else if(i==jQuery(".topnav #mm_ul > li").length-1){jQuery(this).addClass('last');jQuery(this).css("width",Math.floor(jQuery(this).outerWidth()+(menuW/2)));}
else{jQuery(this).css("width",jQuery(this).outerWidth()+menuW-1);}
var subMenu=$(this).find('.js-mm-sub').css("width","auto").css("left",0);var subMenuWidth=0;subMenu.find('.js-sub-nav-group').each(function(subi,subv){if($(subv).find("img").attr('src')!=undefined)$('<img />').attr('src',''+$(subv).find("img").attr('src')).outerWidth();else subMenuWidth+=$(subv).outerWidth();});if($(this).position().left+subMenuWidth>megamenuWidth||$(this).find('.js-mm-sub').hasClass('rightmenu')){subMenu.css("left","inherit").css("right",0);}else{subMenu.css("right","inherit").css("left",$(this).position().left);}});$('.nav-topnav').css('visibility','visible');};Venda.Widget.MegaMenu.SetDynamicMenuWidth=function(){jQuery(window).on("resize",function(){if(Modernizr.mq('only all and (min-width: 940px)')){Venda.Widget.MegaMenu.dynamicMenuWidth();}else{Venda.Widget.MegaMenu.resetMenuWidth();}});};Venda.namespace('Widget.RegionSwitch');var is_clicked_flag=false;var countryCookie=new CookieJar({expires:3600*24*365,path:'/'});jQuery('.regionlang-switch').on({mouseenter:function(){if($('.regionlang-switch.deactive').length){return false;}
jQuery('#flagContent, #regionLangContent').show();},mouseleave:function(){if($('.regionlang-switch.deactive').length){return false;}
jQuery('#flagContent, #regionLangContent').hide();jQuery('#regionLangContent li.hover').find('.lang').hide();}});jQuery('.regionlang-switch #flag').on({touchstart:function(){if($('.regionlang-switch.deactive').length){return false;}
jQuery('#flagContent, #regionLangContent').toggle();}});jQuery(document).on('click','#leftflag',function(e){e.preventDefault();jQuery('.js-leftflag-content').slideToggle('300');Venda.Widget.RegionSwitch.changeIcon();});jQuery(document).on('click','.js-leftflag-content li.js-region-click',function(e){jQuery('.js-leftflag-content').find('.left-lang').slideToggle('300');});jQuery('.js-leftflag-content li.js-region-left').on({click:function(){jQuery('.js-leftflag-content').find('.left-lang').hide();}});jQuery('#regionLangContent li.hover').on({mouseenter:function(){jQuery(this).find('.lang').show();}});jQuery('#regionLangContent li.region').not('.hover').on({mouseenter:function(){jQuery('#regionLangContent li.hover').find('.lang').hide();}});jQuery('#regionLangContent .close-link a').off('click').on('click',function(e){jQuery('#flagContent, #regionLangContent').hide();});jQuery(document).on('click','#regionLangContent li a,#selectRegion li a',function(e){e.preventDefault();var $this=jQuery(this);jQuery('#flagContent, #regionLangContent').slideToggle('300');Venda.Widget.RegionSwitch.changeRegion($this);});jQuery(document).on('click','.js-leftflag-content li a',function(e){e.preventDefault();var $this=jQuery(this);jQuery('#leftflag, .js-offCanvasClose i').trigger('click');Venda.Widget.RegionSwitch.changeRegion($this);});Venda.Widget.RegionSwitch.changeRegion=function(obj){var $this=obj,region=$this.data('region')?$this.data('region'):jQuery('#tag-sessionlocation').text(),lang=$this.data('lang')?$this.data('lang'):jQuery('#tag-sessionlanguage').text(),cntry=$this.data('cntry')||'',currentLocation=jQuery('.'+lang+'.'+region);if(cntry!=='')
currentLocation=jQuery('.'+lang+'.'+region+'.'+cntry);if(currentLocation.length!==0)
return false;countryCookie.put('currentlocation',cntry);if((region!=='eur')||(jQuery('#tag-sessionlocation').text()!=='eur')){Venda.Widget.RegionSwitch.redirect(lang,region);}
if((region==='eur')&&(jQuery('#tag-sessionlocation').text()==='eur')){Venda.Widget.RegionSwitch.getCurRegion();}};Venda.Widget.RegionSwitch.getCurRegion=function(){if($('#tag-sessionlocation').text()==='eur'){var currentlocation,eurCountry;currentlocation=countryCookie.get('currentlocation')||countryCookie.get('GEOIP_ccode').toLowerCase();eurCountry=['de','it','nl','es'];if(!eurCountry.contains(currentlocation)){currentlocation='eur';}
jQuery('.flag .regionlang-icon, body').removeClass('de it nl es').addClass(currentlocation);jQuery("*[class^='js-sw-']").hide();if(jQuery('.userloggedin').length){currentlocation=jQuery('.userloggedin .lang-txt').data('cntry');countryCookie.put('currentlocation',currentlocation);}
jQuery('.flag').find('.js-sw-'+currentlocation).show();jQuery('.js-sw-'+currentlocation).show();}};Venda.Widget.RegionSwitch.changeIcon=function(){var $flag=$('#leftflag');$flag.find('i.js-icon-arrow').toggleClass($flag.data('toggle-icon'));};Venda.Widget.RegionSwitch.getRtype=function(url){var recPattern,matches;recPattern=/(page|pcat|invt|icat|stry|scat).*/i;matches=false;url=(url||'').toLowerCase();matches=url.match(recPattern);return matches?matches[0]:'';};Venda.Widget.RegionSwitch.newRegionUrl=function(lang,region){var sURL,targetURL,rtype,redirectURL,workflow;sURL=window.location.href;targetURL=unescape(location.href);rtype=Venda.Widget.RegionSwitch.getRtype(window.location.href);redirectURL='';workflow=jQuery('#tag-workflow').text();if(workflow==='shopcart'){redirectURL=sURL;}else if(rtype===''){redirectURL='http://'+window.location.host+'/page/home';}else{redirectURL=sURL;}
var uri=new Uri(redirectURL);uri.replaceQueryParam('setlang',lang);uri.replaceQueryParam('setlocn',region);uri.deleteQueryParam('log');redirectURL=uri.toString();if($('.productdetail-review-wrap').length){var sessionlocn=jQuery('#tag-sessionlocation').text(),sessionlang=jQuery('#tag-sessionlanguage').text(),reviewLocale=/en_gb/ig,newLocale=(lang==='ae')?'en_fr':'fr_fr';if(sessionlocn!=='uk'){if(sessionlang==='fr'){reviewLocale=/fr_fr/ig;}else{reviewLocale=/en_fr/ig;}
redirectURL=redirectURL.replace(reviewLocale,newLocale);}}
return redirectURL;}
Venda.Widget.RegionSwitch.redirect=function(lang,region){var redirectURL=Venda.Widget.RegionSwitch.newRegionUrl(lang,region);window.location=redirectURL;};Venda.Widget.RegionSwitch.is_r_type=function(){var r_type=Venda.Widget.RegionSwitch.getRtype(window.location.href);return($('#page_home').length||r_type!=='');};Venda.Widget.RegionSwitch.updateRegionMessage=function(){var msg_to_uk=$('#tag-redirect_to_uk').text(),locn=$('#tag-sessionlocation:first').text(),lang=$('#tag-sessionlanguage:first').text(),workflow=$('#tag-workflow').text(),step=$('#tag-curstep').text(),binurl=$('#tag-codehttp').text(),defaultLang={'uk':'ae','eur':'en'};if((locn==='uk'||locn==='eur')&&lang!==defaultLang[locn]){if(step==='myaccount'||$('.layout-myaccount').length||(workflow==='checkout'&&step==='ordersummary')){$('#js-modal-style').on('opened',function(){if(workflow==='checkout'){window.location.href=binurl+'?ex=co_wizr-checkout&step=ordersummary&setlang='+defaultLang[locn];}else{window.location.href=binurl+'?ex=co_wizr-myaccount&setlang='+defaultLang[locn];}});}else{$('#js-modal-style').on('opened',function(){Venda.Widget.RegionSwitch.redirect(defaultLang[locn]);});}
$('#js-modal-style span').html(msg_to_uk);$('#js-modal-style').foundation('reveal','open');}};jQuery('#regiondropdown').on('change',function(){var $this=$(this),lang=$this.find('option[value="'+this.value+'"]').data('lang');if($('#tag-sessionlang').text()!=''&&lang!==$('#tag-sessionlang').text()){Venda.Widget.RegionSwitch.redirect(lang);}
$('#regionLangContentDropdown').attr('class','selected-'+lang);});if(!Venda.Widget.RegionSwitch.is_r_type()){$('#regiondropdown').prop('disabled',true);}else{$('.regionlang-switch, .regionLang-dropdown').removeClass('deactive');}
jQuery(function(){Venda.Widget.RegionSwitch.getCurRegion();jQuery('#regiondropdown').trigger('change');Venda.Widget.RegionSwitch.updateRegionMessage();});Venda.namespace('Widget.HandleFormModal');Venda.Widget.HandleFormModal.submitForm=function(formName){var obj,URL,params,actionType,result;obj=jQuery('form[name='+formName+']');URL=Venda.Ebiz.doProtocal(obj.attr('action'));obj.find('input[name="layout"]').val('noheaders');params=obj.find('input, select, textarea').serialiserLatin();actionType=(formName==='formemailpswd'||formName==='formbilladdr')?'POST':'GET';jQuery.ajax({type:actionType,url:URL,dataType:'html',data:params,cache:false})
.fail(function(){jQuery('#vModal').foundation('reveal','close');})
.error(function(jqXHR,status,error){jQuery('.js-modalContent').html('Error!');console.log(error);})
.done(function(data){if((/\<head\>/img).test(data)){if((/formemailpswd/ig).test(formName)){window.location=URL+'?ex=co_wizr-register';return true;}}
if(formName==='formemailpswd'){result=jQuery(data).hasClass('error');if(!result){jQuery('#ajaxFormOutput').remove();jQuery('body').append('<div style="display: none;" id="ajaxFormOutput">'+data+'</div>');jQuery('#myaccName').text(jQuery('#ajaxFormOutput').find('#myaccName').text());jQuery('#myaccEmail').text(jQuery('#ajaxFormOutput').find('#myaccEmail').text());jQuery('#vModal').foundation('reveal','close');}
jQuery(data).filter('.error').html(function(){var msg=((jQuery(this).html()||'').replace(/<br(.){0,1}>/ig,'||')).split('||'),errorArray=[],takenindex=-1;curpassindex=-1;for(var i=0;i<msg.length;i++){if(jQuery.inArray(msg[i],errorArray)<0){if(/Error adding new user: sorry, this email address has been taken./.test(msg[i])){errorArray.push('<strong>'+jQuery('#tag-validation_email_be_taken').text()+'</strong>');takenindex=errorArray.length-1;}else if(/The current password provided was incorrect./.test(msg[i])){errorArray.push(msg[i]);curpassindex=errorArray.length-1;}
else errorArray.push(msg[i]);}}
if(takenindex>-1&&curpassindex>-1){errorArray[takenindex]="";}
data=jQuery(this).html(errorArray.join('<br>'));jQuery('.js-modalContent').html(data);});}else if((formName==='formbilladdr')||(formName==='addressbookform')){if((formName==='addressbookform')){result=jQuery(data).find('#tag-error');var message_error="<h2 class='addressform-error alert-box alert radius'>"+jQuery(data).find('#tag-error').text()+"<br></h2>";if(result.length){jQuery(".addressform-error").text("");jQuery("#vModal .js-modalContent .myAccLoading").remove();jQuery("#addressform").prepend(message_error);return false;}else{window.location=URL+'?ex=co_wizr-myaccount&log=22&step=myaccount';}}else{result=jQuery('.js-modalContent').find('#tag-error');if(!result.length){jQuery('#vModal').css({'opacity':0,'filter':'alpha(opacity=0)'});window.location=URL+'?ex=co_wizr-myaccount&log=22&step=myaccount';}else{data='<div class="error addressform-error"><strong>'+result.html().replace(/"/g,'')+'</strong></div>';jQuery('.js-modalContent').html(data);}}}else{jQuery('.js-modalContent').html(data);}
jQuery('.js-modalContent').parent().foundation('reveal','reposition');});return false;};Venda.namespace('AddressLookup');(function(Venda,$){'use strict';Venda.AddressLookup.lookupSubmit=function(event){event.preventDefault();$('#js-lookupresults').empty();$('#js-addresses-found').hide();$('#js-lookup-error').hide();$('#zipc').removeClass('js-validateError');$('span[for=zipc]').remove();if($('#zipc').val()===''&&(!$('#zipc').parents('form').validate().element('#zipc'))){return false;}
$('#js-lookup-submit-btn').attr('disabled',true).find('i').show();var postcode=$('#zipc').val();$.ajax({dataType:'json',url:'/ajax/postcode?country=UK&postcode='+postcode,})
.done(function(data){if(data.errors){$('#js-lookup-error').show().delay(5000).fadeOut();$('#js-lookup-submit-btn').attr('disabled',false).find('i').hide();$('#zipc').val('').focus();$('#zipc').removeClass('js-validateError');$('span[for=zipc]').remove();}else{$('#js-lookupresults').empty();$('#js-lookupresults').append('<select name="zcdropdown" id="js-lookupselect"><option value="">'+$("#js-countryselect-pleaseselect").text()+'</option></select>');for(var i=0,l=data.results.length;i<l;i++){var company=data.results[i].company===null?'':data.results[i].company+', ';var option='<option value="'+[i]+'">'+company+data.results[i].num+''+' '+''+data.results[i].addr1+''+', '+''+data.results[i].zipc+'</option>';$('#js-lookupselect').append(option);}
Venda.AddressLookup.displayResults();$('#js-lookup-submit-btn').attr('disabled',false).find('i').hide();}
$('#js-lookupselect').change(function(){var k=$('#js-lookupselect option:selected').val();$('#company').val(data.results[k].num?data.results[k].company:'');$('#num').val(data.results[k].num?data.results[k].num:data.results[k].company);$('#addr1').val(data.results[k].addr1);$('#addr2').val(data.results[k].addr2);$('#city').val(data.results[k].city);$('#statetext').val(data.results[k].state);$('#zipc').val(data.results[k].zipc);Venda.AddressLookup.lookupSelect();});})
.fail(function(){$('#js-lookup-error').show().delay(5000).fadeOut();$('#js-lookup-submit-btn').attr('disabled',false).find('i').hide();});};Venda.AddressLookup.displayResults=function(){$('#js-addresses-found').show();Venda.Ebiz.select2.init('#js-lookupresults');Venda.Ebiz.customSelect();$('#js-addresses-found').hide();$('#js-addresses-found').slideDown(300);$('#js-lookupselect').focus();};Venda.AddressLookup.lookupSelect=function(){$('#js-lookupselect').parents('form').validate().resetForm();$('#js-hideOrShowAddress').slideDown(300);$('#js-lookupresults').empty();$('#js-addresses-found').slideUp(300);$('#js-lookup-reset-btn').slideDown(300);$('#js-manual-reset-btn').hide();$('#js-lookup-submit-btn').hide();setTop();};Venda.AddressLookup.lookupFormReset=function(){$('#js-lookupresults').empty();$('#js-addresses-found').slideUp(300);$('#js-hideOrShowAddress').slideUp(300);$('#zipcDiv, #js-lookup-submit-btn').slideDown(300);$('.zipc-input').removeClass('manual');$('#js-lookup-reset-btn').hide();$('#js-manual-reset-btn').show();$('#company, #num, #addr1, #addr2, #city, #statetext, #zipc').val('');$('#cntrylist').parents('form').validate().resetForm();return false;};Venda.AddressLookup.manualFormReset=function(){$('#js-hideOrShowAddress').slideDown(300);$('#js-lookup-submit-btn').hide();$('#js-lookupresults').empty();$('#js-addresses-found').slideUp(300);$('#zipcDiv').slideDown(300);$('.zipc-input').addClass('manual');$('#js-lookup-reset-btn').show();$('#js-manual-reset-btn').hide();$('#zipc').removeClass('js-validateError');$('span[for=zipc]').remove();return false;};Venda.AddressLookup.eventHandler=function(){$('#js-manual-reset-btn, #js-manual-error-btn').click(Venda.AddressLookup.manualFormReset);$('#js-lookup-reset-btn').click(Venda.AddressLookup.lookupFormReset);$('#js-lookup-submit-btn').click(Venda.AddressLookup.lookupSubmit);$('#zipc').on('keypress',function(e){if((e.which===13)&&$('#js-lookup-submit-btn').is(':visible')){Venda.AddressLookup.lookupSubmit(e);}});};$(function(){Venda.AddressLookup.eventHandler();});}(Venda,jQuery));Venda.namespace("Ebiz");jQuery.browser={};(function(){jQuery.browser.msie=false;jQuery.browser.version=0;if(navigator.userAgent.match(/MSIE ([0-9]+)\./)||navigator.userAgent.match(/Trident\/([0-9]+)\./)){jQuery.browser.msie=true;jQuery.browser.version=RegExp.$1;}})();jQuery(function(){if(jQuery('#infotab').length>0){var infotab=new Venda.Widget.createTab("#infotab");infotab.init();}
if(jQuery('#tag-invtivtype').text()!='shopthelook'){if(jQuery(".size-guide-tab .sizeguide-box").length==0){jQuery("a#size_guide").hide();}}else{jQuery('.js-oneProduct').find('.size-guide-tab').each(function(){var hasPage=jQuery(this).text();if(hasPage.length==0){jQuery(this).parents('.js-oneProduct').find('.size-guide-set a').hide();}});}
if(jQuery('#tag-invtivtype').length>0){Venda.Ebiz.setSizeguide();}
if(jQuery('#isCategoryListPage').length>0){jQuery('#i-crumbtrail').html(jQuery("#crumbtrail").html());jQuery('#crumbtrail').addClass('hide');}
if(jQuery('#tag-invtref').length>0){if(Modernizr.mq('only all and (max-width: 767px)')){if(jQuery('.overlay-notify').length==0){var createoverlay='<div class=\"overlay-notify\"></div>';$(createoverlay).insertBefore($('body .skiptocontent'));}}else{if(jQuery('.overlay-notify').length>0){jQuery('.overlay-notify').remove();}}}else{if(jQuery('.overlay-notify').length>0){jQuery('.overlay-notify').remove();}}
if(jQuery("#showRVI a").length>0){jQuery("#recentlyViewItems").show();}
if(Modernizr.mq('only all and (max-width: 479px)')){if(jQuery("#showRVI a").length>1){jQuery("#showRVI a").css('float','left');}}
var emailTxt=jQuery(".needheleEmailText a").text();jQuery(".needheleEmailText a").html(emailTxt.replace("@","<br>@"));if(jQuery('.staticpages.customercare').length>0){jQuery(window).on('resize',function(e){var columns=(Modernizr.mq('only all and (max-width: 767px)')?2:3);jQuery('.aligned')
.removeClass('aligned')
.css((jQuery.browser.msie&&jQuery.browser.version<7?'':'min-')+'height','');while(jQuery('.pageSubCateList:not(.aligned)').length>0){Venda.Platform.EqualHeight.init([".pageSubCateList:not(.aligned):lt("+columns+")",".pageCategoryListName h2:not(.aligned):lt("+columns+")"]);jQuery(".pageSubCateList:not(.aligned):lt("+columns+"), .pageCategoryListName h2:not(.aligned):lt("+columns+")").addClass("aligned");}
columns==2?jQuery(".dotTxt").show().slice(-2).hide():jQuery(".dotTxt").show().slice(-1).hide();});jQuery(window).trigger('resize');}
Venda.Ebiz.touchMenu();});jQuery(window).on('resize',function(e){if(Modernizr.mq('only all and (max-width: 767px)')){if(jQuery('.overlay-notify').length==0){var createoverlay='<div class=\"overlay-notify\"></div>';$(createoverlay).insertBefore($('body .skiptocontent'));Venda.Ebiz.PromoPlaceHld('m');}}else{if(jQuery('.overlay-notify').length>0){jQuery('.overlay-notify').remove();}
Venda.Ebiz.PromoPlaceHld();}
if(Modernizr.mq('only all and (max-width: 479px)')){if(jQuery("#showRVI a").length>1){jQuery("#showRVI a").css('float','left');}}else{if(jQuery("#showRVI a").length>1){jQuery("#showRVI a").css('float','none');}}
Venda.Ebiz.touchMenu();});jQuery(document).on("click","button.js-addproduct, button.js-addproduct-single",function(event){if(Modernizr.mq('only all and (max-width: 767px)')){jQuery('html,body').animate({scrollTop:jQuery('body').offset().top},1000);}});Venda.Ebiz.accordionBox=function(){jQuery(document).on("click",".js-accordion-box",function(event){event.preventDefault();var $this=jQuery(this),$parent=$this.closest('.accordion-box'),$title=$parent.find('.js-accordion-box'),$section=$parent.find('> section'),isActive=$this.closest('section').is('.active'),isTabinfo=jQuery('.info-accordion-box').length;if(isTabinfo>0){$title.find('i').removeClass('icon-minus2');}else{$title.find('i').removeClass('icon-minus');}
$section.removeClass('active');if(!isActive){$this.closest('section').addClass('active');if(isTabinfo>0){$this.find('i').addClass('icon-minus2');}else{$this.find('i').addClass('icon-minus');}}
if(jQuery('#tag-invtref').length>0){if(jQuery('#tag-invtivtype').text()!='shopthelook'){$('html,body').animate({scrollTop:$this.offset().top-20},450);}}});};Venda.Ebiz.togglebox=function(){jQuery(document).on("click",".js-togglebox",function(event){if(Modernizr.mq('only all and (max-width: 767px)')){var toggleClass='.'+jQuery(this).attr('data-toggle');if(jQuery(toggleClass).length>0){event.preventDefault();animationspeed=150;if(jQuery(this).data('anim-speed')!=undefined)animationspeed=jQuery(this).data('anim-speed')*1;if(!jQuery(this).hasClass('active')){$('.cateNav .subCategory .subSubCategory').addClass('hide-for-small');$('.cateNav .subCategory .js-togglebox').removeClass('active');$('.cateNav .subCategory .js-togglebox i').removeClass('icon-minus2');}
if(jQuery(toggleClass).hasClass("hide-for-small")){jQuery(toggleClass).removeClass("hide-for-small");jQuery(toggleClass).css('display','none');if(animationspeed>0)jQuery(toggleClass).slideDown(animationspeed);else jQuery(toggleClass).show();}else{if(animationspeed>0){jQuery(toggleClass).slideUp(animationspeed,function(){jQuery(toggleClass).addClass("hide-for-small");});}
else{jQuery(toggleClass).hide().addClass("hide-for-small");}}
jQuery(this).toggleClass('active');if(jQuery(this).attr('data-slidetoggle-icon')!=""){if(jQuery(this).hasClass('active')){jQuery(this).find('i').addClass(jQuery(this).attr('data-slidetoggle-icon'));}else{jQuery(this).find('i').removeClass(jQuery(this).attr('data-slidetoggle-icon'));}}}}});if(Modernizr.mq('only all and (max-width: 767px)')){jQuery('.js-togglebox').each(function(){var toggleSubClass='.'+jQuery(this).attr('data-toggle');if(jQuery(toggleSubClass).length==0){jQuery(this).find('i').remove();}});}};Venda.Ebiz.fixRarelyFrChar=function(scope){if(jQuery(scope).length){jQuery(scope).find('textarea, input[type="text"]').each(function(){var msg=jQuery(this).prop('value');msg=msg.replace(/\u0132/g,'IJ');msg=msg.replace(/\u0133/g,'ij');msg=msg.replace(/\u0152/g,'OE');msg=msg.replace(/\u0153/g,'oe');msg=msg.replace(/\u0178/g,'Y');msg=msg.replace(/(\u20ac||\u0080)/g,'EURO');jQuery(this).prop('value',msg);});}
var zipcvalue=$.trim(jQuery('#zipc').val());jQuery('#zipc').val(zipcvalue);};Venda.Ebiz.slidetoggle=function(){jQuery(document).on("click",".js-slidetoggle",function(event){var toggleClass='.'+jQuery(this).attr('data-slidetoggle');jQuery(toggleClass).slideToggle(50);jQuery(this).toggleClass('active');if(jQuery(this).attr('data-slidetoggle-icon')){if(jQuery(this).hasClass('active')){jQuery(this).find('i').addClass(jQuery(this).attr('data-slidetoggle-icon'));}else{jQuery(this).find('i').removeClass(jQuery(this).attr('data-slidetoggle-icon'));}}});};Venda.Ebiz.ExecuteDialogOpen=function(){if(jQuery('#vModal').find('form').length>0){if(jQuery('#emailmeback').length>0){var attributeSku=Venda.Attributes.Get('atrsku');if(attributeSku!=""){document.emailmebackform.invtref.value=attributeSku;}}
var modalFormName=jQuery('#vModal').find('form').attr('name');jQuery('form[name='+modalFormName+']').find('input[name="layout"]').val('noheaders');Venda.Widget.HandleFormModal.submitForm(modalFormName);}else{document.form.submit();}};Venda.namespace("Ebiz.BKList");Venda.Ebiz.BKList.jq=jQuery;Venda.Ebiz.BKList.configBKList={bklist:"",divArray:['#sortby','.sort_results','.searchpsel','.pagn','#refinelist'],removeDivArray:['.categorytree'],enableBklist:true};Venda.Ebiz.BKList.getUrl=function(){var curUrl=document.location.href;if(curUrl.indexOf("&amp;")!=-1){curUrl=curUrl.replace(/&amp;/gi,'&');}
return Venda.Platform.getUrlParam(curUrl,"bklist");}
Venda.Ebiz.CookieJar=new CookieJar({expires:3600*24*7,path:'/'});jQuery.fn.popupIframe=function(){if(jQuery.browser.msie&&jQuery.browser.version<"7.0"){var src='javascript:false;';html='<iframe class="js-popup-iframe" src="'+src+'" style="-moz-opacity: .10;filter: alpha(opacity=1);height:expression(this.parentNode.offsetHeight+\'px\');width:expression(this.parentNode.offsetWidth+\'px\');'+'"></iframe>';if(jQuery(this).find('.js-popup-iframe').length==0){this.prepend(html);}}};Venda.Ebiz.doProtocal=function(url){var protocal=document.location.protocol;if(url.indexOf("http:")==0&&protocal=="https:"){url=url.replace("http:","https:");}
return url;};Venda.Ebiz.emailSignup=function(form){if(Modernizr.mq('only all')||jQuery('html').hasClass('lt-ie9')){var url=new Uri(jQuery(form).attr("action"));var param=jQuery(form).find("input, select, textarea").serialize();var loadURL=url+"?"+param+"&layout=noheaders";var openID=this.id||"";var modal=jQuery('#emailSignUpModal').addClass("small").addClass(openID);modal.foundation('reveal','open');jQuery.get(loadURL,function(data){jQuery(form).find('[name=param2]').val('');jQuery(form).find('[name=param3]').val('');jQuery('#emailSignUpModal .js-modalContent').empty().html(data);modal.foundation('reveal','reposition');});}};jQuery(window).on('resize',function(e){jQuery('#emailSignUpModal').css('top',jQuery(window).scrollTop()+((jQuery(window).height()-jQuery('#emailSignUpModal').outerHeight())/2));});jQuery(document).on('click','#back_link',function(){jQuery("#emailSignUpModal").foundation('reveal','close');return false;});jQuery(document).on('closed','#emailSignUpModal',function(){jQuery('#emailSignUpModal').attr('class','reveal-modal');jQuery('.wrapper').removeClass('openModal');jQuery('.js-modalContent').html(jQuery(".js-modal-loading").html());});Venda.Ebiz.clearText=function(str){var iChars=/\$| |,|@|#|~|`|\%|\*|\^|\&|\(|\)|\+|\=|\/|\[|\-|\_|\]|\[|\}|\{|\;|\:|\'|\"|\<|\>|\?|\||\\|\!|\$|\./g;return str.replace(iChars,"");};function addEvent(elm,evType,fn,useCapture){if(elm.addEventListener){elm.addEventListener(evType,fn,useCapture);return true;}else if(elm.attachEvent){var r=elm.attachEvent('on'+evType,fn);return r;}else{elm['on'+evType]=fn;}};Venda.namespace("Ebiz.colorSwatch");Venda.Ebiz.colorSwatch=function(conf){var defaults={contentID:'#content-search'};this.conf=jQuery.extend(defaults,conf);};Venda.Ebiz.colorSwatch.prototype={init:function(){jQuery(this.conf.contentID).on("click",".js-swatchContainer a",function(){var $this=jQuery(this);var mainImg=$this.data("setimage"),mainImgObj=jQuery("#"+$this.data("prodid")),mediumImg=$this.data("setimagemedium"),detailsObj=jQuery("#"+$this.data("detailsid")),prodLink=mainImgObj.find("a:first").data("prodLink");if(mainImg==""){mainImg=mainImgObj.find("a:first").data("defaultImage");}
mainImgObj.find('img:first')
.attr("src",mainImg)
.end()
.find("a:first")
.attr("href",this.href||"");$this.parent("").find("a").removeClass("js-sw-selected");$this.addClass("js-sw-selected");detailsObj.find(".js-imgSource").html(mediumImg);return false;});}};Venda.Ebiz.fixProdName=function(){jQuery('.productdetail-wrap h1, #product-name-added, .prod-name').html(function(){var prodName=jQuery(this).html();return prodName.replace(/&nbsp;/g," ");});};Venda.Ebiz.fixEuroSign=function(){var $selector=jQuery('#term .js-refine-list, .js-prod-price, #pricerangevalues, #updateTotal, .package-list, .prod-price, .js-gwsell, .js-updateTotal, #js-notify-product .price-val, .prod-total, .bag-order-total .subtotal, .bag-order-total .total, .bag-order-total .discount, .minicart-discount, .alert-box');if(jQuery.browser.msie){$selector.html(function(idx,price){return price.replace(/(\u20ac||\u0080)([\d.]+)/g,"$2 \u20ac");});}else{$selector.each(function(price){var price=$(this).html();price=price.replace(/(\u20ac|)([\d.]+)/g,"$2 $1");$(this).html(price);});}};jQuery(function(){Venda.Ebiz.fixEuroSign();Venda.Ebiz.fixProdName();});jQuery(document).ajaxComplete(function(){Venda.Ebiz.fixEuroSign();Venda.Ebiz.fixProdName();});Venda.Ebiz.qshopRemove=function(invtref){var curUrl=document.location.href;var newUrl=curUrl.replace(invtref,'');var dialogOpts={modal:true,autoOpen:false,width:'320px'};jQuery("#waitMesg").dialog(dialogOpts);jQuery("#waitMesg").dialog("open");document.location.href=newUrl;};Venda.Ebiz.customSelect=function(scope){if(typeof scope==='undefined'){scope=jQuery('.js-custom');}else{scope=jQuery(scope);}
if(!jQuery('html').hasClass('lt-ie8')){if(scope.find('select').length>0){scope.find('select').each(function(){if(jQuery(this).next('.js-select').length==0){var title=jQuery(this).find('option:first').text()||'';if(jQuery('option:selected',this).val()!=''){title=jQuery('option:selected',this).text();}
jQuery(this).css({'z-index':10,'opacity':0,'-khtml-appearance':'none'}).after('<span class="js-select"><span class="js-selected">'+title+'</span><i class="icon-arrow-down marg-side right"></i></span>');jQuery(this).change(function(){val=jQuery('option:selected',this).text();if(jQuery('#tag-invtref').text()!="")val=jQuery(this).val();jQuery(this).next().find('.js-selected').text(val);});}});}}};Venda.Ebiz.customSelectUpdate=function(){jQuery('.js-custom select').each(function(){var val=jQuery('option:selected',this).text()||jQuery(this).val(),total=jQuery(this).find('option').length;if(total===1&&jQuery(this).attr('name')=="att2"){jQuery(this).addClass('one-size');jQuery(this).next().find('.js-selected').parent().addClass('one-size');}else{jQuery(this).removeClass('one-size');jQuery(this).next().find('.js-selected').parent().removeClass('one-size');}
jQuery(this).next().find('.js-selected').text(val);});};jQuery(window).on('load resize',function(e){if(!jQuery('html').hasClass('lt-ie9')){if(Modernizr.mq('only all and (max-width: 767px)')){jQuery('.js-doDialog').each(function(){jQuery(this).attr('target','_blank');});}}
if(e.event==='load'){if((jQuery('.orbit-container').length>0)&&(jQuery('html').hasClass('lt-ie9'))){jQuery('.orbit-prev, .orbit-next').append('<span></span>');}}});jQuery(function(){jQuery('#reviewWraper').hide();jQuery(document).bind('quickview-loaded',function(){Venda.Attributes.Scene7.initDefaultSeetings();Venda.Attributes.Initialize();Venda.Ebiz.customSelect();if(jQuery('#tag-invtivtype').text()!='shopthelook'){if(jQuery(".size-guide-tab").text().length==0){jQuery("a#size_guide").hide();}}});if(Modernizr.mq('only all and (max-width: 767px)')){Venda.Ebiz.PromoPlaceHld('m');}else{Venda.Ebiz.PromoPlaceHld();}
jQuery(".nonjs").css("display","none");if(jQuery("#pagnBtm")){if(jQuery("#pagnBtm .js-pagnPerpage label")){jQuery("#pagnBtm .js-pagnPerpage label").attr('for','perpagedpdBT');jQuery("#pagnBtm .js-pagnPerpage select").attr({id:'perpagedpdBT',name:'perpagedpdBT'});jQuery("#pagnBtm .js-sort label").attr('for','sortbyBT');jQuery("#pagnBtm .js-sort select").attr({id:'sortbyBT',name:'sortbyBT'});}}
jQuery(document).on("click",".alert-box a.close",function(event){event.preventDefault();jQuery(this).closest(".alert-box").fadeOut(function(event){jQuery(this).remove();});});if(jQuery('h2.alert-box').length){var errors=jQuery('h2.alert-box').html(),errorsOut=[];errors=errors.split(/\<br[^\>]*\>/i);if(errors.length>1){for(var i=0,l=errors.length;i<l;i++){if(errors[i]!=''&&jQuery.inArray(errors[i],errorsOut)<0){errorsOut.push(errors[i]);}}
jQuery('h2.alert-box').html(errorsOut.join('<br>'));}
if(jQuery('#tag-sessionlocation').text()==='fra'){jQuery('h2.alert-box').html(function(){var html=jQuery(this).html(),phone_uk=jQuery('#tag-phone-uk').text(),phone_fra=jQuery('#tag-phone-fra').text(),pattern=new RegExp(phone_uk,"g");html=html.replace(pattern,phone_fra);return html;});}}
jQuery(document).on("click","#nav-browse,#show-small-nav",function(event){event.preventDefault();jQuery("#mm_ul").slideToggle("slow");jQuery("#nav-browse").toggleClass("js-nav-browse-active");});jQuery('#nav-browse').on('keydown',function(event){if(event.keyCode=='9'){if(jQuery("#mm_ul").is(':hidden')){jQuery('#nav-browse').trigger('click');}}});jQuery(document).on("click","#show-small-search",function(event){jQuery("#header-row-two").toggleClass("js-search-active");});if(jQuery('.js-togglebox').length>0){Venda.Ebiz.togglebox();}
if(jQuery('.js-slidetoggle').length>0){Venda.Ebiz.slidetoggle();}
if(jQuery('.js-accordion-box').length>0){Venda.Ebiz.accordionBox();}
jQuery('.accordion-box').on('click',function(){});if(jQuery('.quickshop').length>0){if(jQuery('.js-oneProduct').length==jQuery('.js-prodoutofstock').length){jQuery('.js-addproduct').attr('disabled','true');jQuery('.js-addproduct').css('opacity','0.5');}}
Venda.Ebiz.customSelect();Venda.Ebiz.setPositionStaffLogin();if((jQuery('#ordersummary').length>0)&&($.cookie('staffInfo'))){var staffObj,staffinfo;var staffArray=$.cookie('staffInfo').split(",");staffinfo='';for(var i=0;i<staffArray.length;i++){var staffObj=staffArray[i].split("=");if(staffObj[0]=='var1'){staffinfo=staffObj[1]+' ';}
else if(staffObj[0]=='var2'){staffinfo+=staffObj[1];}
else if(staffObj[0]=='var4'){jQuery('input[name="orxorxtsalesassociateid"]').val(staffObj[1]);}
else if(staffObj[0]=='var5'){jQuery('input[name="orxorxtstoreid"]').val(staffObj[1]);}}
jQuery('input[name="orxorxtstaffinfo"]').val(staffinfo);}
if(jQuery('#orderreceipt').length>0){$.removeCookie('staffInfo',{path:'/'});$.removeCookie('staffPromo',{path:'/'});}});jQuery(window).on('resize',function(){Venda.Ebiz.setPositionStaffLogin();});Venda.Ebiz.setPositionStaffLogin=function(){if(jQuery('#stafflogin').length>0){var wHeight,fHeight,H;wHeight=jQuery(window).height();fHeight=jQuery('#loginform').outerHeight();H=(wHeight-fHeight)/2;jQuery('#loginform').css('margin',H+'px auto 0');}}
jQuery(function(){if(jQuery('#ordersummary').length>0){if(($.cookie('staffInfo'))&&(!$.cookie('staffPromo'))){$('#submitorder').attr('disabled',true);}}});jQuery(window).load(function(){if(jQuery('#ordersummary').length>0){if(($.cookie('staffInfo'))&&(!$.cookie('staffPromo'))){var promoCode;promoCode=$('#js-promo-staff').text();$('#vcode').val(promoCode);$.cookie('staffPromo','1',{path:'/'});$('#vcode_submit_shopcart').trigger('click');}}});Venda.Ebiz.changeCntryName=function(classname){var $ele;if(jQuery('#tag-delivery_address-restrict-cntry').text()==='Netherlands'){$ele=jQuery(classname);if($ele.length){$ele.prepend('The ');}}};Venda.Ebiz.changeCntryName('.country-name, .selected-country');Venda.Ebiz.imagePath=jQuery('#tag-Scence7URL').text();Venda.Ebiz.addImage=function(uID){var objParentSku,objPriceItem,imageUrl,colour,atrData,setForm,$notify=jQuery('#notify:visible'),qty,name,ref,objPriceItemNormal;setForm=jQuery('#oneProduct_'+uID).is('.js-prodMulti');if(setForm){colour=jQuery('#att1_'+uID).val();size=jQuery('#att2_'+uID).val();colour2=jQuery('#att3_'+uID).val();}else{colour=jQuery('#oneProduct_'+uID).parents('#addproductform').find("#hiddenInput_att1").val();size=jQuery('#oneProduct_'+uID).parents('#addproductform').find("#hiddenInput_att2").val();colour2=jQuery('#oneProduct_'+uID).parents('#addproductform').find("#hiddenInput_att3").val();}
objParentSku=jQuery('#oneProduct_'+uID).find('#supplier-sku').text();qty=jQuery('#oneProduct_'+uID).find('.js-qty').val();name=jQuery('#oneProduct_'+uID).find('#prod-name').text();objPriceItem="0.00";for(var i=0;i<Venda.Attributes.attsArray.length;i++){if(Venda.Attributes.attsArray[i]["atr1"]===colour&&Venda.Attributes.attsArray[i]["invtuuid"]===uID){objColornum=Venda.Attributes.attsArray[i]["atrsuplsku"];if(Venda.Attributes.attsArray[i]["atr2"]===size&&Venda.Attributes.attsArray[i]["atr3"]===colour2){objPriceItem=Venda.Attributes.attsArray[i]["atrsell"];}
imageUrl=Venda.Ebiz.imagePath+objParentSku+'_'+objColornum+'_is?$miniCart$&defaultImage=noimage';}}
jQuery('.notifydetails-image').html('<img id="js-notify-img" src="'+imageUrl+'">');$notify.find('.show-for-small, .hide-for-small').each(function(){$(this).find('#parent-sku').html(objParentSku);$(this).find('#js-notify-priceItem').html($('#tag-currsym').text()+objPriceItem);$(this).find('.qty-val .value').html(qty);$(this).find('#product-name-added').html(name);});};Venda.Ebiz.addNormalIem=function(uID){var objPriceItemNormal,objParentSku,imageParentPath,objPriceItem,colour,atrData,setForm,$notify=jQuery('#notify:visible'),qty,name,ref;setForm=jQuery('#oneProduct_'+uID).is('.js-prodMulti');objPriceItemNormal=jQuery('#oneProduct_'+uID).find('#invt-parentsellprice').text();objParentSku=jQuery('#oneProduct_'+uID).find('#supplier-sku').text();name=jQuery('#oneProduct_'+uID).find('#prod-name').text();if(setForm){imageParentPath=jQuery('#oneProduct_'+uID).find('.prod-image img').attr('src');}else{imageParentPath=jQuery('#productdetail-image img').attr('src').split('?').shift()+'?$miniCart$';}
jQuery('.notifydetails-image').html('<img id="js-notify-img" src="'+imageParentPath+'">');jQuery('#js-notify-priceItem').html(objPriceItemNormal);$notify.find('.show-for-small, .hide-for-small').each(function(){$(this).find('#parent-sku').html(objParentSku);$(this).find('#js-notify-priceItem').html($('#tag-currsym').text()+objPriceItem);$(this).find.find('.qty-val .value').html(qty);$(this).find('#product-name-added').html(name);$(this).find('#js-notify-details').empty();});};Venda.Ebiz.addImageTellAFriend=function(){var objParentSku,imageUrl;var atrData=Venda.Attributes.getAtrData('atr1',jQuery('#hiddenInput_att1').val(),true,jQuery('.js-oneProduct').attr('id').substr(11));objParentSku=jQuery('#supplier-sku').text();imageUrl=Venda.Ebiz.imagePath+objParentSku+'_'+atrData.atrsuplsku+'_is?$productgrid$&defaultImage=noimage',imageNoAttr='<img src="'+Venda.Ebiz.imagePath+objParentSku+'_'+jQuery('#invt-defcolor').text()+'_is?$productgrid$&defaultImage=noimage">'
if(jQuery('#invt-normal').text()!=""){jQuery('.tf-prod-image').html('<img id="tf-pd-img" src="'+imageUrl+'">');}else{jQuery('.tf-prod-image').html(imageNoAttr);}};Venda.Ebiz.addImageSocial=function(){var objParentSku,imageUrl;if(jQuery('#tag-invtivtype').text()!='shopthelook'){var atrData=Venda.Attributes.getAtrData('atr1',jQuery('#hiddenInput_att1').val(),true,jQuery('.js-oneProduct').attr('id').substr(11));objParentSku=jQuery('#supplier-sku').text();imageUrl=Venda.Ebiz.imagePath+objParentSku+'_'+atrData.atrsuplsku+'_is?wid=400&hei=400&defaultImage=noimage';}
return imageUrl;};Venda.Ebiz.escapeHTML=function(strToEscape){var container=document.createElement('span');container.appendChild(document.createTextNode(strToEscape));return container.innerHTML;};Venda.Ebiz.generateShareURL=function(scope){var getTitle,getURL,getDesc,getEbizDesc,getMedia,getRedirectUri,getAppID,$scope;if(typeof(scope)==="undefined"){if(jQuery('.productdetail.shop-the-look').length>0){$scope=jQuery('.js-oneProduct');}else{$scope=jQuery('.productdetail-wrap');}}else{$scope=jQuery(scope);}
$scope.each(function(){var $this=$(this);getTitle=$this.find('.social-buttons').data('prodname');getURL=$this.find('.social-buttons').data('url');getDesc=$this.find('.social-buttons').data('invtdesc');getEbizDesc=$this.find('.social-buttons').data('ebizdesc');getMedia=$this.find('.social-buttons').data('media');getRedirectUri=$this.find('.social-buttons').data('redirecturi');getAppID=$this.find('.social-buttons').data('appid');getTitle=jQuery('<div>').html(getTitle).text();getDesc=jQuery('<div>').html(getDesc).text();getEbizDesc=jQuery('<div>').html(getEbizDesc).text();getTitle=encodeURIComponent(getTitle);getDesc=encodeURIComponent(getDesc);getEbizDesc=encodeURIComponent(getEbizDesc);$this.find('.tumblr-btn').attr("href",function(){var shareURL=tumblrURL="https://www.tumblr.com/share?v=3",params=[]
params.push('&u='+getURL);params.push('&t='+getTitle);params.push('&s='+getEbizDesc);return shareURL+params.join('');});$this.find('.social-pinterest').html(function(){var shareURL="//gb.pinterest.com/pin/create/button/",params=[],pintext=$this.find('.social-buttons').data('pintext');params.push('?url='+getURL);params.push('&description='+getEbizDesc);params.push('&title='+getTitle);params.push('&media='+getMedia);return'<a class="social-pin-it-button js-social-btn" title="Pinterest" href="'+shareURL+params.join('')+'" data-pin-do="buttonPin" data-pin-config="none"><span class="textShare">'+pintext+'</span></a>';});$this.find('.twitter-btn').attr("rel",function(){var shareURL="https://twitter.com/intent/tweet",params=[]
params.push('?text='+getTitle);params.push('&url='+getURL);return shareURL+params.join('');});$this.find('.facebook-btn').attr("href",function(){var shareURL="https://www.facebook.com/dialog/feed",params=[]
params.push('?app_id='+getAppID);params.push('&name='+getTitle);params.push('&description='+getDesc);params.push('&link='+getURL);params.push('&picture='+getMedia);params.push('&redirect_uri='+getRedirectUri);return shareURL+params.join('');});});};jQuery(function(){Venda.Ebiz.generateShareURL();jQuery(document).on('click','.js-social-btn',function(e){e.preventDefault();if($(this).hasClass('twitter-btn'))
window.open(jQuery(this).attr('rel'),this.title,'width=600,height=600,resizable=0');else
window.open(jQuery(this).attr('href'),this.title,'width=600,height=600,resizable=0');return false;});jQuery(document).on('click','#BVRRRatingSummaryLinkReadID',function(){if(Modernizr.mq('only all and (max-width: 767px)')){jQuery('.BVRRContainer-tab').append(jQuery('#BVRRContainer'));if(!jQuery('.BVRRContainer-tab').parent().parent('section').hasClass('active')){jQuery('.BVRRContainer-tab').parent().parent().find('h3').trigger('click');}
else{jQuery('.BVRRContainer-tab').parent().parent().find('h3').trigger('click').trigger('click');}
jQuery('#BVRRContentContainerID').show(0);}else{jQuery('.BVRRContainer-box').append(jQuery('#BVRRContainer'));jQuery('#BVRRContentContainerID').show(0,function(){if(jQuery('#BVRRWidgetID').length>0)window.scrollTo(0,jQuery('#BVRRWidgetID').offset().top);});}
jQuery('#reviewWraper').show(0,function(){window.scrollTo(0,jQuery('#reviewWraper').offset().top);});});jQuery(document).on('click','.BVRR-link',function(){if(Modernizr.mq('only all and (max-width: 767px)')){jQuery('.BVRRContainer-tab').append(jQuery('#BVRRContainer'));jQuery('#BVRRContentContainerID').show(0);}});jQuery(window).on('resize',function(){if(Modernizr.mq('only all and (max-width: 767px)')){jQuery('.BVRRContainer-tab').append(jQuery('#BVRRContainer'));}else{jQuery('.BVRRContainer-box').append(jQuery('#BVRRContainer'));}});});Venda.Ebiz.createQty=function(){var maxorder,onhandvalue,$single,start=1;if(jQuery('.shop-the-look').length>0){start=1;}
jQuery('.js-oneProduct').each(function(){$single=jQuery(this);maxorder=($single.find('#invt-maxorder').text()=="")?5:$single.find('#invt-maxorder').text()*1;onhandvalue=parseInt($single.find('#invt-parentonhand').text());$single.find('.js-qty').empty();for(var i=start,j=(onhandvalue>maxorder)?maxorder:onhandvalue;i<=j;i++){$single.find('.js-qty').append('<option value="'+i+'">'+i+'</option>')}});Venda.Ebiz.select2.refresh('.prod-quantity');};(function(){var e=document.documentElement;document.head||document.getElementsByTagName("head");var c=/(opera)(?:.*version)?[ \/]([\w.]+)/,g=/(msie) ([\w.]+)/,ie=/(trident)(?:.*? rv:([\w.]+))?/,h=/(mozilla)(?:.*? rv:([\w.]+))?/,s=/(safari)[ \/]([\w.]+)/,d=/(windows)/,b=/(ipad)/,f=/(iphone)/,k=/(android)/,a=window.navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(a)||g.exec(a)||ie.exec(a)||s.exec(a)||c.exec(a)||0>a.indexOf("compatible")&&h.exec(a)||[],b=/(macintosh)/.exec(a)||d.exec(a)||b.exec(a)||f.exec(a)||k.exec(a)||[],d=c[1]||"",d=(d=="trident")?"msie":d;f=parseInt(c[2],10)||"",b=b[1]||"";"undefined" !=typeof e&&(e.className=e.className+" "+b+" "+d+" "+d+f);})();jQuery('.myAccNav-switch').click(function(){jQuery('.myAccNav-container').toggle();});var staticpagesLHN=function(){if(jQuery("#mainStatic").length>0){var className="li #nav"+jQuery("#mainStatic").attr("class");if(jQuery(className).length>0){jQuery(className).addClass('active-page');jQuery('.menu-staticpages #menu-heading').text(jQuery(className).find('a').text());jQuery(className).parents("#pageSubCateNav").show();}else{jQuery(className).removeClass('active-page');jQuery(className).parents("#pageSubCateNav").hide();}}};jQuery(staticpagesLHN);jQuery(document).on("click","#pageSubCateList a, #pageSubCateNav a",function(event){jQuery(staticpagesLHN);});var cordCenter=function(){var frame=jQuery(window);var result;if(frame.scrollTop()<frame.height()){result=(frame.height()/2)+frame.scrollTop();}
else if(frame.scrollTop()==frame.height()){result=frame.height()/2;}
else if(frame.scrollTop()>frame.height()){result=frame.scrollTop()+(frame.height()/2);}
return result;};var actLoading=function(){var centerPoint=cordCenter();var setLeft=50;if(jQuery(window).width()<=320){setLeft=26;}
jQuery('.js-modal-loading').css({'display':'block','position':'absolute','top':centerPoint+'px','left':setLeft+'%','z-index':99});jQuery('#js-modal-style').after('<div class="reveal-modal-bg"></div>');jQuery('.reveal-modal-bg').css('display','block');};var deactLoading=function(){jQuery('.js-modal-loading').css({'display':'none','position':'absolute','top':0,'left':0,'z-index':'auto'});jQuery('.reveal-modal-bg').remove();};var setTop=function(){var diff;var calTop;var modalEl=jQuery('#vModal');if(modalEl.hasClass('addDeliAddr')||modalEl.hasClass('editDeliAddr')||modalEl.hasClass('editBillAddr')){diff=parseInt((jQuery(window).height()+jQuery(window).scrollTop()+414)-jQuery(document).height());if(diff<1){diff=0;}
calTop=parseInt(jQuery('#vModal').offset().top-diff);if(calTop<0){calTop=100;}
jQuery('#vModal').css('top',calTop+'px');}};var phonePanel=function(){$('.phone-help a').mouseenter(function(){if($(this).data('panel')){$('.panel').hide();$('#'+$(this).data('panel')).fadeIn();}});$('.phone-help').mouseleave(function(){$('.panel').fadeOut();});};$(function(){if(($('#instragramframe').length>0)&&(Modernizr.touch)){var wasPortrait=-1;var checkOrientation=function(){var isPortrait=(window.innerHeight>window.innerWidth);if(isPortrait===wasPortrait){return;}
wasPortrait=isPortrait;var instragramframe=$('#instragramframe').clone();$('#instragramdiv').html(instragramframe);};$(window).on('resize',checkOrientation);}});function postSearch(){if(jQuery('#iscateandprodlist').html()!=""&&jQuery('#iscateandprodlist').html()!=undefined){if(jQuery('#shippingbanner').html()!=""&&jQuery('#shippingbanner').html()!=undefined){$('ul.prod-results > li:nth-child(2)').after("<li class='prod'>"+jQuery('#shippingbanner').html()+"</li>");}
if(jQuery('#showrefinementoptions').html()!=""&&jQuery('#showrefinementoptions').html()!=undefined){jQuery('#collate').find('.boxRefinement').addClass('showRefinement');jQuery('#js-filtersresults').find('.boxRefinementTM').addClass('showRefinement');}else{jQuery('#collate').find('.boxRefinement').removeClass('showRefinement');jQuery('#js-filtersresults').find('.boxRefinementTM').removeClass('showRefinement');}
if(jQuery('#categoryRef').length>0||jQuery('#parentCatRef').length>0){jQuery('#i-crumbtrail').html(jQuery("#crumbtrail").html());jQuery('#crumbtrail').addClass('hide');}
if(jQuery('.search-result').length>0){jQuery('#crumbtrail').addClass('hide');jQuery('#your-search-found').show();}
if(jQuery('#text-viewall').length>0){var urlcat=jQuery(location).attr('href');jQuery('.crumbtrail').append('<a href=\"'+urlcat+'\" class=\"crumbtrail-anchor\">'+$('#tag-viewall').text()+'</a>');}
if(jQuery('#parentCatRef').html()!=""&&jQuery('#parentCatRef').html()!=undefined){jQuery('#refinelist .search-collate').prepend(jQuery('#showcategorylist').html());jQuery('#js-filtersresults').prepend(jQuery('#showcategorylist').html());jQuery('#js-filtersresults .boxRefinement.boxType').addClass('boxRefinementTM boxTypeTM');}}
sessionStorage.searchNoresultcounter=0;};function postSearchNoResult(){if(sessionStorage.searchNoresultcounter){sessionStorage.searchNoresultcounter=Number(sessionStorage.searchNoresultcounter)+1;}else{sessionStorage.searchNoresultcounter=1;}};if(typeof LM!=='undefined'){LM.complete(function(){Venda.Ebiz.createBacktoTop();if(jQuery("#content-search").length){jQuery(".swatchesContracted").each(function(){jQuery(this).find("li.swatchcolor:first a").mouseover();});Venda.Ebiz.SearchTabZero();}
Venda.Ebiz.fixEuroSign();});}
Venda.Ebiz.createBacktoTop=function(){if(jQuery('#searchResults').length>0){var leftMargin=0,scrollTopHTML=['<div class="js-scroll-to-top hide">','<div class="fs1" aria-hidden="true"><span>'+jQuery('#tag-backtotop').text()+'</span> <i class="icon-arrow-up"></i>','</div></div>'].join('');if(jQuery('#content-search').length>0){leftMargin=parseFloat($('#content-search').offset().left);}
if(jQuery('#js_useScroll').length>0){jQuery('body').find('.js-scroll-to-top').remove();jQuery('body').prepend(scrollTopHTML);jQuery('.js-scroll-to-top').css('left',leftMargin+'px');}
jQuery(window).scroll(function(){var scrollTop=jQuery(window).scrollTop();if(Modernizr.mq('only all and (min-width: 998px)')){if(jQuery(this).scrollTop()>185){jQuery('.js-scroll-to-top').fadeIn(200);}else{jQuery('.js-scroll-to-top').fadeOut(200);}}});jQuery(window).resize(function(){if(Modernizr.mq('only all and (max-width: 998px)')){jQuery('.js-scroll-to-top').fadeOut(0);}
leftMargin=parseFloat(jQuery('#content-search').offset().left);jQuery('.js-scroll-to-top').css('left',leftMargin+'px');});if(jQuery('.viewbycolumn').length>0){jQuery('.viewbycolumn').parents('.searchResults').find('.search-sortby').hide();jQuery('.viewbycolumn').parents('.searchResults').find('#your-search-found').css('width','100%');}
jQuery('select[name="sortby"]').each(function(){if(Modernizr.mq('only all and (max-width: 997px)')){jQuery(this).find('.show-for-desktop').remove();}else{jQuery(this).find('.hide-for-desktop').remove();}});}}
jQuery(document).on('click','.js-scroll-to-top',function(){jQuery('html, body').animate({scrollTop:'0px'});});jQuery(window).load(function(){if($('#content-search').length>0){sendVarsOnClick('page','ErrorCounter',sessionStorage.searchNoresultcounter,true);}else{sendVarsOnClick('page','ErrorCounter',0,true);delete sessionStorage.searchNoresultcounter;}});jQuery(function(){if($('.js-helphover, .js-helpclick, .js-sizelink').length>0){if(typeof(currcat)==='undefined'){currcat='';}
$(document).on({mouseenter:function(){paramName=$(this).data('name');sendVarsOnClick('page',paramName,true,true);},mouseleave:function(){sendVarsOnClick('page',paramName,false,true);}},'.js-helphover');$(document).on('click','.js-helpclick',function(){paramName=$(this).data('name');sendVarsOnClick('page',paramName,true,true);$('.help-tab').addClass('open');$(this).parents('.js-infotab').find('a, h3').not(this).on('click',function(){if($('.help-tab').hasClass('open')){sendVarsOnClick('page','HelpHover',false,true);$('.help-tab').removeClass('open');}});});if((sessionStorage.sizingCounter)&&(sessionStorage.category!==currcat)){sessionStorage.sizingCounter=0;sendVarsOnClick('page','SizingCounter',sessionStorage.sizingCounter,true);}
$(document).on('click','.js-sizelink',function(){if(typeof(arrLPvars)==='undefined'){var arrLPvars=[];}
paramName=$(this).data('name');if((sessionStorage.sizingCounter)&&(sessionStorage.category==currcat)&&(currcat!='')){sessionStorage.sizingCounter=Number(sessionStorage.sizingCounter)+1;}else{sessionStorage.sizingCounter=1;for(var i=0;i<arrLPvars.length;i++){if(arrLPvars[i].name=='Category'){sessionStorage.category=arrLPvars[i].value;}};}
sendVarsOnClick('page',paramName,sessionStorage.sizingCounter,true);});}
if($('.checkout, .register, .search-form').length>0){try{sessionStorage.errorCounter=0;}
catch(error){return false;}
$(document).on('click','form input[type=submit]',function(){if(!$(this).parents('form').valid()){if(sessionStorage.errorCounter){sessionStorage.errorCounter=Number(sessionStorage.errorCounter)+1;}else{sessionStorage.errorCounter=1;}
sendVarsOnClick('page','ErrorCounter',sessionStorage.errorCounter,true);}});}
if($('#shopcart').length>0){$('body').bind('quickview-loaded',function(){$('#lpButtonDiv2 a').appendTo('.quickViewModal  #lpButtonDiv');$('.quickViewModal').on('closed',function(){$('.quickViewModal  #lpButtonDiv a').appendTo('#lpButtonDiv2');});$('.quickViewModal').find('.available-help').css('display',$('.topbar-wrapper .available-help').css('display'));});}});jQuery(document).on("touchstart click ",".closeMenutop",function(event){jQuery('.menu-stories.js-togglebox').trigger('click');});if(typeof(HTMLElement)!="undefined"){HTMLElement.prototype.getBoundingClientRect=(function(){var oldGetBoundingClientRect=HTMLElement.prototype.getBoundingClientRect;return function(){try{return oldGetBoundingClientRect.apply(this,arguments);}catch(e){return{left:'',right:'',top:'',bottom:''};}};})();}
Venda.Ebiz.setSizeguide=function(){var sizeCatref=$('#tag-catref').text(),sizeTyperef=$('#tag-invtivtype').text();if(jQuery('#tag-invtivtype').text()!='shopthelook'){if(sizeCatref!='rings'&&sizeTyperef==='jewelry'){jQuery('.js-oneProduct').find('.size-guide a').hide();jQuery('.js-tab-nav').find('li.sizeguide').hide();jQuery('section [data-name=SizingCounter]').parent().hide();}}else{jQuery('.js-oneProduct').each(function(){if($(this).find('.sizeguideSetCateref').text()!='rings'&&($(this).find('.sizeguideSetTyperef').text()==='jewelry')){jQuery(this).find('.size-guide-set a').hide();}});}};Venda.Ebiz.touchMenu=function(){if(jQuery('.ipad').length>0){if(Modernizr.touch){$('a.js-mm_icat').off("touchend");$('a.js-mm_icat').on("touchend",function(e){var link=$(this);if(link.hasClass('hover')){window.location=jQuery(this).attr("href");return true;}else{link.addClass("hover");$('a.js-mm_icat').not(this).removeClass("hover");e.preventDefault();return false;}});}}};var tellFriendAttr=function(sku){var i;for(i=0;i<Venda.Attributes.productArr.length;i++){var color=Venda.Attributes.productArr[i].attSet.att1.selectedValue,size=Venda.Attributes.productArr[i].attSet.att2.selectedValue,formID=Venda.Attributes.productArr[i].attSet.id,compareSKU=$('#oneProduct_'+formID+' #invtref').text();if(sku==compareSKU){$('.tf-prod-color .value').html(color);break;}}};$(document).on('click','#checkout .help_box .link',function(e){if((this.href!=null)&&(this.href.indexOf('mailto')<0)){e.preventDefault();window.open(this.href,'_blank','resizable=yes,width=1000,height=500');}});Venda.namespace("Ebiz.select2");Venda.Ebiz.select2.isMobile=false;Venda.Ebiz.select2.init=function(scope){scope=(typeof(scope)==='undefined')?$('.js-custom-2'):$(scope);var $select=scope.find('select');if($select.length>0){if(Venda.Ebiz.select2.isMobile){var select2Div=$('.js-custom-2');select2Div.removeClass('js-custom-2').addClass('js-custom');Venda.Ebiz.customSelect(scope);}else{$select.select2({minimumResultsForSearch:9999,escapeMarkup:function(m){return m;}})
.off('select2:select')
.on('select2:select',function(){$(this).valid();Venda.Ebiz.select2.updateTitle($(this));});Venda.Ebiz.select2.updateTitle($select);}}};Venda.Ebiz.select2.updateTitle=function($this){$this.next('.select2-container').find('.select2-selection__rendered').each(function(){var title=$(this).text();$(this).attr('title',title);});};Venda.Ebiz.select2.refresh=function(scope){Venda.Ebiz.select2.init(scope);};Venda.Ebiz.select2.destroy=function(scope){if($(scope).data('select2')){$(scope).select2('destroy');}};jQuery(function(){Venda.Ebiz.select2.isMobile=(function(){return $('html').is('.ipad')||$('html').is('.iphone')||$('html').is('.android')||Modernizr.mq('only all and (max-width: 767px)');})();Venda.Ebiz.select2.init();});Venda.Ebiz.SearchTabZero=function(){$('#searchResults #infotab .tab-nav li').each(function(e){var _this=$(this);searchResult=_this.find('span span').data('secondary-hit-count');if(searchResult!=null&&searchResult===0){_this.addClass('resultZero');_this.find('a').prop('href','javascript:void(0)');}});};Venda.Ebiz.PromoPlaceHld=function(version){var _vcode=$('input#vcode'),_promoToggle=$('.promo-box-toggle'),_promoContent=$('.promo-box-content');if(_vcode.length){if(version=='m'){_vcode.attr('placeholder',$('#js-promo-placeholder-mobile').text());$('#promoWrapper').removeClass('promoWrapper');_promoContent.show();}
else{_vcode.attr('placeholder',$('#js-promo-placeholder').text());$('#promoWrapper').addClass('promoWrapper');if($('#ajax-error').text().trim().length){if((_vcode.is(':not(:focus)')===true)||(_promoToggle.find('.on').length)){_promoContent.hide();_promoToggle.removeClass('on');$('.promo-box-toggle i')
.removeClass('icon-close1')
.addClass('icon-plus2');}}}}};Venda.namespace('Widget.Modal');Venda.Widget.Modal.previousConnection=false;Venda.Widget.Modal.doModal=function(){jQuery(document).on('click','.js-doDialog',function(event){jQuery('.wrapper').addClass('openModal');if(event.ctrlKey||event.metaKey){window.open(jQuery(this).attr("href"),'_blank');}
else{if(Modernizr.mq('only all')||jQuery('html').hasClass('lt-ie9')){event.preventDefault();var url=new Uri(Venda.Ebiz.doProtocal(jQuery(this).attr("href"))),real_url=Venda.Ebiz.doProtocal(jQuery(this).attr("href")),param=jQuery(this).data('param')||"",layout=jQuery(this).data("layout")||"noheaders",size=jQuery(this).data("size")||"medium",anchorName=jQuery(this).data("anchor")||"",nested=jQuery(this).data("nested")||"0",openID=this.id||"",loadURL=url.toString()+param+'&layout='+layout,modal=jQuery('#vModal').addClass(size).addClass(openID);jQuery('.js-modalContent').html(jQuery(".js-modal-loading").html());modal.find('.close-reveal-modal').hide();modal.foundation('reveal','open');jQuery.get(loadURL,function(data){jQuery('#vModal .js-modalContent').empty()
.html(data).append('<div class="modal-load-url" style="display: none;">'+loadURL+'</div>');if(jQuery('.js-toggleContent').length>0){Venda.Widget.Modal.expandContent();}
if(jQuery("#helpNavigation").length>0){Venda.Widget.Modal.doModalContent();}
Venda.Widget.Modal.anchor(anchorName);modal
.find('.close-reveal-modal').show()
.end()
.foundation('reveal','reposition');if(jQuery('.quickViewModal').length>0){$('.sizeguideModal .js-modalContent').html($('.prod-detail-content .size-guide-content').html());}
Venda.Ebiz.select2.init();Venda.Ebiz.changeCntryName('.selected-country');});if(nested==="0"){Venda.Widget.Modal.previousConnection=this;}else{jQuery('#vModal').data('nested',"1");}
return false;}}});jQuery(document).on('click','#back_link',function(){jQuery("#vModal").foundation('reveal','close');return false;});jQuery(document).on('closed','#vModal',function(){jQuery('.js-modalContent').html(jQuery(".js-modal-loading").html());if(jQuery(this).data('modal-parent')){jQuery(jQuery(this).data('modal-parent')).click();jQuery(this).data('modal-parent','');}else{jQuery('#vModal').attr('class','reveal-modal');jQuery('.wrapper').removeClass('openModal');}
if(jQuery('#vModal').data('nested')==="1"){jQuery(Venda.Widget.Modal.previousConnection).click();jQuery('#vModal').data('nested','');}});};Venda.Widget.Modal.doModalContent=function(){jQuery("#helpNavigation a").click(function(){var url=Venda.Ebiz.doProtocal(jQuery(this).attr("href"));jQuery(".js-staticContent").load(url+'&layout=noheaders',function(){if(jQuery('.js-toggleContent').length>0){Venda.Widget.Modal.expandContent();}
if(jQuery('#contactForm').length>0){jQuery("body").trigger("contact-loaded");}});return false;});};Venda.Widget.Modal.expandContent=function(){var txtShow=(jQuery("#txtShow").length!=0)?jQuery("#txtShow").html():"";var txtHide=(jQuery("#txtHide").length!=0)?jQuery("#txtHide").html():"";jQuery(".js-toggleContent > div").hide();jQuery(".js-toggleContent > .js-expander").each(function(){jQuery(this).attr("title",txtShow)});jQuery(".js-toggleContent > .js-expander").click(function(){jQuery(this).toggleClass("js-selected");if(jQuery(this).find(".icon-caret-right").length>0){jQuery(this).find(".icon-caret-right").removeClass('icon-caret-right').addClass('icon-caret-down');}
else{jQuery(this).find(".icon-caret-down").addClass('icon-caret-right').removeClass('icon-caret-down');}
if(jQuery(this).is(".js-selected")){jQuery(this).attr("title",txtHide);}else{jQuery(this).attr("title",txtShow);}
jQuery(this).next().slideToggle("fast");});};Venda.Widget.Modal.anchor=function(anchorName){if(anchorName!=""){if(jQuery('#vModal .js-modalContent').find('.js-expander#'+anchorName).length>0){jQuery('#vModal .js-modalContent').find('.js-expander#'+anchorName).click();}}};Venda.Widget.Modal.doWindowPopUp=function(){jQuery(document).on('click','.js-windowOpen',function(event){event.preventDefault();var url=jQuery(this).attr("href");var attrRel=jQuery(this).attr("rel")||"";var attrRel=attrRel.split(',');var popupType=attrRel[0]||"standard";var popupWidth=attrRel[1]||'780';var popupHeight=attrRel[2]||'580';if(popupType=="fullscreen"){popupWidth=screen.availWidth;popupHeight=screen.availHeight;}
var tools="";if(popupType=="standard"){tools="resizable,toolbar=yes,location=yes,scrollbars=yes,menubar=yes,width="+popupWidth+",height="+popupHeight+",top=0,left=0";}
if(popupType=="console"||popupType=="fullscreen"){tools="resizable,toolbar=no,location=no,scrollbars=yes,width="+popupWidth+",height="+popupHeight+",left=0,top=0";}
newWindow=window.open(url,'newWin',tools);newWindow.focus();});};jQuery('#tellafriend_link').on('click',function(){$('html,body').animate({scrollTop:0},0);});jQuery(function(){if(jQuery('.js-doDialog').length>0){Venda.Widget.Modal.doModal();}
if(jQuery(".js-windowOpen").length>0){Venda.Widget.Modal.doWindowPopUp();}
if(jQuery('.js-toggleContent').length>0){Venda.Widget.Modal.expandContent();}
jQuery(document).on('click','.quickViewModal  #size_guide',function(){$('.sizeguideModal').show().css({'visibility':'visible','z-index':'100'});var setTop=(($('.sizeguideModal').outerHeight()-jQuery('.quickViewModal').height())/2);setTop=(setTop>=0)?setTop:jQuery('.quickViewModal').offset().top;$('.sizeguideModal').css('top',setTop+'px');$('.reveal-modal-bg-sizeguide').show();$('.sizeguide-close-modal, .reveal-modal-bg-sizeguide').on('click',function(){$('.sizeguideModal').hide();$('.reveal-modal-bg-sizeguide').hide();});});});jQuery(document).on('click','#js-canvas-left, .offCanvasLeftMenu .js-offCanvasClose i',function(e){e.preventDefault();jQuery('html').toggleClass("js-activeLeft");jQuery('#js-recentorders-content').empty();jQuery('.js-recentorders a').removeClass('active');if(jQuery('html').hasClass('js-activeLeft')){jQuery('#js-canvas-content-left')
.hide()
.show()
.focus();}else{jQuery('#js-canvas-left').focus();}});jQuery(document).on('click','#js-canvas-right, .offCanvasRightMenu .off-canvas-close i',function(e){e.preventDefault();if(parseInt(jQuery(".js-updateTotalMini").text())>0){jQuery('html').toggleClass("js-activeRight");if(!Venda.MinicartDetail.minicartLoaded){Venda.MinicartDetail.loadMinicartHtml();}
if(jQuery('html').hasClass('js-activeRight')){jQuery('#js-canvas-content-right')
.hide()
.show()
.focus();}else{jQuery('#js-canvas-right').focus();}}
if(parseInt(jQuery(".js-updateTotalMini").text())==0){window.location=jQuery("#tag-codehttp").html()+'?ex=co_wizr-shopcart&log=22';}});jQuery('.js-recentorders-nav a').on('click',function(e){e.preventDefault();var url=Venda.Ebiz.doProtocal(jQuery(this).attr('href'));jQuery(this).toggleClass('active');if(jQuery(this).hasClass('active')){jQuery('#js-recentorders-content').show();jQuery('#js-recentorders-content').append('<div class="loading text-center"><i class="icon-spinner icon-spin icon-2x"></i></div>');jQuery('#js-recentorders-content').load(url,function(){if(status==='error'){var msg='Sorry but there was an error: ';jQuery('#js-recentorders-content').html(msg+xhr.status+" "+xhr.statusText);}});}else{jQuery('#js-recentorders-content').empty();jQuery('#js-recentorders-content').hide();}});jQuery(window).load(function(){jQuery(window).on('resize',function(){if(Modernizr.mq('only all and (min-width: 768px)')){jQuery('html').removeClass("js-activeLeft js-activeRight");}});});/*!
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jrn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.");}
return;}
var validator=$.data(this[0],"validator");if(validator){return validator;}
if(!jQuery('html').hasClass('lt-ie8')){this.attr('novalidate','novalidate');}
validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target;}
if($(event.target).hasClass("cancel")){validator.cancelSubmit=true;}
if($(event.target).attr("formnovalidate")!==undefined){validator.cancelSubmit=true;}});this.submit(function(event){if(validator.settings.debug){event.preventDefault();}
function handle(){var hidden;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm);}
validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove();}
return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if($(this[0]).is("form")){return this.validate().form();}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid=valid&&validator.element(this);});return valid;}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value);});return result;},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages);}
break;case"remove":if(!argument){delete staticRules[element.name];return existingRules;}
var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method];});return filtered;}}
var data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data);}
return data;}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val());},filled:function(a){return!!$.trim(""+$(a).val());},unchecked:function(a){return!$(a).prop("checked");}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init();};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args);};}
if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1);}
if(params.constructor!==Array){params=[params];}
$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n;});});return source;};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"js-error",validClass:"js-valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element,event){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass);}
this.addWrapper(this.errorsFor(element)).hide();}},onfocusout:function(element,event){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)===""){return;}else if(element.name in this.submitted||element===this.lastElement){this.element(element);}},onclick:function(element,event){if(element.name in this.submitted){this.element(element);}
else if(element.parentNode.name in this.submitted){this.element(element.parentNode);}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}},setDefaults:function(settings){$.extend($.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=(this.groups={});$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/);}
$.each(value,function(index,name){groups[name]=key;});});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value);});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");if(validator.settings[eventType]){validator.settings[eventType].call(validator,this[0],event);}}
$(this.currentForm)
.validateDelegate(":text, [type='password'], [type='file'], select, textarea, "+
"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+
"[type='email'], [type='datetime'], [type='date'], [type='month'], "+
"[type='week'], [type='time'], [type='datetime-local'], "+
"[type='range'], [type='color'] ","focusin focusout keyup",delegate)
.validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler);}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this]);}
this.showErrors();return this.valid();},checkForm:function(){this.prepareForm();for(var i=0,elements=(this.currentElements=this.elements());elements[i];i++){this.check(elements[i]);}
return this.valid();},element:function(element){element=this.validationTargetFor(this.clean(element));this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element)!==false;if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=$.grep(this.successList,function(element){return!(element.name in errors);});}
if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList);}else{this.defaultShowErrors();}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm();}
this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue");},numberOfInvalids:function(){return this.objectLength(this.invalid);},objectLength:function(obj){var count=0;for(var i in obj){count++;}
return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()===0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[])
.filter(":visible")
.focus()
.trigger("focusin");}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name;}).length===1&&lastActive;},elements:function(){var validator=this,rulesCache={};return $(this.currentForm)
.find("input, select, textarea")
.not(":submit, :reset, :image, [disabled]")
.not(this.settings.ignore)
.filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this);}
if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false;}
rulesCache[this.name]=true;return true;});},clean:function(selector){return $(selector)[0];},errors:function(){var errorClass=this.settings.errorClass.replace(" ",".");return $(this.settings.errorElement+"."+errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([]);},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element);},elementValue:function(element){var type=$(element).attr("type"),val=$(element).val();if(type==="radio"||type==="checkbox"){return $("input[name='"+$(element).attr("name")+"']:checked").val();}
if(typeof val==="string"){return val.replace(/\r/g,"");}
return val;},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules();var dependencyMismatch=false;var val=this.elementValue(element);var result;for(var method in rules){var rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"){dependencyMismatch=true;continue;}
dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e);}
throw e;}}
if(dependencyMismatch){return;}
if(this.objectLength(rules)){this.successList.push(element);}
return true;},customDataMessage:function(element,method){return $(element).data("msg-"+method.toLowerCase())||(element.attributes&&$(element).attr("data-msg-"+method.toLowerCase()));},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i];}}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element);}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters);}
this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper));}
return toToggle;},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass);}
this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow=this.toShow.add(this.containers);}
if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},validElements:function(){return this.currentElements.not(this.invalidElements());},invalidElements:function(){return $(this.errorList).map(function(){return this.element;});},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);label.html(message);}else{label=$("<"+this.settings.errorElement+">")
.attr("for",this.idOrName(element))
.addClass(this.settings.errorClass)
.html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent();}
if(!this.labelContainer.append(label).length){if(this.settings.errorPlacement){this.settings.errorPlacement(label,$(element));}else{label.insertAfter(element);}}}
if(!message&&this.settings.success){label.text("");if(typeof this.settings.success==="string"){label.addClass(this.settings.success);}else{this.settings.success(label,element);}}
this.toShow=this.toShow.add(label);},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")===name;});},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name);},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0];}
return element;},checkable:function(element){return(/radio|checkbox/i).test(element.type);},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']");},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length;}}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!$(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0;}
delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false;}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false;}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules;}else{$.extend(this.classRuleSettings,className);}},classRules:function(element){var rules={};var classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this]);}});}
return rules;},attributeRules:function(element){var rules={};var $element=$(element);var type=$element[0].getAttribute("type");for(var method in $.validator.methods){var value;if(method==="required"){value=$element.get(0).getAttribute(method);if(value===""){value=true;}
value=!!value;}else{value=$element.attr(method);}
if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value);}
if(value){rules[method]=value;}else if(type===method&&type!=='range'){rules[method]=true;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;}
return rules;},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule-"+method.toLowerCase());if(value!==undefined){rules[method]=value;}}
return rules;},staticRules:function(element){var rules={};var validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return;}
if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break;}
if(keepRule){rules[prop]=val.param!==undefined?val.param:true;}else{delete rules[prop];}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter;});$.each(['minlength','maxlength'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});$.each(['rangelength','range'],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}else if(typeof rules[this]==="string"){parts=rules[this].split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])];}}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
return rules;},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true;});data=transformed;}
return data;},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch";}
if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0;}
if(this.checkable(element)){return this.getLength(value,element)>0;}
return $.trim(value).length>0;},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString());},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch";}
if(/[^0-9 \-]+/.test(value)){return false;}
var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9;}}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)===0;},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param;},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param;},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},min:function(value,element,param){return this.optional(element)||value>=param;},max:function(value,element,param){return this.optional(element)||value<=param;},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid();});}
return value===target.val();},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch";}
var previous=this.previousValue(element);if(!this.settings.messages[element.name]){this.settings.messages[element.name]={};}
previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid;}
previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true||response==="true";if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors();}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=true;validator.showErrors(errors);}
previous.valid=valid;validator.stopRequest(element,valid);}},param));return"pending";}}});$.format=$.validator.format;}(jQuery));(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=xhr;}});}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode" in settings?settings:$.ajaxSettings).mode,port=("port" in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port];}
return ajax.apply(this,arguments);};}}(jQuery));(function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});}});}(jQuery));(function(Venda,$){'use strict';Venda.namespace('Validate');$.validator.setDefaults({'errorElement':'span','errorClass':'js-validateError','ignore':'input[type=hidden],.ignore','onfocusin':false,highlight:function(element,errorClass,validClass){if($(element).data('select2')){var id=$(element).data('select2').id||'';if(id){$('#'+id+'-container').parent().addClass('select2-error');if($(element).is('[name="month"]')||$(element).is('[name="year"]')){$('#select2-year-container, #select2-month-container').parent().addClass('select2-error');}}}else if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}},unhighlight:function(element,errorClass,validClass){if($(element).data('select2')){var id=$(element).data('select2').id||'';if(id){$('#'+id+'-container').parent().removeClass('select2-error');if($(element).is('[name="month"]')||$(element).is('[name="year"]')){$('#select2-year-container, #select2-month-container').parent().removeClass('select2-error');}}}else if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}});Venda.Validate.msg={'title':$('#tag-validation_title').text(),'fname':$('#tag-validation_fname').text(),'lname':$('#tag-validation_lname').text(),'giftcert_amount':$('#tag-validation_giftcert_amount').text(),'country':$('#tag-validation_country').text(),'house_num':$('#tag-validation_house_num').text(),'addr1':$('#tag-validation_addr1').text(),'city':$('#tag-validation_city').text(),'state':$('#tag-validation_state').text(),'province':$('#tag-validation_province').text(),'postcode':$('#tag-validation_postcode').text(),'invalid_uk_email_postcode':$('#tag-validation_invalid_uk_email_postcode').text(),'invalid_uk_postcode':$('#tag-validation_invalid_uk_postcode').text(),'postcode_populate':$('#tag-validation_postcode_populate').text(),'postcode_dropdown':$('#tag-validation_postcode_dropdown').text(),'phone':$('#tag-validation_phone').text(),'phone_valid':$('#tag-validation_phone_valid').text(),'email':$('#tag-validation_email').text(),'email_postcode_vaild':$('#tag-validation_email_postcode').text(),'email_vaild':$('#tag-validation_email_vaild').text(),'password':$('#tag-validation_password').text(),'password_edit_into':$('#tag-validation_password_edit_info').text(),'verify_password_length':$('#tag-validation_verify_password_length').text(),'verify_password_minlength':$('#tag-validation_verify_password_minlength').text(),'verify_password_maxlength':$('#tag-validation_verify_password_maxlength').text(),'confirm_password':$('#tag-validation_confirm_password').text(),'verify_password_match':$('#tag-validation_verify_password_match').text(),'verify_current_password':$('#tag-validation_verify_current_password').text(),'credit_card_number':$('#tag-validation_credit_card_number').text(),'credit_card_name':$('#tag-validation_credit_card_name').text(),'security_code':$('#tag-validation_security_code').text(),'security_code_length':$('#tag-validation_security_code_length').text(),'credit_card_expired':$('#tag-validation_credit_card_expired').text(),'datenow':$('#tag-validation_datenow').text(),'giftcard_id':$('#tag-validation_giftcard_id').text(),'giftcard_code':$('#tag-validation_giftcard_code').text(),'giftcard_amount':$('#tag-validation_giftcard_amount').text(),'bank_accountnumber':$('#tag-validation_bank_accountnumber').text(),'bank_accountname':$('#tag-validation_bank_accountname').text(),'bank_sortcode':$('#tag-validation_bank_sortcode').text(),'search':$('#tag-validation_search').text(),'nametxt':$('#tag-validation_name').text(),'message':$('#tag-validation_message').text(),'to':$('#tag-validation_to').text(),'from':$('#tag-validation_from').text(),'max_length':$('#tag-validation_maxLength').text(),'min_length':$('#tag-validation_minLength').text(),'max_value':$('#tag-validation_maxValue').text(),'min_value':$('#tag-validation_minValue').text(),'rank':$('#tag-validation_rank').text(),'review':$('#tag-validation_review').text(),'least':$('#tag-validation_least').text(),'least_two':$('#tag-validation_least_two').text(),'giftcert_code':$('#tag-validation_giftcert_code').text(),'promo_code':$('#tag-validation_promo_code').text(),'qty':$('#tag-validation_qty').text(),'specialChars':$('#tag-validation_special_characters').text(),'staff_id':$('#tag-validation_staff_id').text(),'store_id':$('#tag-validation_store_id').text(),'news_email_postcode_blank':$('#tag-news_email_postcode_blank').text(),'news_email_blank_postcode_notnull':$('#tag-news_email_blank_postcode_notnull').text(),'news_email_invalid_postcode_blank':$('#tag-news_email_invalid_postcode_blank').text(),'news_email_invalid':$('#tag-news_email_invalid').text(),'news_email_valid_postcode_blank':$('#tag-news_email_valid_postcode_blank').text(),'new_email':$('#tag-validation_new_email').text(),'confirm_new_email':$('#tag-validation_confirm_new_email').text(),'verify_email_match':$('#tag-validation_verify_email_match').text(),'verify_current_password_match':$('#tag-validation_verify_current_password_match').text(),'validateName':$('#tag-validation_verify_valid_name').text(),'validateAddress':$('#tag-validation_verify_valid_addr').text(),'validateZipc':$('#tag-validation_verify_valid_zipc').text(),'validateZipcFrance':$('#tag-validation_verify_valid_zipc_france').text(),'validateZipcEur':$('#tag-validation_verify_valid_zipc_eur').text(),'validateZipcNeth':$('#tag-validation_verify_valid_zipc_neth').text(),'validateCode':$('#tag-validation_verify_valid_code').text(),'validateNumber':$('#tag-validation_verify_valid_number').text(),'verify_accept_and_continue':$('#tag-validation_accept_and_continue').html()};$.extend($.validator.messages,{required:$('#tag-jquery_validation_required').text(),remote:$('#tag-jquery_validation_remote').text(),email:$('#tag-jquery_validation_email').text(),url:$('#tag-jquery_validation_url').text(),date:$('#tag-jquery_validation_date').text(),dateISO:$('#tag-jquery_validation_dateISO').text(),number:$('#tag-jquery_validation_number').text(),digits:$('#tag-jquery_validation_digits').text(),creditcard:$('#tag-jquery_validation_creditcard').text(),equalTo:$('#tag-jquery_validation_equalTo').text(),maxlength:$.validator.format($('#tag-jquery_validation_maxlength').text()),minlength:$.validator.format($('#tag-jquery_validation_minlength').text()),rangelength:$.validator.format($('#tag-jquery_validation_rangelength').text()),range:$.validator.format($('#tag-jquery_validation_range').text()),max:$.validator.format($('#tag-jquery_validation_max').text()),min:$.validator.format($('#tag-jquery_validation_min').text())});$.validator.addClassRules('js-qty',{required:true,number:true,digits:true,qty:true});$.validator.addMethod('qty',function(value){var regx;regx=new RegExp(/(^-?[1-9](\d{1,2}(\,\d{3})*|\d*)|^0{1})$/);if($('#tag-workflow').text()==='shopcart'){return(regx.test(value)===false)?false:true;}
return(parseInt(value,10)<=0||regx.test(value)===false)?false:true;},Venda.Validate.msg.qty);$.validator.addMethod('searchinput',function(value){if(value.length===1){return((value==='0')||(value==='-')||(value==='+'))?false:true;}
return true;});$.validator.addMethod('phonenumber',function(value){var regx;regx=new RegExp(/^[\d\s\(+)-.]+$/);return regx.test(value);});$.validator.addMethod('specialChars',function(value){var regx;regx=new RegExp(/^[a-zA-Z0-9'. -]+$/);return regx.test(value);},Venda.Validate.msg.specialChars);$.validator.addMethod('cardexpiry',function(){var monthObj,monthVal,yearVal;monthObj=$('#month');monthVal=monthObj.val();yearVal=$('#year').val();if((monthVal!=='')&&(yearVal!=='')){if((Venda.Validate.msg.datenow.split('/')[2]==yearVal)&&(monthVal<Venda.Validate.msg.datenow.split('/')[0])){return false;}else{return true;}}else{return true;}});$.validator.addMethod('findaddress',function(){if($('select[name=zcdropdown]').length===0&&$('#js-lookup-submit-btn').is(':visible')){return false;}
return true;});$.validator.addMethod('customAlert',function(value){if(value===''){$('.js-validationMessage').addClass('js-active').slideDown('slow');return false;}
$('.js-validationMessage').slideUp().removeClass('js-active');return true;});$.validator.addMethod('newEmail',function(value){var regx;regx=new RegExp(/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/);return regx.test(value);});$.validator.addMethod('ukpostcode',function(value,element,params){if((/^(GIR[ |-]?0AA)$|^([A-PR-UWYZ][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][0-9][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][A-HK-Y0-9][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][A-HK-Y0-9][0-9][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][0-9][A-HJKS-UW0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][A-HK-Y0-9][0-9][ABEHMNPRVWXY0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$/i).test(value)){if((/^(JE|KY|GX|GY)/i).test(value))return false;else if((/^([A-Z][A-Z][ |-]?[0-9][0-9][0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][ |-]?[0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][ |-]?[A-Z][A-Z])$/i).test(value))return false;else if((/^([A-Z][A-Z][0-9][ |-]?[0-9][0-9][0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][A-Z][ |-]?[0-9][0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][A-Z][A-Z][ |-]?[0-9][A-Z][A-Z])$/i).test(value))return false;else return true;}else return false;});$.validator.addMethod("regex",function(value,element,regexp){var check=false;return this.optional(element)||regexp.test(value);},"Please check your input.");$.validator.addMethod('validateName',function(value,element){if(value!==''){var regx=new RegExp(/^[a-zA-Z\d\'\.\-\xA1-\xFF\u0132\u0133\u0152\u0153\u0178 ]+$/);return regx.test(value);}
return true;},function(params,element){var fieldLabel=$(element).parent().prev().find('label').text().split(':')[0];return $.validator.format(Venda.Validate.msg.validateName,fieldLabel);});$.validator.addMethod('validateAddress',function(value){if(value!==''){var regx=new RegExp(/^[a-zA-Z\d\'\-\(\)\,\.\#\/\\\&\xA1-\xFF\u0132\u0133\u0152\u0153\u0178 ]+$/);return regx.test(value);}
return true;},function(params,element){var fieldLabel=$(element).parent().prev().find('label').text().split(':')[0];return $.validator.format(Venda.Validate.msg.validateAddress,fieldLabel);});$.validator.addMethod('validateZipc',function(value,element){value=$.trim(value);var regx,regx_restrict,result,value_sanitized=value,country;if(value!==''){if($(element.form).is('form[name=emaildetails]'))
country=$(element.form).find('select[name=cntry], input[name=cntry]').val();else
country=$(element.form).find('#cntrylist').val();if(country==='France'){regx=new RegExp(/^[0-9]{5}$/);regx_restrict=new RegExp(/^(98|971|972|973|974|977|978)/);if($(element.form).is('.delivery-addressform')){result=regx.test(value)&&!regx_restrict.test(value);}else{result=regx.test(value);if(jQuery('#usebillingaddress').length){value_sanitized=value_sanitized.replace(/[^0-9]/ig,'');if(regx_restrict.test(value_sanitized)){jQuery('#usebillingaddress').trigger('do-disable');}else{jQuery('#usebillingaddress').trigger('do-enable');}}}
return result;}else{var cntrylistusebill=['United Kingdom','Germany','Italy','Netherlands','Spain'];if(cntrylistusebill.contains(country)){jQuery('#usebillingaddress').trigger('do-enable');}else{jQuery('#usebillingaddress').trigger('do-disable');}
switch(country){case'United Kingdom':regx=new RegExp(/^[a-zA-Z0-9 -]+$/);break;case'Germany':case'Italy':case'Spain':regx=new RegExp(/^[0-9]{5}$/);break;case'Netherlands':regx=new RegExp(/^[0-9]{4}[\s]*[a-zA-Z]{2}$/);break;default:regx=new RegExp(/^[a-zA-Z0-9 -]+$/);}}
return regx.test(value);}
return true;},function(params,element){var fieldLabel=$(element).parents('#zipcDiv').find('label').text().split(':')[0],cntry,msgvalidation;if($(element.form).is('form[name=emaildetails]')){cntry=$(element.form).find('select[name=cntry], input[name=cntry]').val();fieldLabel=$(element.form).find('label[for=zipc]').text().split(':')[0];}
else{cntry=$('#cntrylist').val();}
switch(cntry){case'France':msgvalidation=Venda.Validate.msg.validateZipcFrance;break;case'United Kingdom':msgvalidation=Venda.Validate.msg.validateZipc;break;case'Germany':case'Italy':case'Spain':msgvalidation=Venda.Validate.msg.validateZipcEur;break;case'Netherlands':msgvalidation=Venda.Validate.msg.validateZipcNeth;break;default:}
if(cntry!=""){return $.validator.format(msgvalidation,fieldLabel);}else{var element_value=jQuery.trim(element.value);if(element_value!=""&&jQuery(element).is('#zipc')){return $.validator.format(Venda.Validate.msg.validateZipc,fieldLabel);}else{return"";}}});$.validator.addMethod('validateCode',function(value){if(value!==''){var regx=new RegExp(/^[a-zA-Z0-9 -]+$/);return regx.test(value);}
return true;},function(params,element){var fieldLabel=$(element).parent().prev().find('label').text().split(':')[0];return $.validator.format(Venda.Validate.msg.validateCode,fieldLabel);});$.validator.addMethod('validateNumber',function(value){if(value!==''){var regx=new RegExp(/^[0-9\-\(\) ]+$/);return regx.test(value);}
return true;},function(params,element){var fieldLabel=$(element).parent().prev().find('label').text().split(':')[0];return $.validator.format(Venda.Validate.msg.validateNumber,fieldLabel);});Venda.Validate.charactersCount=function(ele){var characterLimit,charactersUsed,charactersRemaining,$element,$this,$remainingText,$elemValue,startCurPos,endCurPos,ele;$element=jQuery(ele);$element.each(function(){$this=$(this);ele=$this.get(0);$remainingText=$('.js-textMsgCount-'+$this.data('textmsg'));$elemValue=($this.val()).replace(/\r\n/ig,'');characterLimit=$this.data('textlimit');charactersUsed=$elemValue.length;if($this.length>0&&typeof(ele.selectionStart)!="undefined"){startCurPos=ele.selectionStart;endCurPos=ele.selectionEnd;}else{startCurPos=-1;endCurPos=-1;}
if($this.parent().hasClass('personalized-note-input')){var templines=$elemValue.replace(/\<br\>/g,'\n').replace(/\<br \/\>/g,'\n');var lines=templines.split("\n");var totalLine=0;for(var i=0;i<lines.length;i++){if(lines[i].length<=70)continue;var j=0,space=69;while(j++<=70){if(lines[i].charAt(j)===" ")space=j;}
lines[i+1]=lines[i].substring(space+1,lines[i].length)+(lines[i+1]||"");lines[i]=lines[i].substring(0,space+1).replace(/\s+$/,'');}
lines=lines.slice(0,4);totalLine=lines.length;charactersUsed=0;for(var i=0;i<lines.length;i++){charactersUsed+=lines[i].length;}
var formatted=lines.join("\n");$this.val(formatted);if(startCurPos>=0&&endCurPos>=0){try{ele.setSelectionRange(startCurPos,endCurPos);}catch(kmk){}}
$elemValue=formatted;if(charactersUsed>characterLimit){charactersUsed=characterLimit;$this.val($elemValue.substr(0,characterLimit+(totalLine-1)));}}else{if(charactersUsed>characterLimit){charactersUsed=characterLimit;$this.val($elemValue.substr(0,characterLimit));}}
charactersRemaining=characterLimit-charactersUsed;$remainingText.html(charactersRemaining);});};Venda.Validate.errorPlacement=function(error,element){if(element.is('select')){if(element.is('[name="month"]')||element.is('[name="year"]')){$('#expiryshow > div:last-child').append(error);$('.js-changecard:visible').trigger('click');}else{error.insertAfter($(element).next().last());}}else{if(element.is('#ustandc'))
error.insertAfter(element.parent().find('.text-label')).addClass('ustandc-error');else
error.insertAfter(element);}};$.validator.addMethod('newsletter',function(value,element,params){var $form=$(element.form),$validator=$form.data('validator'),$email=$form.find('input[name="param2"]'),$zipc=$form.find('input[name="param3"]'),isPassed=true,errorMessage='',emailRegX=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;$email.val($.trim($email.val()));$zipc.val($.trim($zipc.val()));if($email.val()===""){if($zipc.val()===""){isPassed=false;errorMessage=Venda.Validate.msg.news_email_postcode_blank;}else{isPassed=false;errorMessage=Venda.Validate.msg.news_email_blank_postcode_notnull;}}else if(!emailRegX.test($email.val())){if($zipc.val()===""){isPassed=false;errorMessage=Venda.Validate.msg.news_email_invalid_postcode_blank;}else{isPassed=false;errorMessage=Venda.Validate.msg.news_email_invalid;}}else{if($zipc.val()===""){isPassed=false;errorMessage=Venda.Validate.msg.news_email_valid_postcode_blank;}}
$validator.settings.messages.param2.newsletter=errorMessage;$validator.settings.messages.param3.newsletter=errorMessage;$form.data('validator',$validator);return isPassed;});jQuery('form[name=emailfooter]').validate({onfocusout:false,rules:{param2:{newEmail:true,email:false,newsletter:true},param3:{newsletter:true,}},groups:{username:'param2 param3'},messages:{param2:{newsletter:"require",newEmail:Venda.Validate.msg.email_vaild},param3:{newsletter:"require"}},submitHandler:function(){Venda.Ebiz.emailSignup(document.emailfooter);},errorPlacement:function(error,element){if(Modernizr.mq('only all and (max-width: 479px)')){error.appendTo(jQuery('.ft-newsletterform'));}else{error.appendTo(jQuery('.ft-newsletter fieldset'));}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{if(element.name==="param2"||element.name==="param3"){$(element.form).find('input[name="param2"], input[name="param3"]').addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{if(element.name==="param2"||element.name==="param3"){$(element.form).find('input[name="param2"], input[name="param3"]').removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}}});jQuery('form[name=emailblog]').validate({onfocusout:false,rules:{param2:{email:false,newsletter:true},param3:{newsletter:true,}},groups:{username:'param2 param3'},messages:{param2:{newsletter:"require"},param3:{newsletter:"require"}},submitHandler:function(){Venda.Ebiz.emailSignup(document.emailblog);},errorPlacement:function(error,element){error.appendTo(jQuery('.blog-newsletterform'));},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{if(element.name==="param2"||element.name==="param3"){$(element.form).find('input[name="param2"], input[name="param3"]').addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{if(element.name==="param2"||element.name==="param3"){$(element.form).find('input[name="param2"], input[name="param3"]').removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}}});jQuery('form[name=emailstatic]').validate({onfocusout:false,rules:{param2:{email:false,newsletter:true},param3:{newsletter:true,}},groups:{username:'param2 param3'},messages:{param2:{newsletter:"require"},param3:{newsletter:"require"}},submitHandler:function(){Venda.Ebiz.emailSignup(document.emailstatic);},errorPlacement:function(error,element){if(Modernizr.mq('only all and (max-width: 479px)')){error.appendTo(jQuery('.staticNewsletterform'));}else{error.appendTo(jQuery('.ft-newsletter fieldset'));}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass);}else{if(element.name==="param2"||element.name==="param3"){$(element.form).find('input[name="param2"], input[name="param3"]').addClass(errorClass).removeClass(validClass);}else{$(element).addClass(errorClass).removeClass(validClass);}}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass);}else{if(element.name==="param2"||element.name==="param3"){$(element.form).find('input[name="param2"], input[name="param3"]').removeClass(errorClass).addClass(validClass);}else{$(element).removeClass(errorClass).addClass(validClass);}}}});$(function(){$('[required]').removeAttr('required');$(document).on('keyup','.js-textMsgCount',function(){Venda.Validate.charactersCount(this);});});}(Venda,jQuery));function addSearchRules(){jQuery('#formsolrsearch').validate({rules:{q:{required:true,searchinput:true}},messages:{q:{required:Venda.Validate.msg.search}},errorPlacement:function(error,element){}});}
jQuery(function(){addSearchRules();jQuery('#gigyaaddform').validate({rules:{password:{required:true,minlength:7,maxlength:15}},messages:{uspswd:{required:Venda.Validate.msg.password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength}}});jQuery('#formnorecordsearch').validate({rules:{q:{required:true,searchinput:true}},messages:{q:{required:Venda.Validate.msg.search,searchinput:""}}});jQuery('#formsolrsearch-tablet').validate({rules:{q:{required:true,searchinput:true}},messages:{q:{required:Venda.Validate.msg.search,searchinput:""}},errorPlacement:function(error,element){}});jQuery('#contactForm').validate({rules:{field1:{required:true,newEmail:true,email:false},field2:{required:true},field3:{required:true}},messages:{field1:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},field2:{required:Venda.Validate.msg.nametxt},field3:Venda.Validate.msg.message},submitHandler:function(form){Venda.Ebiz.fixRarelyFrChar(form);form.submit();}});jQuery('#giftcertificatesform').validate({rules:{to:{required:true,maxlength:30},from:{required:true,maxlength:30},email:{required:true,newEmail:true,email:false},comment:{rangelength:[0,250]},amount:{required:true,number:true,range:[jQuery('#tag-invtatrminsubsell').text(),jQuery('#tag-invtatrmaxsubsell').text()],maxlength:10}},messages:{to:{required:Venda.Validate.msg.to,maxlength:jQuery.format(Venda.Validate.msg.max_length+" {0}")},from:{required:Venda.Validate.msg.nametxt,maxlength:jQuery.format(Venda.Validate.msg.max_length+" {0}")},email:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},comment:{rangelength:jQuery.format(Venda.Validate.msg.least+" {0} "+Venda.Validate.msg.least_two)},amount:{required:Venda.Validate.msg.giftcert_amount,range:jQuery.format(Venda.Validate.msg.min_value+" {0} "+Venda.Validate.msg.max_value+" {1}"),maxlength:jQuery.format(Venda.Validate.msg.max_length+" {0}")}},submitHandler:function(form){Venda.Ebiz.fixRarelyFrChar(form);form.submit();}});if(jQuery('form#giftcertificatesform').length>0){Venda.Validate.charactersCount(jQuery('.js-textMsgCount'));}
jQuery('#addproductform').validate({errorPlacement:function(error,element){}});if(jQuery('form[name=storelocatorform]').length>0){Venda.Validate.storelocator();jQuery('#storelocatorform').on('click','#pcsubmit',function(){Venda.Validate.storelocator();});}
jQuery('form[name=storezipform]').validate({rules:{zip:{ukpostcode:true,required:true}},messages:{zip:{ukpostcode:Venda.Validate.msg.invalid_uk_postcode,required:Venda.Validate.msg.postcode}},submitHandler:function(){var zip=$('.js-input-zip').val();Venda.storeloc.getStores('uk',null,zip);},errorPlacement:function(error,element){console.log($(element).parent().next());error.insertAfter($(element).parent().next());}});jQuery('form[name=storecountryform]').validate({rules:{country:{required:true}},messages:{country:{required:Venda.Validate.msg.country}},submitHandler:function(){var country=$('.js-select-country').val();if(country!==''){switch(country){case'usa':$('.js-submit-country').attr('disabled',true);Venda.storeloc.getStores(country);Venda.storeloc.getDropdown(country,'.js-select-state','<option value="" selected>'+$('#tag-selectastate').text()+'</option>');$('[name=storestateform]').slideDown(700,function(){Venda.Ebiz.select2.refresh('#store-dropdown');});break;default:Venda.storeloc.getStores(country);$('[name=storestateform]').slideUp(700,function(){Venda.Ebiz.select2.refresh('#store-dropdown');});break;}}},errorPlacement:Venda.Validate.errorPlacement});jQuery('form[name=storestateform]').validate({rules:{state:{required:true}},messages:{state:{required:Venda.Validate.msg.state}},submitHandler:function(){var country=$('.js-select-country').val();var state=$('.js-select-state').val();if(state!==''){Venda.storeloc.getStores(country,state);}},errorPlacement:Venda.Validate.errorPlacement});if(jQuery('#staffloginform').length>0){$.removeCookie('staffInfo',{path:'/'});$.removeCookie('staffPromo',{path:'/'});}
jQuery('#staffloginform').validate({rules:{var1:{required:true},var2:{required:true},var4:{required:true},var5:{required:true}},messages:{var1:{required:Venda.Validate.msg.fname},var2:{required:Venda.Validate.msg.lname},var4:{required:Venda.Validate.msg.staff_id},var5:{required:Venda.Validate.msg.store_id}},submitHandler:function(form){var URL,params,$form,paramsCookie;$form=jQuery(form);URL=$form.attr('action');URL=Venda.Ebiz.doProtocal(URL);Venda.Ebiz.fixRarelyFrChar(form);params=$form.find("input, select, textarea").serialize();paramsCookie='';$form.find('input[type="text"], input[type="number"]').each(function(index){paramsCookie+=$(this).attr('name')+'='+$(this).val()+',';});$.ajax({dataType:'xml',global:false,url:URL+'&'+params,complete:function(data){jQuery('.js-stafflogin-error').html(data.responseText);if(jQuery('.js-stafflogin-error div').text()=="Confirmed"){jQuery('.js-stafflogin-error').hide();$.cookie('staffInfo',paramsCookie,{path:'/'});window.location.href='/page/home';}else{jQuery('.js-stafflogin-error').show();}}});}});});jQuery('body').bind('quickview-loaded',function(){jQuery("#addproductform").validate({});});jQuery('body').bind('emailmebackform-loaded',function(){jQuery('#emailmebackform').validate({rules:{bisemail:{required:true,newEmail:true,email:false}},messages:{bisemail:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild}},submitHandler:function(form){Venda.Ebiz.fixRarelyFrChar(form);Venda.Ebiz.ExecuteDialogOpen();}});});jQuery('body').bind('writereviewform-loaded',function(){jQuery("#writereviewform").validate({rules:{field1:{required:true,maxlength:150},from:{required:true,newEmail:true,email:false},field2:{required:true,phonenumber:true},field6:{required:true},field3:{required:true}},messages:{field1:{required:Venda.Validate.msg.name,maxlength:jQuery.format(Venda.Validate.msg.max_length+" {0}")},from:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},field2:{required:Venda.Validate.msg.phone,phonenumber:Venda.Validate.msg.phone_valid},field6:Venda.Validate.msg.rank,field3:Venda.Validate.msg.review},submitHandler:function(form){Venda.Ebiz.fixRarelyFrChar(form);Venda.Ebiz.ExecuteDialogOpen();},errorPlacement:Venda.Validate.errorPlacement});});jQuery('body').bind('tellafriendform-loaded',function(){jQuery('#tellafriendform').validate({rules:{fname:{required:true,maxlength:30},email3:{required:true,newEmail:true,email:false},email:{required:true,newEmail:true,email:false},email2:{required:true,newEmail:true,equalTo:'#email',email:false},field1:{maxlength:250}},messages:{fname:{required:Venda.Validate.msg.name,maxlength:jQuery.format(Venda.Validate.msg.max_length+" {0}")},email3:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},email:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},email2:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild,equalTo:Venda.Validate.msg.verify_email_match},field1:jQuery.format(Venda.Validate.msg.max_length+" {0}")},submitHandler:function(form){Venda.Ebiz.fixRarelyFrChar(form);Venda.Ebiz.ExecuteDialogOpen();}});Venda.Validate.charactersCount(jQuery('.js-textMsgCount'));});!function($){function ecURI(str){return escape(str).replace(/\+/g,'%2B');}
$.paramLatin=function(a){var s=[];$.each(a,function(i,kv){s[s.length]=ecURI(kv.name)+"="+ecURI(kv.value);});return s.join("&").replace(/%20/g,'+');};$.fn.serialiserLatin=function(){return $.paramLatin(this.serializeArray());};}(window.jQuery);Venda.Validate.validateAddressForm=function(submitHandlerCallBack){if(typeof(submitHandlerCallBack)==='undefined'){submitHandlerCallBack=false;}
jQuery('form[name=billingaddressaddform],form[name=addressbookform],form[name=billingaddresseditform],form[name=deliveryaddressaddform],form[name=deliveryaddresseditform],form[name=ssoaddressform]').validate({rules:{fname:{required:true,validateName:true,maxlength:30},lname:{required:true,validateName:true,maxlength:30},cntry:{required:true},company:{validateAddress:true},num:{required:true,validateAddress:true},addr1:{required:true,validateAddress:true},addr2:{validateAddress:true},city:{required:true,validateAddress:true},state:{required:true,validateAddress:true},zipc:{required:true,validateZipc:true},zcdropdown:{required:true},phone:{required:true,maxlength:20,phonenumber:true},addrname:{validateAddress:true},usemail:{required:true,newEmail:true,email:false},uspswd:{required:true,minlength:7,maxlength:15},uspswd2:{required:true,minlength:7,maxlength:15,equalTo:'#uspswd'},uspswd0:{required:true,minlength:7,maxlength:15},ustandc:{required:true}},messages:{fname:{required:Venda.Validate.msg.fname},lname:{required:Venda.Validate.msg.lname},cntry:{required:Venda.Validate.msg.country},addr1:{required:Venda.Validate.msg.addr1},city:{required:Venda.Validate.msg.city},state:{required:Venda.Validate.msg.state},zipc:{required:Venda.Validate.msg.postcode},zcdropdown:{required:Venda.Validate.msg.postcode_dropdown},phone:{required:Venda.Validate.msg.phone,phonenumber:Venda.Validate.msg.phone_valid},usemail:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},uspswd:{required:Venda.Validate.msg.password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength},uspswd2:{required:Venda.Validate.msg.confirm_password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength,equalTo:Venda.Validate.msg.verify_password_match},uspswd0:{required:Venda.Validate.msg.verify_current_password},ustandc:{required:Venda.Validate.msg.verify_accept_and_continue}},errorPlacement:Venda.Validate.errorPlacement,submitHandler:submitHandlerCallBack});};jQuery('body').bind('contact-loaded',function(){jQuery("#contactForm").validate({rules:{field1:{required:true,newEmail:true,email:false},field2:{required:true},field3:{required:true}},messages:{field1:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},field2:{required:Venda.Validate.msg.nametxt},field3:Venda.Validate.msg.message},submitHandler:function(){Venda.Ebiz.submitFormModal('form');}});});jQuery(function(){jQuery('form[name=emailsonly1],#emailpasswordresetform,#socialfieldsform').validate({rules:{email:{required:true,newEmail:true,email:false}},messages:{email:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild}}});jQuery('#form-passwordreset').validate({rules:{email:{required:true,newEmail:true,email:false}},messages:{email:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild}},submitHandler:function(form){Venda.Checkout.passwordReset();}});jQuery('#passwordresetform').validate({rules:{password:{required:true,minlength:7,maxlength:15},password2:{required:true,minlength:7,maxlength:15,equalTo:'#password'}},messages:{password:{required:Venda.Validate.msg.password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength},password2:{required:Venda.Validate.msg.confirm_password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength,equalTo:Venda.Validate.msg.verify_password_match}}});if(jQuery('#passwordresetform').length){jQuery('#passwordresetform').find('#password, #password2').prop('value','');}
jQuery('#formsolrsearch').validate({rules:{q:{required:true}},messages:{q:{required:Venda.Validate.msg.search}},errorPlacement:function(error,element){}});jQuery('form[name=multipledeliveryaddressesform]').validate({errorPlacement:function(error,element){},submitHandler:function(form){if($(form).find('.address-error').length===0){form.submit();}}});jQuery('form[name=shopcartform]').validate({errorPlacement:function(error,element){}});jQuery("form[name=ordersummaryform-giftcert]").validate({rules:{giftcode:{required:true}},messages:{giftcode:Venda.Validate.msg.giftcert_code},submitHandler:function(form){Venda.Checkout.manualsubmit(form,jQuery('#js-giftcode-waitMsg').text());}});jQuery('form[name=promotionform]').validate({rules:{vcode:{required:true,specialChars:true}},messages:{vcode:{required:Venda.Validate.msg.promo_code}},submitHandler:function(){Venda.Widget.Promotion.checkVoucherForm('add');}});jQuery('#existingcustomer, #sociallinksform').validate({rules:{email:{required:true,newEmail:true,email:false},password:{required:true,maxlength:15}},messages:{email:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},password:{required:Venda.Validate.msg.password,maxlength:Venda.Validate.msg.verify_password_maxlength}},submitHandler:function(form){$(document).trigger('trigger-remember-me-save');form.submit();}});jQuery('#existingcustomer-sidebar').validate({rules:{email:{required:true,newEmail:true,email:false},password:{required:true,maxlength:15}},messages:{email:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild},password:{required:Venda.Validate.msg.password,maxlength:Venda.Validate.msg.verify_password_maxlength}},submitHandler:function(form){$('.login-ajax-errors').html('');var url=new Uri($(form).attr("action"));var param=$(form).find("input, select, textarea").serialize();jQuery.post(url,param,function(data){if($(data).find('#tag-error').length!=0){var msg=($(data).find('#tag-error').html().replace(/<br(.){0,1}>/ig,'||')).split("||");errorArray=[];for(var i=0;i<msg.length;i++){if(jQuery.inArray(msg[i],errorArray)<0){errorArray.push(msg[i]);}}
$('.login-ajax-errors').html(errorArray.join('<br>'));}
else{$(form).find("[name=layout]").remove();$(form)[0].submit();}});$(document).trigger('trigger-remember-me-save');}});jQuery('#socialaddaccountform').validate({rules:{password:{required:true,maxlength:15}},messages:{password:{required:Venda.Validate.msg.password,maxlength:Venda.Validate.msg.verify_password_maxlength}}});jQuery('#reminderform').validate({rules:{usemail:{required:true,newEmail:true,email:false}},messages:{usemail:{required:Venda.Validate.msg.email,newEmail:Venda.Validate.msg.email_vaild}}});jQuery('#dtsform').validate({rules:{fname:{required:true,validateName:true,maxlength:30},lname:{required:true,validateName:true,maxlength:30}},messages:{fname:{required:Venda.Validate.msg.fname},lname:{required:Venda.Validate.msg.lname}}});var addrCookie=new CookieJar({expires:'',path:'/',secure:'secure'});if(jQuery('#billingaddressadd').length){Venda.Validate.validateAddressForm(function(form){addrCookie.put('billing-nextstep',jQuery('#deliverto input[name="step"]:checked').val()||'ordersummary');Venda.Ebiz.fixRarelyFrChar(form);form.submit();});jQuery(window).load(function(){var saved_option=addrCookie.get('billing-nextstep')||'ordersummary';jQuery('#deliverto input[value="'+saved_option+'"]').prop('checked',true);});}else{Venda.Validate.validateAddressForm(function(form){Venda.Ebiz.fixRarelyFrChar(form);form.submit();});addrCookie.remove('billing-nextstep');}
if($('.guest-checkout').length>0){if($('.guest-checkout #uspswd').length>0&&$('.guest-checkout #uspswd2').length>0){var old_uspswd_rules=$('.guest-checkout #uspswd').rules();var old_uspswd2_rules=$('.guest-checkout #uspswd2').rules();}
if($('.guest-checkout #registerme').length>0&&!$('.guest-checkout #registerme').is(':checked')){$('.guest-checkout #uspswd').rules('remove');$('.guest-checkout #uspswd2').rules('remove');}
$(document).on('change','.guest-checkout #registerme',function(){if($('.guest-checkout #registerme').is(':checked')){$('.guest-checkout [name=ustype]').val('R');$('.guest-checkout .registerme-box').slideDown('300');$('.guest-checkout #uspswd').focus().rules('add',old_uspswd_rules);$('.guest-checkout #uspswd2').rules('add',old_uspswd2_rules);}
else{$('.guest-checkout [name=ustype]').val('P');$('.guest-checkout .registerme-box').slideUp('300');$('.guest-checkout #uspswd').val('').rules('remove');$('.guest-checkout #uspswd2').val('').rules('remove');}});}
if(jQuery('form[name=ordersummaryform]').length>0){var $paypalinput=jQuery('#payment_id'),$creditinput=jQuery('#creditcard'),$cardDetial=jQuery('.card-detail-section , .billing-addr-detail'),$dontsavecc=jQuery('#dontsavecc'),$dontsaveccopt=jQuery('#dontsaveccopt'),$credit=jQuery('.credit');jQuery('#creditcard, .creditcardimage').click(function(){jQuery('.payment-type .errorMsg').html('');if($creditinput.hasClass('active')===false){$paypalinput.removeAttr('checked');$creditinput.addClass('active');$creditinput.prop('checked',true);$creditinput.attr('checked','checked');$cardDetial.show();$credit.addClass('active');Venda.Ebiz.select2.refresh('#paymentdetails');$('.f-credit').addClass('active');}});jQuery('#payment_id, .f-alternatives img').click(function(){jQuery('.payment-type .errorMsg').html('');$paypalinput.prop('checked',true);$paypalinput.attr('checked','checked');if($creditinput.hasClass('active')){$creditinput.removeClass('active');$creditinput.removeAttr('checked');$cardDetial.hide();$credit.removeClass('active');}});$dontsaveccopt.click(function(){if($dontsaveccopt.is(':checked')){$dontsavecc.val('');$dontsavecc.removeAttr('checked');}else{$dontsavecc.val('1');$dontsavecc.prop('checked',true);$dontsavecc.attr('checked','checked');}});Venda.Validate.paytypes();jQuery('input[name=payment_id], input[name=ohpaytype], .creditcardimage, #paypallogo').click(function(){Venda.Validate.paytypes();});}
if(jQuery('form[name=storelocatorform]').length>0){Venda.Validate.storelocator();jQuery('#storelocatorform').on('click','#pcsubmit',function(){Venda.Validate.storelocator();});}
jQuery('form[name=ordersummaryinstoreform]').validate({rules:{orxorxteposref:{required:true}}});});function testUKPostcode(value){if((/^(GIR[ |-]?0AA)$|^([A-PR-UWYZ][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][0-9][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][A-HK-Y0-9][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][A-HK-Y0-9][0-9][0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][0-9][A-HJKS-UW0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$|^([A-PR-UWYZ][A-HK-Y0-9][0-9][ABEHMNPRVWXY0-9][ |-]?[0-9][ABD-HJLNPQ-UW-Z]{2})$/i).test(value)){if((/^(JE|KY|GX|GY)/i).test(value))return false;else if((/^([A-Z][A-Z][ |-]?[0-9][0-9][0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][ |-]?[0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][ |-]?[A-Z][A-Z])$/i).test(value))return false;else if((/^([A-Z][A-Z][0-9][ |-]?[0-9][0-9][0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][A-Z][ |-]?[0-9][0-9][0-9])$/i).test(value))return false;else if((/^([A-Z][A-Z][A-Z][A-Z][ |-]?[0-9][A-Z][A-Z])$/i).test(value))return false;else return true;}else return false;}
Venda.Validate.storelocator=function(){var $this=jQuery('#address');if($this.val()===$this.attr('placeholder')){$this.val('');}
jQuery('form[name=storelocatorform]').validate({rules:{address:{required:true}}});};Venda.Validate.restrictDelivery=function(){var restrictCntry=$.trim($('#tag-delivery_address-restrict-cntry').text()),invalid_cntry=false;$('.invalid-pkcntry0').remove();$('.invalid-pkzipc0').remove();$('.invalid-bill').remove();var fr_restrict_zipc=new RegExp(/^(98|971|972|973|974|977|978)/);jQuery('.deilivery_box').each(function(){var cntry=$(this).data('cntry'),zipc=$(this).data('zipc');if(cntry!==restrictCntry){invalid_cntry=true;}else{if(cntry==='France'&&fr_restrict_zipc.test(zipc)){invalid_cntry=true;}}});if(invalid_cntry){$('#ordersummary .main-header').next()
.prepend('<div class="mobile-padding"><h2 class="invalid-pkcntry0 alert-box alert radius">'+$('#tag-pkcntry0').html()+'</h2></div>');window.scrollTo(0,$('#ordersummary .main-header').offset().top);return false;}
if(jQuery('#js-pkcntry0').text()=="United Kingdom"&&!testUKPostcode(jQuery('#js-pkzipc0').text())){if(jQuery('#js-pkzipc0').text()=="Empty"){$('#ordersummary .main-header').next()
.prepend('<div class="mobile-padding"><h2 class="invalid-pkzipc0 alert-box alert radius">'+$('#tag-ship-incomplete-social-account').html()+'</h2></div>');}else{$('#ordersummary .main-header').next()
.prepend('<div class="mobile-padding"><h2 class="invalid-pkzipc0 alert-box alert radius">'+$('#tag-pkzipc0').html()+'</h2></div>');}
window.scrollTo(0,$('#ordersummary .main-header').offset().top);return false;}
if(jQuery('#js-ohaddr1').text()=="Empty"||jQuery('#js-ohzipc').text()=="Empty"||jQuery('#js-ohcity').text()=="Empty"){$('#ordersummary .main-header').next()
.prepend('<div class="mobile-padding"><h2 class="invalid-bill alert-box alert radius">'+$('#tag-bill-incomplete-social-account').html()+'</h2></div>');window.scrollTo(0,$('#ordersummary .main-header').offset().top);return false;}
return true;};Venda.Validate.paytypes=function(){jQuery('.payment-type .errorMsg').empty();jQuery('form[name=ordersummaryform]').off('submit');jQuery('form[name=ordersummaryform]').data('validator',null);jQuery('form[name=ordersummaryform]').unbind('validate');if(jQuery('#creditcard').is(':checked')===true){jQuery('form[name=ordersummaryform]').validate({rules:{ohccnum:{required:true},ohccname:{required:true},month:{required:true,cardexpiry:true},year:{required:true,cardexpiry:true},ohcccsc:{required:true,number:true,rangelength:[3,4]}},groups:{expirydate:'month year'},messages:{ohccnum:{required:Venda.Validate.msg.credit_card_number},ohccname:Venda.Validate.msg.credit_card_name,month:{required:Venda.Validate.msg.credit_card_expired,min:Venda.Validate.msg.credit_card_expired,cardexpiry:Venda.Validate.msg.credit_card_expired},year:{required:Venda.Validate.msg.credit_card_expired,cardexpiry:Venda.Validate.msg.credit_card_expired},ohcccsc:{required:Venda.Validate.msg.security_code,rangelength:Venda.Validate.msg.security_code_length}},errorPlacement:Venda.Validate.errorPlacement,submitHandler:function(form){var is_pass=Venda.Validate.restrictDelivery();if(is_pass&&!jQuery(form).is('.submitted')){jQuery(form).addClass('submitted');form.submit();}}});jQuery('form[name=ordersummaryform]').validate().currentForm=jQuery('form[name=ordersummaryform]')[0];}else if(jQuery('#giftcardpayment').is(':checked')===true){jQuery('form[name=ordersummaryform]').data('validator',null);jQuery('form[name=ordersummaryform]').validate({rules:{card_id:{required:true,number:true},security_code:{required:true,number:true},payment_amount:{required:true,number:true}},messages:{card_id:{required:Venda.Validate.msg.giftcard_id},security_code:{required:Venda.Validate.msg.giftcard_code},payment_amount:{required:Venda.Validate.msg.giftcard_amount}},errorPlacement:Venda.Validate.errorPlacement});jQuery('form[name=ordersummaryform]').validate().currentForm=jQuery('form[name=ordersummaryform]')[0];}else if(jQuery('#bankpayment').is(':checked')===true){jQuery('form[name=ordersummaryform]').data('validator',null);jQuery('form[name=ordersummaryform]').validate({rules:{accountnumber:{required:true,number:true},accountname:{required:true},sortcode:{required:true,number:true}},messages:{accountnumber:{required:Venda.Validate.msg.bank_accountnumber},accountname:{required:Venda.Validate.msg.bank_accountname},sortcode:{required:Venda.Validate.msg.bank_sortcode}},errorPlacement:Venda.Validate.errorPlacement});jQuery('form[name=ordersummaryform]').validate().currentForm=jQuery('form[name=ordersummaryform]')[0];}else{var validatedform=jQuery('form[name=ordersummaryform]').validate();validatedform.resetForm();validatedform.currentForm='';jQuery('form[name=ordersummaryform]').on('submit',function(event){if(jQuery('input[name="payment_id"]:checked').length===0){event.preventDefault();jQuery('.payment-type .errorMsg').html('<p>'+$('#js-payment-requires').text()+'</p>');}else{var passvalidation=Venda.Validate.restrictDelivery();if(!passvalidation){event.preventDefault();}}});}};jQuery('body').bind('tl_user-myform-loaded',function(){jQuery('#tl_user-myform form[name=formemailpswd]').validate({rules:{fname:{required:true,validateName:true,maxlength:30},lname:{required:true,validateName:true,maxlength:30},tmp_new_email:{required:{depends:function(element){return(jQuery('#tmp_cf_email').val()!==''||jQuery('#tmp_uspswd3').val()!=='');}}},tmp_cf_email:{required:{depends:function(element){return(jQuery('#tmp_new_email').val()!==''||jQuery('#tmp_uspswd3').val()!=='');}},equalTo:'#tmp_new_email'},tmp_uspswd3:{required:{depends:function(element){return(jQuery('#tmp_new_email').val()!==''||jQuery('#tmp_cf_email').val()!=='');}},minlength:7,maxlength:15,equalTo:{param:'#tmp_uspswd0',depends:function(element){return(jQuery('#tmp_new_email').val()!==''&&jQuery('#tmp_uspswd').val()!=='');}}},tmp_uspswd0:{required:{depends:function(element){return(jQuery('#tmp_uspswd').val()!==''||jQuery('#tmp_uspswd2').val()!=='');}},minlength:7,maxlength:15},tmp_uspswd:{required:{depends:function(element){return(jQuery('#tmp_uspswd0').val()!==''||jQuery('#tmp_uspswd2').val()!=='');}},minlength:7,maxlength:15},tmp_uspswd2:{required:{depends:function(element){return(jQuery('#tmp_uspswd0').val()!==''||jQuery('#tmp_uspswd').val()!=='');}},minlength:7,maxlength:15,equalTo:'#tmp_uspswd'}},messages:{fname:{required:Venda.Validate.msg.fname},lname:{required:Venda.Validate.msg.lname},tmp_new_email:{required:Venda.Validate.msg.new_email},tmp_cf_email:{required:Venda.Validate.msg.confirm_new_email,equalTo:Venda.Validate.msg.verify_email_match},tmp_uspswd3:{required:Venda.Validate.msg.password_edit_into,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength,equalTo:Venda.Validate.msg.verify_current_password_match},tmp_uspswd0:{required:Venda.Validate.msg.password_edit_into,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength},tmp_uspswd:{required:Venda.Validate.msg.password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength},tmp_uspswd2:{required:Venda.Validate.msg.confirm_password,minlength:Venda.Validate.msg.verify_password_minlength,maxlength:Venda.Validate.msg.verify_password_maxlength,equalTo:Venda.Validate.msg.verify_password_match}},errorPlacement:function(error,element){if(element.next().hasClass('pswdInstruct')){$(element).next().after(error);}else{error.insertAfter(element);}},submitHandler:function(form){jQuery('.js-modalContent').prepend('<div class="myAccLoading" style="height:'+jQuery('#vModal').outerHeight()+'px">'+jQuery(".js-modal-loading").html()+'</div>');var $newemail=jQuery('#tmp_new_email'),$uspswd=jQuery('#tmp_uspswd'),$uspswd2=jQuery('#tmp_uspswd2'),$uspswd0=jQuery('#tmp_uspswd0'),$uspswd3=jQuery('#tmp_uspswd3');if($newemail.val()!==''){jQuery('input[name=usemail]').val($newemail.val());if($uspswd0.val()===''||$uspswd2.val()===''||$uspswd.val()===''){jQuery('input[name=uspswd], input[name=uspswd2], input[name=uspswd0]').val($uspswd3.val());}else{jQuery('input[name=uspswd]').val($uspswd.val());jQuery('input[name=uspswd2]').val($uspswd2.val());jQuery('input[name=uspswd0]').val($uspswd0.val());}}else{jQuery('input[name=uspswd]').val($uspswd.val());jQuery('input[name=uspswd2]').val($uspswd2.val());jQuery('input[name=uspswd0]').val($uspswd0.val());}
jQuery(form).find('input[name*=tmp_]')
.attr('disabled','disabled')
.css({'background-color':'#fff'});Venda.Ebiz.ExecuteDialogOpen();}});});jQuery('body').bind('tl_user-myform-billaddr-loaded',function(){jQuery('#tl_user-myform form.js-custom, #tl_user-myform form.js-custom-2, #addressbookedit form.addressform, #addressbookadd form.addressform').validate({rules:{fname:{required:true,validateName:true,maxlength:30},lname:{required:true,validateName:true,maxlength:30},cntry:{required:true},company:{validateAddress:true},num:{required:true,validateAddress:true},addr1:{required:true,validateAddress:true},addr2:{validateAddress:true},city:{required:true,validateAddress:true},state:{required:true,validateAddress:true},zipc:{required:true,validateZipc:true},zcdropdown:{required:true},phone:{required:true,maxlength:20,phonenumber:true},addrname:{validateAddress:true}},messages:{fname:{required:Venda.Validate.msg.fname},lname:{required:Venda.Validate.msg.lname},cntry:{required:Venda.Validate.msg.country},addr1:{required:Venda.Validate.msg.addr1},city:{required:Venda.Validate.msg.city},state:{required:Venda.Validate.msg.state},zipc:{required:Venda.Validate.msg.postcode},zcdropdown:{required:Venda.Validate.msg.postcode_dropdown},phone:{required:Venda.Validate.msg.phone,phonenumber:Venda.Validate.msg.phone_valid}},errorPlacement:Venda.Validate.errorPlacement,submitHandler:function(form){jQuery('.js-modalContent').prepend('<div class="myAccLoading" style="height:'+jQuery('#vModal').outerHeight()+'px">'+jQuery(".js-modal-loading").html()+'</div>');Venda.Ebiz.fixRarelyFrChar(form);Venda.Ebiz.ExecuteDialogOpen();}});if(jQuery('select#cntrylist').length>0){Venda.CountrySelect.Init();}
$('#js-manual-reset-btn, #js-manual-error-btn').click(function(){Venda.AddressLookup.manualFormReset();setTop();});$('#js-lookup-reset-btn').click(Venda.AddressLookup.lookupFormReset);$('#js-lookup-submit-btn').click(Venda.AddressLookup.lookupSubmit);$('#zipc').on('keypress',function(e){if((e.which===13)&&$('#js-lookup-submit-btn').is(':visible')){Venda.AddressLookup.lookupSubmit(e);}});});jQuery('body').bind('giftwrappingform-loaded',function(){if(jQuery('form[name=giftwrappingform]').length>0){jQuery('form[name=giftwrappingform]').validate();Venda.Validate.charactersCount(jQuery('.js-textMsgCount'));}});Venda.namespace('Platform.Checkout.jsContent');Venda.namespace('Checkout');Venda.Platform.Checkout.jsContent.create=function(swapid,tags){Venda.Platform.Checkout.jsContent.tags=tags;if(!document.getElementById||!document.createTextNode){return;}
var nojsmsg=document.getElementById(swapid);if(!nojsmsg){return;}
switch(swapid){case'differentdeliveryaddress':var newDiv=document.createElement('div');var newInput=document.createElement('input');newInput.type='checkbox';newInput.setAttribute('name','differentaddress');newInput.id='differentaddress';var label=document.createElement('label');label.setAttribute('for','differentaddress');label.appendChild(document.createTextNode(Venda.Platform.Checkout.jsContent.tags.label));newDiv.appendChild(newInput);newDiv.appendChild(label);newDiv.appendChild(document.createTextNode(' '+Venda.Platform.Checkout.jsContent.tags.message));nojsmsg.parentNode.replaceChild(newDiv,nojsmsg);break;}};function noSingleQuotes(formName){for(i=0;i<(formName.elements.length);i++){if(((formName.elements[i].type==="textarea")||(formName.elements[i].type==="text"))&&(formName.elements[i].value!="")){formName.elements[i].value=formName.elements[i].value.replace(/'/gi,'');}}};Venda.Checkout.initialDTS=function(dtsenabled){var dtsOption=".dts";var defaultOption="";if(dtsenabled==1){if(jQuery(".js-deliveryoptions").find(dtsOption).length){if(jQuery(".js-storeaddress").length){jQuery(".js-storeaddress").each(function(){if(!jQuery(this).find(dtsOption).attr('checked')){jQuery(this).find(dtsOption).attr('checked',true).trigger("click");}
jQuery(this).find("input:not(:checked)").each(function(){jQuery(this).attr("disabled","disabled");});});}
if(jQuery(".js-homeaddress").length){jQuery(".js-homeaddress").each(function(){if(jQuery(this).find(dtsOption).attr('checked')){jQuery(this).find('li input').not(dtsOption).eq(0).attr('checked',true).trigger("click");}
jQuery(this).find(dtsOption).attr("disabled","disabled");});}}}else{if(jQuery(".js-deliveryoptions").find(dtsOption).length){jQuery(".js-deliveryoptions").find(dtsOption).parents('li').hide();}}};Venda.Checkout.manualsubmit=function(formobj,msg){if(msg==''){msg=jQuery('#js-default-waitMsg').text();}
jQuery('#js-modal-style span').html(msg);$('#js-modal-style').on('opened',function(){formobj.submit();});jQuery('#js-modal-style').foundation('reveal','open');};Venda.Checkout.cleanUp=function(formSelector){var email=jQuery(formSelector+" #email").val();if(email!==""){if((email.substring(0,1)==="<")||(email.substring(0,4)==="user")){jQuery(formSelector+" #email").val("");}}
if(jQuery(formSelector+" #password").val()!==""){jQuery(formSelector+" #password").val("");}};Venda.Checkout.passwordReset=function(formSelector){var el=jQuery('#passwordresetemail');var emailadd={email:el.val()};jQuery.getJSON('/ajax/password-reset',emailadd,function(result){jQuery.each(result,function(key,value){if(key==='results'){jQuery('#passwordreset #feedback').html('<p><a class="icon-close1 icon-large right"></a>'+jQuery('#tag-validation_password_reset').html()+'</p>');jQuery('#passwordresetaddress').text('\''+emailadd.email+'\'');jQuery('#passwordreset').find('div:first').hide();}
if(key==='errors'){jQuery.each(value,function(errorkey,errorval){el.addClass('js-validateError').after('<span for="passwordresetemail" class="js-validateError" style="display: block;">'+errorval.msg+'</span>');});}});});};Venda.Checkout.errorFormatting=function(){var stateLabel=jQuery('#stateLabel').text().split(':')[0];var houseNum=jQuery('#houseNum').find('label').text().split(':')[0];jQuery('.addressform-error').html(function(){var msg=jQuery(this).html()
.replace(/"/g,'')
.replace(/house\sname\s\\\snumber/g,houseNum);jQuery(this).html(msg);}).show();};Venda.Checkout.encodeGiftMsg=function(msg){msg=msg.replace(/\u0132/g,'IJ');msg=msg.replace(/\u0133/g,'ij');msg=msg.replace(/\u0152/g,'OE');msg=msg.replace(/\u0153/g,'oe');msg=msg.replace(/\u0178/g,'Y');msg=msg.replace(/(\u20ac||\u0080)/g,'&euro;');return msg.replace(/\r\n|\r|\n/g,'<br>');};Venda.Checkout.decodeGiftMsg=function(msg){return msg.replace(/\<br\>/g,'\n').replace(/\<br \/\>/g,'\n');};jQuery(function(){jQuery(document).bind('setCountry-loaded',function(){Venda.Checkout.errorFormatting();});if(jQuery('#orderdetail').length>0){if(jQuery('#orderdetail').find('.alert-box').length>0){var errorMsg=jQuery('#orderdetail').find('.alert-box').html();jQuery('#orderdetail').find('.prod-name').each(function(){errorMsg=errorMsg.replace(jQuery(this).data('ref'),jQuery(this).text());});jQuery('#orderdetail').find('.alert-box').show().html(errorMsg);}}
$('.cvvnumberLink a').mouseenter(function(){if($(this).data('panel')){$('.panel').hide();$('#'+$(this).data('panel')).fadeIn();}});$('.cvvnumberLink').mouseleave(function(){$('.panel').fadeOut();});jQuery(document).on('click','#passwordresetreveal',function(){var email=jQuery('#email').val();if(email!==''){jQuery('#passwordresetemail').val(email);}
jQuery('#passwordreset').toggleClass('passwordresetdown');if(jQuery('#passwordreset').hasClass('passwordresetdown')){jQuery('#passwordreset #feedback a').trigger('click');}});jQuery('#passwordreset #feedback').on('click','a',function(){jQuery('#passwordresetemail').val('');jQuery('#passwordreset #feedback').html('');jQuery('#passwordreset').find('div:first').show();});var loginForm="#existingcustomer";var onLogin=jQuery(loginForm).length;if(onLogin>0){Venda.Checkout.cleanUp(loginForm);};jQuery(document).on('click','a#passwordreminder',function(){var email=jQuery('input#email').val();if(email){jQuery('a#passwordreminder').attr('href',function(i,val){return val+'&param1='+email});}});jQuery(document).on('click','a#cancelreminder',function(){var email=jQuery('input#usemail').val();if(email){jQuery('a#cancelreminder').attr('href',function(i,val){return val+'&param1='+email+'&param2=passwordcancel'});}});jQuery(document).on('click','input#passwordsent',function(){var email=jQuery('input#usemail').val();if(email){jQuery('input[name=param1]').val(email);}});if(jQuery(".js-shopcart").length>0){jQuery('form[name=shopcartform]').on('keypress','.js-qty',function(event){if(event.which=='13'){jQuery('#update'+jQuery(this).attr('name')).trigger('click');return false;}});jQuery('form[name=shopcartform]').on("click","a.js-update",function(){jQuery('form[name=shopcartform] input[name=wizard]').val(jQuery('#tag-workflow').text());jQuery('form[name=shopcartform] input[name=step]').val(jQuery('#tag-curstep').text());jQuery('form[name=shopcartform]').submit();return false;});jQuery('form[name=shopcartform]').on("click","a.js-removeItem",function(){jQuery.cookie('removeItem','',{expires:1,path:'/'});var prod=$(this).parents('.prod-details');var sku={outofstock:0,name:'',size:'',color:''}
sku.name=prod.find('.prod-name').text();sku.size=prod.find('.value:eq(0)').text().toLowerCase();sku.color=prod.find('.value:eq(1)').text().toLowerCase();var outList=sku.name+' ('+sku.size+', '+sku.color;jQuery.cookie('removeItem',outList,{expires:1,path:'/'});var line=jQuery(this).attr("data-line");var wizard=jQuery(this).attr("data-wizard");jQuery("input[name='"+line+"']").val(1);jQuery("input[name='wizard']").val(wizard);jQuery('form[name=shopcartform]').submit();});}
if(jQuery("#ohccnum").length>0){Venda.Platform.SelectBoxToggle('cardtype','directdebitsde',['expiryshow','ohcccscshow','switchsolo','issuenumber','startdateshow','ohccnum-label'],['sortcodeshow','ohccnum-elv-label'],80);};if(jQuery("#ohcccsc").length>0){Venda.Platform.SelectBoxToggle('cardtype','directdebitsde',['expiryshow','ohcccscshow','switchsolo','issuenumber','startdateshow','ohccnum-label'],['sortcodeshow','ohccnum-elv-label'],80);};jQuery("#paymentdetails").on("click",".js-changecard",function(){if(!jQuery(this).is('.active')){jQuery("#cardpreviewpanel").hide();}});jQuery("#multipledeliveryaddresses").on("click","#updatequantities",function(){jQuery("input[type=hidden][name=param2]").val("updated");jQuery("input[type=hidden][name=step]").val("multipledeliveryaddresses");});jQuery('form[name=ordersummaryform-giftcert]').on('keypress','#giftcode',function(event){if(event.which=='13'){jQuery('#js-applygiftcode').trigger('click');return false;}});Venda.Ebiz.customSelect();jQuery('input[name*="shipmethod_"]').click(function(){Venda.Checkout.manualsubmit(jQuery('#'+(this).form.id),jQuery('#js-deliver-waitMsg').text());});if(jQuery('.js-dtsenabled').length>0){Venda.Checkout.initialDTS(jQuery('.js-dtsenabled').html());}
if(jQuery('#ordersummary .js-downloadProduct, #orderreceipt .js-downloadProduct').length>0){jQuery('.js-downloadProduct').parents('.js-productItem').find('.js-downloadText').show();jQuery('.js-downloadProduct').parents('.js-productItem').find('.js-giftcertText').hide();jQuery('.js-downloadProduct').parents('.js-productItem').find('a.prod-gift-wrap-item').hide();jQuery('.js-downloadProduct').parents('.js-productItem').find('a.prod-diff-ship-item').hide();}
phonePanel();});!function($){$(document).on('giftwrap.init',function(){var currentprod=$('#giftwrapping').data('currentprod')||"",oirfnbrList=[];if(currentprod==="")return false;$('.js-qw-group-'+currentprod).each(function(){oirfnbrList.push($(this).data('oirfnbr'));});oirfnbrList.sort();for(var i=0;i<oirfnbrList.length;i++){jQuery('.js-gw-'+oirfnbrList[i]).appendTo('.giftwrap-list');}
$('.js-wrapdetail').each(function(){var text_c=$(this).data('gwname');text_c=text_c.replace(/[^0-9a-zA-Z]/ig,'-');$(this).attr('data-gwname',text_c);});$('.js-gw-group').each(function(){var titleNum=1,$packageItems=null,selectedPackage='',$noteItems='',giftMessage='',blankNoteText='';$(this).find('.section-title .num').html(function(){return(titleNum++).toString()+". ";});$packageItems=$('.package-items',this);if($packageItems.length>0){selectedPackage=$('.package-options select').val();$('.package-options select option',this).each(function(){var name=$(this).parent().attr('name'),value=this.value
text=$(this).text(),text_c=text.replace(/[^0-9a-zA-Z]/ig,'-'),gwdata=$('.js-wrapdetail[data-gwname="'+text_c+'"]');if(value!=""){text=text+" ("+gwdata.find('.js-gwsell').text()+")";if(gwdata.find('.js-gwimg img').length>0){text=text+'<img class="gw-img" src="'+gwdata.find('.js-gwimg img').attr('src')+'">';}
if(selectedPackage===value){$packageItems.prepend('<li><label class="radiobox"><input type="radio" name="'+name+'" value="'+value+'" checked>'+text+'</label></li>');}else{$packageItems.prepend('<li><label class="radiobox"><input type="radio" name="'+name+'" value="'+value+'">'+text+'</label></li>');}}});if(selectedPackage===""){$packageItems.find('input.nowrap').prop('checked',true);}}
$noteItems=$('.note-section',this);if($noteItems.length>0){$noteItems.on('change','input[type="radio"]',function(){$noteItems.find('.personalized-note-input textarea').prop('value',$(this).data('default'));if(this.value==="personalized-note"&&$(this).prop('checked')){$noteItems.find('.personalized-note-input').show();}else{$noteItems.find('.personalized-note-input').hide();}});giftMessage=$noteItems.find('textarea').val();blankNoteText=$noteItems.find('.blank-note input').data('default');if(giftMessage===""){$('.no-note input',this).prop('checked',true);$noteItems.find('.personalized-note-input').hide();}else if(giftMessage===blankNoteText){$('.blank-note input',this).prop('checked',true);$noteItems.find('.personalized-note-input').hide();}else{$('.personalized-note input',this).prop('checked',true);$noteItems.find('.personalized-note-input').show();}}});$('.js-qw-group-'+currentprod).show();if($('#gwModal').is(':visible')){$('#gwModal').find('#buttons .secondary').on('click',function(e){e.preventDefault();$('#gwModal').foundation('reveal','close');});$('form#giftwrap').on('submit',function(e){var validatedform=jQuery('form#giftwrap').validate();validatedform.currentForm='';$('.personalized-note-input textarea').each(function(){var newMessage=Venda.Checkout.encodeGiftMsg($(this).val());$(this).val(newMessage);});Venda.Ebiz.fixRarelyFrChar(this);var formParams=$(this).serialiserLatin(),formAction=$(this).attr('action'),reloadURL=$('#js-gw-orderconfirm-url').text();e.preventDefault();$('#gwModal').find('.js-modalContent').html(jQuery(".js-modal-loading").html());$('#gwModal').foundation('reveal','reposition');$('#gwModal').addClass('loading');$.ajax({type:"POST",url:formAction,dataType:"html",data:formParams,cache:false,error:function(){$('#gwModal').find(".js-modalContent").html('Error!');},success:function(data){window.location.href=reloadURL;}});});}});if($("#giftwrap").length>0){$(document).trigger('giftwrap.init');}
if($("#ordersummary").length>0){$('.js-update-giftwrap').on('click',function(){var modal=$('#gwModal').addClass('small'),loadURL=this.href||$(this).parent().find('a').attr('href')||"";if(loadURL===""){return false;}
$('#gwModal').find('.js-modalContent').html(jQuery(".js-modal-loading").html());$('#gwModal').addClass('loading');modal.foundation('reveal','open');$('html, body').animate({scrollTop:0},{duration:500,complete:function(){modal.foundation('reveal','reposition');}});$('body').addClass('gw-modal-open');jQuery.get(loadURL+"&layout=noheaders",function(data){jQuery('#gwModal .js-modalContent')
.empty().html(data).append('<div class="modal-load-url" style="display: none;">'+encodeURI(loadURL)+'</div>')
.end()
.find('.personalized-note-input textarea').each(function(){var newMessage=Venda.Checkout.decodeGiftMsg($(this).val());$(this).val(newMessage);});$('#gwModal').css('top',165).removeClass('loading');});return false;});$(document).on('closed','#gwModal',function(){$('body').removeClass('gw-modal-open');});var hideprice=$.cookie('hideprice')||"";if(hideprice=="on"){$('#set_orxorxtencodeprice').val('on');$('#mockorxtencodeprice').prop('checked',true);}
$('#mockorxtencodeprice').on('change',function(){$.cookie('hideprice',$('#mockorxtencodeprice').is(':checked')?'on':'off');$('#set_orxorxtencodeprice').val($('#mockorxtencodeprice').is(':checked')?'on':'');});}
if($("#orderreceipt").length>0){$.cookie('hideprice','');}
if($('#ordersummary').length>0||$('#orderreceipt').length>0){$('.prod-details').find('.oicmt-message').each(function(){$(this).html($(this).text());});}}(window.jQuery);!function($){var submitHandler=function(form){var $modal=$('#vModal'),$form=$(form),params="",URL=Venda.Ebiz.doProtocal($form.attr('action'));Venda.Ebiz.fixRarelyFrChar(form);params=$form.find('input, select, textarea').serialiserLatin()
jQuery.ajax({type:'POST',url:URL,dataType:'html',data:params,cache:false})
.fail(function(){$modal.foundation('reveal','close');})
.error(function(jqXHR,status,error){$modal.find('.js-modalContent').html('Error!');})
.done(function(data){addressFormLoaded(data);});};var replaceAddressOptions=function(options,itemid){var $select=$('#multipledeliveryaddressesform').find('select[name^="oiabsel-"]');$select.each(function(){var selected=$(this).val();$(this).html(options);if(this.name==='oiabsel-'+itemid){selected=$(this).find('option[data-selected="1"]').prop('value');}
$(this).prop('value',selected).trigger('change');Venda.Ebiz.select2.updateTitle($(this));});};var addressFormLoaded=function(data){var $modal=$('#vModal'),itemid=$modal.data('itemid'),addrOption='';$modal.find('.js-modalContent').empty().html(data);$modal.find('.close-reveal-modal').show()
.end()
.foundation('reveal','reposition');if($modal.find('#existingcustomer').length>0||($modal.find('#addressform').length>0&&$modal.find('.user-identity').text()==='')){$modal.find('.js-modalContent').empty().html('Error!');window.location.href=$('#tag-codehttp').text()+'?ex=co_wizr-register';return'';}
Venda.Ebiz.changeCntryName('.selected-country');if($modal.find('form').length>0){Venda.Validate.validateAddressForm(submitHandler);Venda.Ebiz.customSelect();Venda.CountrySelect.Init();Venda.AddressLookup.eventHandler();$modal.find('.cancel-button a').on('click',function(e){e.preventDefault();$modal.foundation('reveal','close');});if($modal.find('.addressform-error').length>0){$modal.find('.addressform-error').insertBefore($modal.find('#addressform'));}
if($modal.find('input[name="curlayout"]').length){$modal.find('input[name="curlayout"]').val('noheaders');}else{$modal.find('form').append('<input type="hidden" name="curlayout" value="noheaders">');}
if($modal.find('input[name="layout"]').length){$modal.find('input[name="layout"]').val('noheaders');}else{$modal.find('form').append('<input type="hidden" name="layout" value="noheaders">');}
$modal.find('input[name="step"]').val('multipledeliveryaddresses');$modal.find('input[name="param1"]').val('delivery');$modal.find('input[name="param2"]').val('add');$modal.find('input[name="param3"]').val('multiaddressajax');$modal.find('input[name="curparam3"]').val('multiaddressajax');}else{$modal.find('.js-modalContent').empty();$modal.foundation('reveal','close');addresses=$.parseJSON(data);for(var i=0,l=addresses.length;i<l;i++){if(typeof(addresses[i].id)!=='undefined'){if(addresses[i].selected===''){addrOption+='<option value="'+addresses[i].id+'" data-cntry="'+addresses[i].cntry+'" data-zipc="'+addresses[i].zipc+'" data-selected="0">'+addresses[i].option.trim()+'</option>';}else{addrOption+='<option value="'+addresses[i].id+'" data-cntry="'+addresses[i].cntry+'" data-zipc="'+addresses[i].zipc+'" data-selected="1">'+addresses[i].option.trim()+'</option>';}}}
if(addrOption!==''){replaceAddressOptions(addrOption,itemid);}}};var addressFormFailed=function(data){var $modal=$('#vModal');$modal.find('.js-modalContent').html('Error!');};$('select.address-option').on('change',function(){var $this=$(this).find('option:selected'),cntry=$this.data('cntry'),zipc=$this.data('zipc'),$parent=$(this).parents('.prod-address-dropdown'),$dropdown=$parent.find('.select2-selection'),errorMsg='',restrictCntry=$.trim($('#tag-delivery_address-restrict-cntry').text()),restrictTertiary=new RegExp(/^(98|971|972|973|974|977|978)/);is_restrictTertiary=false,currentlocation=$('#tag-sessionlocation').text();if(currentlocation==='fra'&&cntry==='France'&&restrictTertiary.test(zipc)){is_restrictTertiary=true;}
$parent.find('.js-address-error').remove();if(cntry!==restrictCntry||is_restrictTertiary){$parent.addClass('address-error');errorMsg=$('#tag-multiple_delivery_address-error').text();$parent.append('<span class="js-address-error">'+errorMsg+'</span>');}else{$parent.removeClass('address-error');}});$('.address-option').trigger('change');$('.js-new-multiple-address').off('click').on('click',function(e){var $modal=$('#vModal'),itemid=$(this).data('itemid'),url=(this.href||'')+'&layout=noheaders';e.preventDefault();url=url.replace('param3=multiaddress','param3=multiaddressajax');$modal.attr('class','reveal-modal');$modal.data('itemid',itemid);$modal.addClass('addDeliAddr');$modal.find('.js-modalContent').html($('.js-modal-loading').html());$modal
.find('.close-reveal-modal').hide()
.end()
.foundation('reveal','open');$('#venda_state').text('');$.ajax({url:url,success:addressFormLoaded,error:addressFormFailed});});}(window.jQuery);function hermesExcludedZip(excludedzip){$('.shipping_box').each(function(i,_package){shipmethod1=$(_package).find('.order-summary-ground input[name*="shipmethod_"]');shipmethod2=$(_package).find('.order-summary-2day input[name*="shipmethod_"]');if($(_package).find('.country-name').text()=="United Kingdom"){zip=$(_package).find('.postal-code').text().replace(/\s/g,'').toLowerCase();$.each(excludedzip,function(index,zippattern){zippattern=new RegExp("^"+zippattern.replace(/\s/g,'').toLowerCase());if(zippattern.test(zip)){shipmethod2.parents('li').hide();if(shipmethod2.is(":checked")){shipmethod1.click();$('#js-modal-style span').html($('#js-deliver-waitMsg').text());$('#js-modal-style').foundation('reveal','open');$(_package).find('form').submit();}
return false;}});}});}
(function(Venda,$){'use strict';Venda.namespace('Widget.Promotion');var options;options={protocol:$('#tag-protocol').html(),codeHttp:$('#tag-codehttp').html(),addMessage:$('#js-promo-waitMsg').text(),delMessage:$('#js-promo-deleteMsg').text(),strCode:'',strCodeInput:''};Venda.Widget.Promotion.checkVoucherForm=function(action,ele){var url,ajaxURL,triggerAction;options.strCode=$.trim($('#vcode').val().toUpperCase());options.strCodeInput=$.trim($('#vcode').val());$('#vcode').val(options.strCode);url=options.codeHttp+'?ex=co_wizr-promocode'+options.protocol+
'&curstep=vouchercode&step=next&mode=process&action='+action;if(action==='add'){ajaxURL=url+'&vcode='+$('#vcode').val();triggerAction='promotion-applied';$('#js-modal-style span').html(options.addMessage);}else{ajaxURL=url+'&basketref='+$(ele).data('basketref')+'&vcode='+$(ele).data('vcode');triggerAction='promotion-deleted';$('#js-modal-style span').html(options.delMessage);}
$('#js-modal-style').foundation('reveal','open');$.ajax({url:ajaxURL,dataType:'html',global:false})
.done(function(result){Venda.Widget.Promotion.response(result,triggerAction);})
.error(function(jqXHR,status,error){console.log(error);});};Venda.Widget.Promotion.response=function(result,triggerAction){var errors,errormsg;errors=$(result).filter('#tag-errors').text();if(errors==='1'){$('#ajax-error').html(result);$('#ajax-error .js-vouchercoderesponse').html().replace(/\<.*/,'');errormsg=$('#ajax-error .js-vouchercoderesponse').html().replace(/\<.*/,'');$('.js-vouchercoderesponse')
.html($('#responsetext').html())
.find('#js-codevalue').text('"'+options.strCodeInput+'"');$('#vcode').val('');$('#js-modal-style').foundation('reveal','close');$('#submitorder').removeAttr('disabled');Venda.Widget.Promotion.checkPromoerror();}else{document.promotionform.submit();$('body').trigger(triggerAction);}};Venda.Widget.Promotion.checkPromoerror=function(){if($('#additionalservices #ajax-error').html()!==''){if($('input[name="vcode"]').val()===''){Venda.Widget.Promotion.setCSSOn();$('input[name="vcode"]').focus();}
$(document).on('keyup blur','input[name="vcode"]',function(){Venda.Widget.Promotion.setCSSOff();$('#additionalservices #ajax-error').html('');});}};Venda.Widget.Promotion.setCSSOn=function(){$('input[name="vcode"]').css({'color':'#FF0000','border':'1px solid #FF0000'});};Venda.Widget.Promotion.setCSSOff=function(){$('input[name="vcode"]').attr('style','');};$(function(){$('form[name=promotionform]').on('keypress','#vcode',function(e){if(e.which==='13'){$('#vcode_submit_shopcart').trigger('click');return false;}});$('form[name=promotionform]').on('click','.js-delete',function(e){e.preventDefault();Venda.Widget.Promotion.checkVoucherForm('delete',this);});});}(Venda,jQuery));/*
 * Foundation Responsive Library
 * http://foundation.zurb.com
 * Copyright 2013, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
var libFuncName=null;if(typeof jQuery==="undefined"&&typeof Zepto==="undefined"&&typeof $==="function"){libFuncName=$;}else if(typeof jQuery==="function"){libFuncName=jQuery;}else if(typeof Zepto==="function"){libFuncName=Zepto;}else{throw new TypeError();}
(function($,window,document,undefined){'use strict';/*
    matchMedia() polyfill - Test a CSS media 
    type/query in JS. Authors & copyright (c) 2012: 
    Scott Jehl, Paul Irish, Nicholas Zakas. 
    Dual MIT/BSD license

    https://github.com/paulirish/matchMedia.js
  */
window.matchMedia=window.matchMedia||(function(doc,undefined){"use strict";var bool,docElem=doc.documentElement,refNode=docElem.firstElementChild||docElem.firstChild,fakeBody=doc.createElement("body"),div=doc.createElement("div");div.id="mq-test-1";div.style.cssText="position:absolute;top:-100em";fakeBody.style.background="none";fakeBody.appendChild(div);return function(q){div.innerHTML="&shy;<style media=\""+q+"\"> #mq-test-1 { width: 42px; }</style>";docElem.insertBefore(fakeBody,refNode);bool=div.offsetWidth===42;docElem.removeChild(fakeBody);return{matches:bool,media:q};};}(document));if(!Array.prototype.filter){Array.prototype.filter=function(fun){"use strict";if(this==null){throw new TypeError();}
var t=Object(this),len=t.length>>>0;if(typeof fun!=="function"){return;}
var res=[],thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun&&fun.call(thisp,val,i,t)){res.push(val);}}}
return res;}}
if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){"use strict";if(this==null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}
var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}
if(n>=len){return-1;}
var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}
return-1;}}
$.fn.stop=$.fn.stop||function(){return this;};window.Foundation={name:'Foundation',version:'4.3.1',cache:{},init:function(scope,libraries,method,options,response,nc){var library_arr,args=[scope,method,options,response],responses=[],nc=nc||false;if(nc)this.nc=nc;this.rtl=/rtl/i.test($('html').attr('dir'));this.scope=scope||this.scope;if(libraries&&typeof libraries==='string'&&!/reflow/i.test(libraries)){if(/off/i.test(libraries))return this.off();library_arr=libraries.split(' ');if(library_arr.length>0){for(var i=library_arr.length-1;i>=0;i--){responses.push(this.init_lib(library_arr[i],args));}}}else{if(/reflow/i.test(libraries))args[1]='reflow';for(var lib in this.libs){responses.push(this.init_lib(lib,args));}}
if(typeof libraries==='function'){args.unshift(libraries);}
return this.response_obj(responses,args);},response_obj:function(response_arr,args){for(var i=0,len=args.length;i<len;i++){if(typeof args[i]==='function'){return args[i]({errors:response_arr.filter(function(s){if(typeof s==='string')return s;})});}}
return response_arr;},init_lib:function(lib,args){return this.trap(function(){if(this.libs.hasOwnProperty(lib)){this.patch(this.libs[lib]);return this.libs[lib].init.apply(this.libs[lib],args);}else{return function(){};}}.bind(this),lib);},trap:function(fun,lib){if(!this.nc){try{return fun();}catch(e){return this.error({name:lib,message:'could not be initialized',more:e.name+' '+e.message});}}
return fun();},patch:function(lib){this.fix_outer(lib);lib.scope=this.scope;lib.rtl=this.rtl;},inherit:function(scope,methods){var methods_arr=methods.split(' ');for(var i=methods_arr.length-1;i>=0;i--){if(this.lib_methods.hasOwnProperty(methods_arr[i])){this.libs[scope.name][methods_arr[i]]=this.lib_methods[methods_arr[i]];}}},random_str:function(length){var chars='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');if(!length){length=Math.floor(Math.random()*chars.length);}
var str='';for(var i=0;i<length;i++){str+=chars[Math.floor(Math.random()*chars.length)];}
return str;},libs:{},lib_methods:{set_data:function(node,data){var id=[this.name,+new Date(),Foundation.random_str(5)].join('-');Foundation.cache[id]=data;node.attr('data-'+this.name+'-id',id);return data;},get_data:function(node){return Foundation.cache[node.attr('data-'+this.name+'-id')];},remove_data:function(node){if(node){delete Foundation.cache[node.attr('data-'+this.name+'-id')];node.attr('data-'+this.name+'-id','');}else{$('[data-'+this.name+'-id]').each(function(){delete Foundation.cache[$(this).attr('data-'+this.name+'-id')];$(this).attr('data-'+this.name+'-id','');});}},throttle:function(fun,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer);timer=setTimeout(function(){fun.apply(context,args);},delay);};},data_options:function(el){var opts={},ii,p,opts_arr=(el.attr('data-options')||':').split(';'),opts_len=opts_arr.length;function isNumber(o){return!isNaN(o-0)&&o!==null&&o!==""&&o!==false&&o!==true;}
function trim(str){if(typeof str==='string')return $.trim(str);return str;}
for(ii=opts_len-1;ii>=0;ii--){p=opts_arr[ii].split(':');if(/true/i.test(p[1]))p[1]=true;if(/false/i.test(p[1]))p[1]=false;if(isNumber(p[1]))p[1]=parseInt(p[1],10);if(p.length===2&&p[0].length>0){opts[trim(p[0])]=trim(p[1]);}}
return opts;},delay:function(fun,delay){return setTimeout(fun,delay);},scrollTo:function(el,to,duration){if(duration<0)return;var difference=to-$(window).scrollTop();var perTick=difference/duration*10;this.scrollToTimerCache=setTimeout(function(){if(!isNaN(parseInt(perTick,10))){window.scrollTo(0,$(window).scrollTop()+perTick);this.scrollTo(el,to,duration-10);}}.bind(this),10);},scrollLeft:function(el){if(!el.length)return;return('scrollLeft' in el[0])?el[0].scrollLeft:el[0].pageXOffset;},empty:function(obj){if(obj.length&&obj.length>0)return false;if(obj.length&&obj.length===0)return true;for(var key in obj){if(hasOwnProperty.call(obj,key))return false;}
return true;}},fix_outer:function(lib){lib.outerHeight=function(el,bool){if(typeof Zepto==='function'){return el.height();}
if(typeof bool!=='undefined'){return el.outerHeight(bool);}
return el.outerHeight();};lib.outerWidth=function(el,bool){if(typeof Zepto==='function'){return el.width();}
if(typeof bool!=='undefined'){return el.outerWidth(bool);}
return el.outerWidth();};},error:function(error){return error.name+' '+error.message+'; '+error.more;},off:function(){$(this.scope).off('.fndtn');$(window).off('.fndtn');return true;},zj:$};$.fn.foundation=function(){var args=Array.prototype.slice.call(arguments,0);return this.each(function(){Foundation.init.apply(Foundation,[this].concat(args));return this;});};}(libFuncName,this,this.document));;(function($,window,document,undefined){'use strict';Foundation.libs.alerts={name:'alerts',version:'4.2.2',settings:{speed:300,callback:function(){}},init:function(scope,method,options){this.scope=scope||this.scope;if(typeof method==='object'){$.extend(true,this.settings,method);}
if(typeof method!=='string'){if(!this.settings.init){this.events();}
return this.settings.init;}else{return this[method].call(this,options);}},events:function(){var self=this;$(this.scope).on('click.fndtn.alerts','[data-alert] a.close',function(e){e.preventDefault();$(this).closest("[data-alert]").fadeOut(self.speed,function(){$(this).remove();self.settings.callback();});});this.settings.init=true;},off:function(){$(this.scope).off('.fndtn.alerts');},reflow:function(){}};}(Foundation.zj,this,this.document));;(function($,window,document,undefined){'use strict';Foundation.libs.tooltips={name:'tooltips',version:'4.2.2',settings:{selector:'.has-tip',additionalInheritableClasses:[],tooltipClass:'.tooltip',appendTo:'body','disable-for-touch':false,tipTemplate:function(selector,content){return'<span data-selector="'+selector+'" class="'
+Foundation.libs.tooltips.settings.tooltipClass.substring(1)
+'">'+content+'<span class="nub"></span></span>';}},cache:{},init:function(scope,method,options){Foundation.inherit(this,'data_options');var self=this;if(typeof method==='object'){$.extend(true,this.settings,method);}else if(typeof options!=='undefined'){$.extend(true,this.settings,options);}
if(typeof method!=='string'){if(Modernizr.touch){$(this.scope)
.on('click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip','[data-tooltip]',function(e){var settings=$.extend({},self.settings,self.data_options($(this)));if(!settings['disable-for-touch']){e.preventDefault();$(settings.tooltipClass).hide();self.showOrCreateTip($(this));}})
.on('click.fndtn.tooltip touchstart.fndtn.tooltip touchend.fndtn.tooltip',this.settings.tooltipClass,function(e){e.preventDefault();$(this).fadeOut(150);});}else{$(this.scope)
.on('mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip','[data-tooltip]',function(e){var $this=$(this);if(/enter|over/i.test(e.type)){self.showOrCreateTip($this);}else if(e.type==='mouseout'||e.type==='mouseleave'){self.hide($this);}});}}else{return this[method].call(this,options);}},showOrCreateTip:function($target){var $tip=this.getTip($target);if($tip&&$tip.length>0){return this.show($target);}
return this.create($target);},getTip:function($target){var selector=this.selector($target),tip=null;if(selector){tip=$('span[data-selector="'+selector+'"]'+this.settings.tooltipClass);}
return(typeof tip==='object')?tip:false;},selector:function($target){var id=$target.attr('id'),dataSelector=$target.attr('data-tooltip')||$target.attr('data-selector');if((id&&id.length<1||!id)&&typeof dataSelector!='string'){dataSelector='tooltip'+Math.random().toString(36).substring(7);$target.attr('data-selector',dataSelector);}
return(id&&id.length>0)?id:dataSelector;},create:function($target){var $tip=$(this.settings.tipTemplate(this.selector($target),$('<div></div>').html($target.attr('title')).html())),classes=this.inheritable_classes($target);$tip.addClass(classes).appendTo(this.settings.appendTo);if(Modernizr.touch){$tip.append('<span class="tap-to-close">tap to close </span>');}
$target.removeAttr('title').attr('title','');this.show($target);},reposition:function(target,tip,classes){var width,nub,nubHeight,nubWidth,column,objPos,wWidth=$(window).width(),adjLeft=0,adjWidth=0;tip.css('visibility','hidden').show();width=target.data('width');nub=tip.children('.nub');nubHeight=this.outerHeight(nub);nubWidth=this.outerHeight(nub);objPos=function(obj,top,right,bottom,left,width){return obj.css({'top':(top)?top:'auto','bottom':(bottom)?bottom:'auto','left':(left)?left:'auto','right':(right)?right:'auto','width':(width)?width:'auto'}).end();};objPos(tip,(target.offset().top+this.outerHeight(target)+10),'auto','auto',target.offset().left,width);if($(window).width()<767){objPos(tip,(target.offset().top+this.outerHeight(target)+10),'auto','auto',12.5,$(this.scope).width());tip.addClass('tip-override');objPos(nub,-nubHeight,'auto','auto',target.offset().left);}else{var left=target.offset().left;if(Foundation.rtl){left=target.offset().left+target.offset().width-this.outerWidth(tip);}
objPos(tip,(target.offset().top+this.outerHeight(target)+10),'auto','auto',left,width);tip.removeClass('tip-override');if(classes&&classes.indexOf('tip-top')>-1){objPos(tip,(target.offset().top-this.outerHeight(tip)),'auto','auto',left,width)
.removeClass('tip-override');}else if(classes&&classes.indexOf('tip-left')>-1){objPos(tip,(target.offset().top+(this.outerHeight(target)/2)-nubHeight*2.5),'auto','auto',(target.offset().left-this.outerWidth(tip)-nubHeight),width)
.removeClass('tip-override');}else if(classes&&classes.indexOf('tip-right')>-1){objPos(tip,(target.offset().top+(this.outerHeight(target)/2)-nubHeight*2.5),'auto','auto',(target.offset().left+this.outerWidth(target)+nubHeight),width)
.removeClass('tip-override');}}
adjLeft=parseInt(tip.css('left'),10);adjWidth=parseInt(tip.css('width'),10);if(adjLeft+adjWidth>wWidth){adjLeft=adjLeft-((adjLeft+adjWidth)-wWidth);tip.css({'left':adjLeft-20});}
tip.css('visibility','visible').hide();},inheritable_classes:function(target){var inheritables=['tip-top','tip-left','tip-bottom','tip-right','noradius'].concat(this.settings.additionalInheritableClasses),classes=target.attr('class'),filtered=classes?$.map(classes.split(' '),function(el,i){if($.inArray(el,inheritables)!==-1){return el;}}).join(' '):'';return $.trim(filtered);},show:function($target){var $tip=this.getTip($target);this.reposition($target,$tip,$target.attr('class'));$tip.fadeIn(150);},hide:function($target){var $tip=this.getTip($target);$tip.fadeOut(150);},reload:function(){var $self=$(this);return($self.data('fndtn-tooltips'))?$self.foundationTooltips('destroy').foundationTooltips('init'):$self.foundationTooltips('init');},off:function(){$(this.scope).off('.fndtn.tooltip');$(this.settings.tooltipClass).each(function(i){$('[data-tooltip]').get(i).attr('title',$(this).text());}).remove();},reflow:function(){}};}(Foundation.zj,this,this.document));;(function($,window,document,undefined){'use strict';Foundation.libs.reveal={name:'reveal',version:'4.2.2',locked:false,settings:{animation:'fadeAndPop',animationSpeed:250,closeOnBackgroundClick:true,closeOnEsc:true,dismissModalClass:'close-reveal-modal',bgClass:'reveal-modal-bg',open:function(){},opened:function(){},close:function(){},closed:function(){},bg:$('.reveal-modal-bg'),css:{open:{'opacity':0,'visibility':'visible','display':'block'},close:{'opacity':1,'visibility':'hidden','display':'none'}}},init:function(scope,method,options){Foundation.inherit(this,'data_options delay');if(typeof method==='object'){$.extend(true,this.settings,method);}else if(typeof options!=='undefined'){$.extend(true,this.settings,options);}
if(typeof method!=='string'){this.events();return this.settings.init;}else{return this[method].call(this,options);}},events:function(){var self=this;$(this.scope)
.off('.fndtn.reveal')
.on('click.fndtn.reveal','[data-reveal-id]',function(e){e.preventDefault();if(!self.locked){var element=$(this),ajax=element.data('reveal-ajax');self.locked=true;if(typeof ajax==='undefined'){self.open.call(self,element);}else{var url=ajax===true?element.attr('href'):ajax;self.open.call(self,element,{url:url});}}})
.on('click.fndtn.reveal',this.close_targets(),function(e){e.preventDefault();if(!self.locked){var settings=$.extend({},self.settings,self.data_options($('.reveal-modal.open')));if($(e.target)[0]===$('.'+settings.bgClass)[0]&&!settings.closeOnBackgroundClick){return;}
self.locked=true;self.close.call(self,$(this).closest('.reveal-modal'));}})
.on('open.fndtn.reveal','.reveal-modal',this.settings.open)
.on('opened.fndtn.reveal','.reveal-modal',this.settings.opened)
.on('opened.fndtn.reveal','.reveal-modal',this.open_video)
.on('close.fndtn.reveal','.reveal-modal',this.settings.close)
.on('closed.fndtn.reveal','.reveal-modal',this.settings.closed)
.on('closed.fndtn.reveal','.reveal-modal',this.close_video);$('body').bind('keyup.reveal',function(event){var open_modal=$('.reveal-modal.open'),settings=$.extend({},self.settings,self.data_options(open_modal));if(event.which===27&&settings.closeOnEsc){open_modal.foundation('reveal','close');}});$(window).scroll(function(){var open_modal=$('#emailSignUpModal.open'),settings=$.extend({},self.settings,self.data_options(open_modal));if($(window).height()-open_modal.outerHeight()>=0)open_modal.foundation('reveal','reposition');});return true;},open:function(target,ajax_settings){if(target){if(typeof target.selector!=='undefined'){var modal=$('#'+target.data('reveal-id'));}else{var modal=$(this.scope);ajax_settings=target;}}else{var modal=$(this.scope);}
if(!modal.hasClass('open')){var open_modal=$('.reveal-modal.open');if(typeof modal.data('css-top')==='undefined'){modal.data('css-top',0)
.data('offset',this.cache_offset(modal));}
modal.trigger('open');if(open_modal.length<1){this.toggle_bg(modal);}
if(typeof ajax_settings==='undefined'||!ajax_settings.url){this.hide(open_modal,this.settings.css.close);this.show(modal,this.settings.css.open);}else{var self=this,old_success=typeof ajax_settings.success!=='undefined'?ajax_settings.success:null;$.extend(ajax_settings,{success:function(data,textStatus,jqXHR){if($.isFunction(old_success)){old_success(data,textStatus,jqXHR);}
modal.html(data);$(modal).foundation('section','reflow');self.hide(open_modal,self.settings.css.close);self.show(modal,self.settings.css.open);}});$.ajax(ajax_settings);}}},close:function(modal){var modal=modal&&modal.length?modal:$(this.scope),open_modals=$('.reveal-modal.open');if(open_modals.length>0){this.locked=true;modal.trigger('close');this.toggle_bg(modal);this.hide(open_modals,this.settings.css.close);}},close_targets:function(){var base='.'+this.settings.dismissModalClass;if(this.settings.closeOnBackgroundClick){return base+', .'+this.settings.bgClass;}
return base;},toggle_bg:function(modal){if($('.reveal-modal-bg').length===0){this.settings.bg=$('<div />',{'class':this.settings.bgClass})
.appendTo('body');}
if(this.settings.bg.filter(':visible').length>0){this.hide(this.settings.bg);}else{this.show(this.settings.bg);}},reposition:function(target){if(target){if(typeof target.selector!=='undefined'){var modal=$('#'+target.data('reveal-id'));}else{var modal=$(this.scope);ajax_settings=target;}}else{var modal=$(this.scope);}
if(/pop/i.test(this.settings.animation)){var curScrollTop=jQuery(window).scrollTop();var temptop=jQuery(window).scrollTop()+((jQuery(window).height()-modal.outerHeight())/2);temptop=(modal.outerHeight()>jQuery(window).height())?(jQuery(window).scrollTop()-(20+modal.outerHeight()-jQuery(window).height())):temptop;temptop=(temptop>=0)?temptop:0;var end_css={top:temptop+'px',opacity:1};if(temptop<curScrollTop)window.scrollTo(0,temptop);return modal.animate(end_css,0,'linear',function(){});}},show:function(el,css){if(css){if(/pop/i.test(this.settings.animation)){var end_css={top:$(window).scrollTop()+el.data('offset')+'px',opacity:1};return this.delay(function(){return el
.css(css)
.animate(end_css,this.settings.animationSpeed,'linear',function(){this.locked=false;el.trigger('opened');}.bind(this))
.addClass('open');}.bind(this),this.settings.animationSpeed/2);}
if(/fade/i.test(this.settings.animation)){var end_css={opacity:1};return this.delay(function(){return el
.css(css)
.animate(end_css,this.settings.animationSpeed,'linear',function(){this.locked=false;el.trigger('opened');}.bind(this))
.addClass('open');}.bind(this),this.settings.animationSpeed/2);}
return el.css(css).show().css({opacity:1}).addClass('open').trigger('opened');}
if(/fade/i.test(this.settings.animation)){return el.fadeIn(this.settings.animationSpeed/2);}
return el.show();},hide:function(el,css){if(el.hasClass('saturday_link')||el.hasClass('jackspade_link'))this.settings.animation='fade';else this.settings.animation='fadeAndPop';if(css){if(/pop/i.test(this.settings.animation)){var end_css={top:-$(window).scrollTop()-el.data('offset')+'px',opacity:0};return this.delay(function(){return el
.animate(end_css,this.settings.animationSpeed,'linear',function(){this.locked=false;el.css(css).trigger('closed');}.bind(this))
.removeClass('open');}.bind(this),this.settings.animationSpeed/2);}
if(/fade/i.test(this.settings.animation)){var end_css={opacity:0};return this.delay(function(){return el
.animate(end_css,this.settings.animationSpeed,'linear',function(){this.locked=false;el.css(css).trigger('closed');}.bind(this))
.removeClass('open');}.bind(this),this.settings.animationSpeed/2);}
return el.hide().css(css).removeClass('open').trigger('closed');}
if(/fade/i.test(this.settings.animation)){return el.fadeOut(this.settings.animationSpeed/2);}
return el.hide();},close_video:function(e){var video=$(this).find('.flex-video'),iframe=video.find('iframe');if(iframe.length>0){iframe.attr('data-src',iframe[0].src);iframe.attr('src','about:blank');video.hide();}},open_video:function(e){var video=$(this).find('.flex-video'),iframe=video.find('iframe');if(iframe.length>0){var data_src=iframe.attr('data-src');if(typeof data_src==='string'){iframe[0].src=iframe.attr('data-src');}else{var src=iframe[0].src;iframe[0].src=undefined;iframe[0].src=src;}
video.show();}},cache_offset:function(modal){modal.find('.js-modalContent').html(jQuery(".js-modal-loading").html());var offset=($(window).height()<400)?0:100;modal.hide();return offset;},off:function(){$(this.scope).off('.fndtn.reveal');},reflow:function(){}};}(Foundation.zj,this,this.document));;(function($,window,document,undefined){'use strict';var noop=function(){};var Orbit=function(el,settings){if(el.hasClass(settings.slides_container_class)){return this;}
var self=this,container,slides_container=el,number_container,bullets_container,timer_container,idx=0,animate,timer,locked=false,adjust_height_after=false;slides_container.children().first().addClass(settings.active_slide_class);self.update_slide_number=function(index){if(settings.slide_number){number_container.find('span:first').text(parseInt(index)+1);number_container.find('span:last').text(slides_container.children().length);}
if(settings.bullets){bullets_container.children().removeClass(settings.bullets_active_class);$(bullets_container.children().get(index)).addClass(settings.bullets_active_class);}};self.build_markup=function(){slides_container.wrap('<div class="'+settings.container_class+'"></div>');container=slides_container.parent();slides_container.addClass(settings.slides_container_class);if(settings.navigation_arrows){container.append($('<a>').addClass(settings.prev_class).append('<span>'));container.append($('<a>').addClass(settings.next_class).append('<span>'));}
if(settings.timer){timer_container=$('<div>').addClass(settings.timer_container_class);timer_container.append('<span>');timer_container.append($('<div>').addClass(settings.timer_progress_class));timer_container.addClass(settings.timer_paused_class);container.append(timer_container);}
if(settings.slide_number){number_container=$('<div>').addClass(settings.slide_number_class);number_container.append('<span></span> of <span></span>');container.append(number_container);}
if(settings.bullets){bullets_container=$('<ol>').addClass(settings.bullets_container_class);container.append(bullets_container);slides_container.children().each(function(idx,el){var bullet=$('<li>').attr('data-orbit-slide',idx);bullets_container.append(bullet);});}
if(settings.stack_on_small){container.addClass(settings.stack_on_small_class);}
self.update_slide_number(0);};self._goto=function(next_idx,start_timer){if(next_idx===idx){return false;}
if(typeof timer==='object'){timer.restart();}
var slides=slides_container.children();var dir='next';locked=true;if(next_idx<idx){dir='prev';}
if(next_idx>=slides.length){next_idx=0;}
else if(next_idx<0){next_idx=slides.length-1;}
var current=$(slides.get(idx));var next=$(slides.get(next_idx));current.css('zIndex',2);next.css('zIndex',4).addClass('active');slides_container.trigger('orbit:before-slide-change');settings.before_slide_change();var callback=function(){var unlock=function(){idx=next_idx;locked=false;if(start_timer===true){timer=self.create_timer();timer.start();}
self.update_slide_number(idx);slides_container.trigger('orbit:after-slide-change',[{slide_number:idx,total_slides:slides.length}]);settings.after_slide_change(idx,slides.length);};if(slides_container.height()!=next.height()){slides_container.animate({'height':next.height()},250,'linear',unlock);}else{unlock();}};if(slides.length===1){callback();return false;}
var start_animation=function(){if(dir==='next'){animate.next(current,next,callback);}
if(dir==='prev'){animate.prev(current,next,callback);}};if(next.height()>slides_container.height()){slides_container.animate({'height':next.height()},250,'linear',start_animation);}else{start_animation();}};self.next=function(e){e.stopImmediatePropagation();e.preventDefault();self._goto(idx+1);};self.prev=function(e){e.stopImmediatePropagation();e.preventDefault();self._goto(idx-1);};self.link_custom=function(e){e.preventDefault();var link=$(this).attr('data-orbit-link');if((typeof link==='string')&&(link=$.trim(link))!=""){var slide=container.find('[data-orbit-slide='+link+']');if(slide.index()!=-1){self._goto(slide.index());}}};self.link_bullet=function(e){var index=$(this).attr('data-orbit-slide');if((typeof index==='string')&&(index=$.trim(index))!=""){self._goto(index);}}
self.timer_callback=function(){self._goto(idx+1,true);}
self.compute_dimensions=function(){var current=$(slides_container.children().get(idx));var h=current.height();if(!settings.variable_height){slides_container.children().each(function(){if($(this).height()>h){h=$(this).height();}});}
slides_container.height(h);};self.create_timer=function(){var t=new Timer(container.find('.'+settings.timer_container_class),settings,self.timer_callback);return t;};self.stop_timer=function(){if(typeof timer==='object')timer.stop();};self.toggle_timer=function(){var t=container.find('.'+settings.timer_container_class);if(t.hasClass(settings.timer_paused_class)){if(typeof timer==='undefined'){timer=self.create_timer();}
timer.start();}
else{if(typeof timer==='object'){timer.stop();}}};self.init=function(){self.build_markup();if(settings.timer){timer=self.create_timer();timer.start();}
animate=new FadeAnimation(slides_container);if(settings.animation==='slide')
animate=new SlideAnimation(slides_container);container.on('click','.'+settings.next_class,self.next);container.on('click','.'+settings.prev_class,self.prev);container.on('click','[data-orbit-slide]',self.link_bullet);container.on('click',self.toggle_timer);container.on('touchstart.fndtn.orbit',function(e){if(!e.touches){e=e.originalEvent;}
var data={start_page_x:e.touches[0].pageX,start_page_y:e.touches[0].pageY,start_time:(new Date()).getTime(),delta_x:0,is_scrolling:undefined};container.data('swipe-transition',data);e.stopPropagation();})
.on('touchmove.fndtn.orbit',function(e){if(!e.touches){e=e.originalEvent;}
if(e.touches.length>1||e.scale&&e.scale!==1)return;var data=container.data('swipe-transition');if(typeof data==='undefined'){data={};}
data.delta_x=e.touches[0].pageX-data.start_page_x;if(typeof data.is_scrolling==='undefined'){data.is_scrolling=!!(data.is_scrolling||Math.abs(data.delta_x)<Math.abs(e.touches[0].pageY-data.start_page_y));}
if(!data.is_scrolling&&!data.active){e.preventDefault();var direction=(data.delta_x<0)?(idx+1):(idx-1);data.active=true;self._goto(direction);}})
.on('touchend.fndtn.orbit',function(e){container.data('swipe-transition',{});e.stopPropagation();})
.on('mouseenter.fndtn.orbit',function(e){if(settings.timer&&settings.pause_on_hover){self.stop_timer();}})
.on('mouseleave.fndtn.orbit',function(e){if(settings.timer&&settings.resume_on_mouseout){timer.start();}});$(document).on('click','[data-orbit-link]',self.link_custom);$(window).on('resize',self.compute_dimensions);$(window).on('load',self.compute_dimensions);slides_container.trigger('orbit:ready');};self.init();};var Timer=function(el,settings,callback){var self=this,duration=settings.timer_speed,progress=el.find('.'+settings.timer_progress_class),start,timeout,left=-1;this.update_progress=function(w){var new_progress=progress.clone();new_progress.attr('style','');new_progress.css('width',w+'%');progress.replaceWith(new_progress);progress=new_progress;};this.restart=function(){clearTimeout(timeout);el.addClass(settings.timer_paused_class);left=-1;self.update_progress(0);};this.start=function(){if(!el.hasClass(settings.timer_paused_class)){return true;}
left=(left===-1)?duration:left;el.removeClass(settings.timer_paused_class);start=new Date().getTime();progress.animate({'width':'100%'},left,'linear');timeout=setTimeout(function(){self.restart();callback();},left);el.trigger('orbit:timer-started')};this.stop=function(){if(el.hasClass(settings.timer_paused_class)){return true;}
clearTimeout(timeout);el.addClass(settings.timer_paused_class);var end=new Date().getTime();left=left-(end-start);var w=100-((left/duration)*100);self.update_progress(w);el.trigger('orbit:timer-stopped');};};var SlideAnimation=function(container){var duration=400;var is_rtl=($('html[dir=rtl]').length===1);var margin=is_rtl?'marginRight':'marginLeft';this.next=function(current,next,callback){next.animate({margin:'0%'},duration,'linear',function(){current.css(margin,'100%');callback();});};this.prev=function(current,prev,callback){prev.css(margin,'-100%');prev.animate({margin:'0%'},duration,'linear',function(){current.css(margin,'100%');callback();});};};var FadeAnimation=function(container){var duration=250;this.next=function(current,next,callback){next.css({'marginLeft':'0%','opacity':'0.01'});next.animate({'opacity':'1'},duration,'linear',function(){current.css('marginLeft','100%');callback();});};this.prev=function(current,prev,callback){prev.css({'marginLeft':'0%','opacity':'0.01'});prev.animate({'opacity':'1'},duration,'linear',function(){current.css('marginLeft','100%');callback();});};};Foundation.libs=Foundation.libs||{};Foundation.libs.orbit={name:'orbit',version:'4.3.1',settings:{animation:'slide',timer_speed:10000,pause_on_hover:true,resume_on_mouseout:false,animation_speed:500,stack_on_small:false,navigation_arrows:true,slide_number:true,container_class:'orbit-container',stack_on_small_class:'orbit-stack-on-small',next_class:'orbit-next',prev_class:'orbit-prev',timer_container_class:'orbit-timer',timer_paused_class:'paused',timer_progress_class:'orbit-progress',slides_container_class:'orbit-slides-container',bullets_container_class:'orbit-bullets',bullets_active_class:'active',slide_number_class:'orbit-slide-number',caption_class:'orbit-caption',active_slide_class:'active',orbit_transition_class:'orbit-transitioning',bullets:true,timer:true,variable_height:false,before_slide_change:noop,after_slide_change:noop},init:function(scope,method,options){var self=this;Foundation.inherit(self,'data_options');if(typeof method==='object'){$.extend(true,self.settings,method);}
if($(scope).is('[data-orbit]')){var $el=$(scope);var opts=self.data_options($el);new Orbit($el,$.extend({},self.settings,opts));}
$('[data-orbit]',scope).each(function(idx,el){var $el=$(el);var opts=self.data_options($el);new Orbit($el,$.extend({},self.settings,opts));});}};}(Foundation.zj,this,this.document));;(function($,window,document){'use strict';Foundation.libs.section={name:'section',version:'4.3.1',settings:{deep_linking:false,small_breakpoint:768,one_up:true,section_selector:'[data-section]',region_selector:'section, .section, [data-section-region]',title_selector:'.title, [data-section-title]',resized_data_attr:'data-section-resized',small_style_data_attr:'data-section-small-style',content_selector:'.content, [data-section-content]',nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:'active',callback:function(){}},init:function(scope,method,options){var self=this;Foundation.inherit(this,'throttle data_options position_right offset_right');if(typeof method==='object'){$.extend(true,self.settings,method);}
if(typeof method!=='string'){this.events();return true;}else{return this[method].call(this,options);}},events:function(){var self=this;var click_title_selectors=[],section_selector=self.settings.section_selector,region_selectors=self.settings.region_selector.split(","),title_selectors=self.settings.title_selector.split(",");for(var i=0,len=region_selectors.length;i<len;i++){var region_selector=region_selectors[i];for(var j=0,len1=title_selectors.length;j<len1;j++){var title_selector=section_selector+">"+region_selector+">"+title_selectors[j];click_title_selectors.push(title_selector+" a");click_title_selectors.push(title_selector);}}
$(self.scope)
.on('click.fndtn.section',click_title_selectors.join(","),function(e){var title=$(this).closest(self.settings.title_selector);self.close_navs(title);if(title.siblings(self.settings.content_selector).length>0){self.toggle_active.call(title[0],e);}});$(window)
.on('resize.fndtn.section',self.throttle(function(){self.resize();},30))
.on('hashchange.fndtn.section',self.set_active_from_hash);$(document).on('click.fndtn.section',function(e){if(e.isPropagationStopped&&e.isPropagationStopped())return;if(e.target===document)return;self.close_navs($(e.target).closest(self.settings.title_selector));});$(window).triggerHandler('resize.fndtn.section');$(window).triggerHandler('hashchange.fndtn.section');},close_navs:function(except_nav_with_title){var self=Foundation.libs.section,navsToClose=$(self.settings.nav_selector)
.filter(function(){return!$.extend({},self.settings,self.data_options($(this))).one_up;});if(except_nav_with_title.length>0){var section=except_nav_with_title.parent().parent();if(self.is_horizontal_nav(section)||self.is_vertical_nav(section)){navsToClose=navsToClose.filter(function(){return this!==section[0];});}}
navsToClose.children(self.settings.region_selector).removeClass(self.settings.active_class);},toggle_active:function(e){var $this=$(this),self=Foundation.libs.section,region=$this.parent(),content=$this.siblings(self.settings.content_selector),section=region.parent(),settings=$.extend({},self.settings,self.data_options(section)),prev_active_region=section.children(self.settings.region_selector).filter("."+self.settings.active_class);if(!settings.deep_linking&&content.length>0){e.preventDefault();}
e.stopPropagation();if(!region.hasClass(self.settings.active_class)){prev_active_region.removeClass(self.settings.active_class);region.addClass(self.settings.active_class);self.resize(region.find(self.settings.section_selector).not("["+self.settings.resized_data_attr+"]"),true);}else if(!settings.one_up&&(self.small(section)||self.is_vertical_nav(section)||self.is_horizontal_nav(section)||self.is_accordion(section))){region.removeClass(self.settings.active_class);}else if(region.parent().hasClass('small-closable')&&Modernizr.mq('only all and (max-width: 767px)')){region.removeClass(self.settings.active_class);}
settings.callback(section);},check_resize_timer:null,resize:function(sections,ensure_has_active_region){var self=Foundation.libs.section,is_small_window=self.small($(document)),should_be_resized=function(section,now_is_hidden){return!self.is_accordion(section)&&!section.is("["+self.settings.resized_data_attr+"]")&&(!is_small_window||self.is_horizontal_tabs(section))&&now_is_hidden===(section.css('display')==='none'||!section.parent().is(':visible'));};sections=sections||$(self.settings.section_selector);clearTimeout(self.check_resize_timer);if(!is_small_window){sections.removeAttr(self.settings.small_style_data_attr);}
sections.each(function(){var section=$(this),regions=section.children(self.settings.region_selector);if(regions.parent().hasClass('small-closable')&&Modernizr.mq('only all and (max-width: 767px)')){}
if(regions.parent().hasClass('small-closable')&&!Modernizr.mq('only all and (max-width: 767px)')){var curTab=0;if(regions.filter(":visible").filter(".active").index()>0)curTab=regions.filter(":visible").filter(".active").index();regions.filter(":visible").removeClass(self.settings.active_class);regions.filter(":visible").eq(curTab).addClass(self.settings.active_class);}});sections.filter(function(){return should_be_resized($(this),false);})
.each(function(){var section=$(this),regions=section.children(self.settings.region_selector),titles=regions.children(self.settings.title_selector),content=regions.children(self.settings.content_selector),titles_max_height=0;if(ensure_has_active_region&&section.children(self.settings.region_selector).filter("."+self.settings.active_class).length==0){var settings=$.extend({},self.settings,self.data_options(section));if(!settings.deep_linking&&(settings.one_up||!self.is_horizontal_nav(section)&&!self.is_vertical_nav(section)&&!self.is_accordion(section))){regions.filter(":visible").first().addClass(self.settings.active_class);}}
if(self.is_horizontal_tabs(section)||self.is_auto(section)||self.is_horizontal_tabs(section)){var titles_sum_width=0;titles.each(function(){var title=$(this);if(title.is(":visible")){title.css('height','auto');title.css(!self.rtl?'left':'right',titles_sum_width);var title_h_border_width=parseInt(title.css("border-"+(self.rtl?'left':'right')+"-width"),10);if(title_h_border_width.toString()==='Nan'){title_h_border_width=0;}
titles_sum_width+=self.outerWidth(title)-title_h_border_width;titles_max_height=Math.max(titles_max_height,self.outerHeight(title));}});titles.css('height',titles_max_height);regions.each(function(){var region=$(this),region_content=region.children(self.settings.content_selector),content_top_border_width=parseInt(region_content.css("border-top-width"),10);if(content_top_border_width.toString()==='Nan'){content_top_border_width=0;}
region.css('padding-top',titles_max_height-content_top_border_width);});section.css("min-height",titles_max_height);}else if(self.is_horizontal_nav(section)){var first=true;titles.each(function(){titles_max_height=Math.max(titles_max_height,self.outerHeight($(this)));});regions.each(function(){var region=$(this);region.css("margin-left","-"+(first?section:region.children(self.settings.title_selector)).css("border-left-width"));first=false;});regions.css("margin-top","-"+section.css("border-top-width"));titles.css('height',titles_max_height);content.css('top',titles_max_height);section.css("min-height",titles_max_height);}else if(self.is_vertical_tabs(section)){var titles_sum_height=0;titles.each(function(){var title=$(this);if(title.is(":visible")){title.css('top',titles_sum_height);var title_top_border_width=parseInt(title.css("border-top-width"),10);if(title_top_border_width.toString()==='Nan'){title_top_border_width=0;}
titles_sum_height+=self.outerHeight(title)-title_top_border_width;}});content.css('min-height',titles_sum_height+1);}else if(self.is_vertical_nav(section)){var titles_max_width=0,first1=true;titles.each(function(){titles_max_width=Math.max(titles_max_width,self.outerWidth($(this)));});regions.each(function(){var region=$(this);region.css("margin-top","-"+(first1?section:region.children(self.settings.title_selector)).css("border-top-width"));first1=false;});titles.css('width',titles_max_width);content.css(!self.rtl?'left':'right',titles_max_width);section.css('width',titles_max_width);}
section.attr(self.settings.resized_data_attr,true);});if($(self.settings.section_selector).filter(function(){return should_be_resized($(this),true);}).length>0)
self.check_resize_timer=setTimeout(function(){self.resize(sections.filter(function(){return should_be_resized($(this),false);}),true);},700);if(is_small_window){sections.attr(self.settings.small_style_data_attr,true);}},is_vertical_nav:function(el){return/vertical-nav/i.test(el.data('section'));},is_horizontal_nav:function(el){return/horizontal-nav/i.test(el.data('section'));},is_accordion:function(el){return/accordion/i.test(el.data('section'));},is_horizontal_tabs:function(el){return/^tabs$/i.test(el.data('section'));},is_vertical_tabs:function(el){return/vertical-tabs/i.test(el.data('section'));},is_auto:function(el){var data_section=el.data('section');return data_section===''||/auto/i.test(data_section);},set_active_from_hash:function(){var self=Foundation.libs.section,hash=window.location.hash.substring(1),sections=$(self.settings.section_selector);sections.each(function(){var section=$(this),settings=$.extend({},self.settings,self.data_options(section)),regions=section.children(self.settings.region_selector),set_active_from_hash=settings.deep_linking&&hash.length>0,selected=false;regions.each(function(){var region=$(this);if(selected){region.removeClass(self.settings.active_class);}else if(set_active_from_hash){var data_slug=region.children(self.settings.content_selector).data('slug');if(data_slug&&new RegExp(data_slug,'i').test(hash)){if(!region.hasClass(self.settings.active_class))
region.addClass(self.settings.active_class);selected=true;}else{region.removeClass(self.settings.active_class);}}else if(region.hasClass(self.settings.active_class)){selected=true;}});if(!selected&&!settings.deep_linking&&(settings.one_up||!self.is_horizontal_nav(section)&&!self.is_vertical_nav(section)&&!self.is_accordion(section)))
if(regions.parent().hasClass('small-closable')&&!Modernizr.mq('only all and (max-width: 767px)'))
regions.filter(":visible").first().addClass(self.settings.active_class);});},reflow:function(){var self=Foundation.libs.section;$(self.settings.section_selector).removeAttr(self.settings.resized_data_attr);self.throttle(function(){self.resize();},30)();},small:function(el){var settings=$.extend({},this.settings,this.data_options(el));if(this.is_horizontal_tabs(el)){return false;}
if(el&&this.is_accordion(el)){return true;}
if($('html').hasClass('lt-ie9')){return false;}
if($('html').hasClass('ie8compat')){return true;}
return $(this.scope).width()<settings.small_breakpoint;},off:function(){$(this.scope).off('.fndtn.section');$(window).off('.fndtn.section');$(document).off('.fndtn.section');}};$.fn.reflow_section=function(ensure_has_active_region){var section=this,self=Foundation.libs.section;section.removeAttr(self.settings.resized_data_attr);self.throttle(function(){self.resize(section,ensure_has_active_region);},30)();return this;};}(Foundation.zj,window,document));(function(Venda,$){"use strict";Venda.namespace('Widget.HandleSection');Venda.Widget.HandleSection.tabID='';Venda.Widget.HandleSection.tabNav=null;Venda.Widget.HandleSection.tabElement=null;Venda.Widget.HandleSection.totalHide=null;Venda.Widget.HandleSection.activeIndex=0;Venda.Widget.HandleSection.init=function(self){this.tabID=$(self).attr('id');this.tabNav=$(self).find('.title');this.tabElement=$(self).find('.content');this.hideEmptyTab('#'+this.tabID);if(this.totalHide>this.getTotalTab()){$(this.tabID).hide();}
this.checkIEversion('#'+this.tabID);};Venda.Widget.HandleSection.hideEmptyTab=function(ID){var totalHide=0,activeTab=0,txt='',setNewactiveTab=false;$(ID).find('.content').each(function(index){txt=$(ID).find('.content').eq(index).text();txt=$.trim(txt);if(0===txt.length){totalHide++;$(ID).find('.title').eq(index).hide();$(ID).find('.content').eq(index).hide();if(index===activeTab){setNewactiveTab=true;}}});if(setNewactiveTab){this.activeIndex=$(ID).find('.title:visible').index(ID+' .title');this.setActiveTab(this.activeIndex);}
this.totalHide=totalHide;};Venda.Widget.HandleSection.setActiveTab=function(index){this.tabNav.parent().removeClass('active');this.tabNav.eq(index).parent().addClass('active');};Venda.Widget.HandleSection.getTotalTab=function(){return this.tabNav.length;};Venda.Widget.HandleSection.checkIEversion=function(ID){if($('html').hasClass('lt-ie9')){$(ID).removeClass('auto').addClass('tabs');$(ID).attr('data-section','tabs');$(ID+' .section').each(function(){if(!$(this).is('.active')){$(this).addClass('nopad');}});$(document).foundation('section','reflow');}};$(document).ready(function(){if(jQuery('.section-container').length>0){jQuery('.section-container').each(function(){Venda.Widget.HandleSection.init(this);});}});}(Venda,jQuery));(function($){'use strict';var defaults={cookieName:'ck-remember-me',selector:'.remember-me-wrap input',emailInput:'input[name="email"]'};var cookieObj=new CookieJar({expires:3600*24*30,path:'/'});var RememberMe={init:function(options){this.options=$.extend({},defaults,options);this.domInit();return this;},domInit:function(){this.setUpHandler();return this;},setUpHandler:function(scope){if(typeof scope==='undefined'){scope=$(document);}
$(document).on('trigger-remember-me',$.proxy(this.rememberMeHandler,this))
.trigger('trigger-remember-me');$(document).on('trigger-remember-me-save',$.proxy(this.rememberMeSaveHandler,this));this.watchLog4();},getParam:function(url,urlParam){var re=new RegExp('[?&]'+urlParam+'=([^&]+)');var match=url.match(re);return match?unescape(match[1]):false;},setCookie:function(){var saved='',$cb=$(this.options.selector),$ele=$cb.parents('form').find(this.options.emailInput);if($ele.is(':visible')){saved=$ele.val();}
if(saved!==''&&$cb.is(':checked')){cookieObj.put(this.options.cookieName,saved);}else{cookieObj.put(this.options.cookieName,'');}
return this;},getCookie:function(){return cookieObj.get(this.options.cookieName)||'';},setEmail:function(){var saved=this.getCookie(),$cb=$(this.options.selector),$ele=$cb.parents('form').find(this.options.emailInput);if(saved!==''){$ele.val(saved);$cb.prop('checked',true);}
return this;},rememberMeHandler:function(){if($(this.options.selector).is(':visible')){this.setEmail();}},rememberMeSaveHandler:function(){this.setCookie();},getCurrentURL:function(){return window.location.href;},watchLog4:function(){if(this.getParam(this.getCurrentURL(),'log')==='4'){cookieObj.put(this.options.cookieName,'');}}};if(typeof window.jasmineRequire==='object'){window.RememberMe=RememberMe;}else{RememberMe.init(defaults);}})(jQuery);!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(n=n.slice(0,n.length-1),a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){return n.apply(b,v.call(arguments,0).concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if("string"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,d=function(a,b,c){b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){var e=b[d];"function"==typeof e&&"constructor"!==d&&c.push(d)}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){var a=Array.prototype.unshift;return a.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice;this.listeners=this.listeners||{},a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;a>c;c++){var d=Math.floor(36*Math.random());b+=d.toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return e!==f||"hidden"!==f&&"visible"!==f?"scroll"===e||"scroll"===f?!0:d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth:!1},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),this.$results.append(d)},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){var c=b.find(".select2-results");c.append(a)},c.prototype.sort=function(a){var b=this.options.get("sorter");return b(a)},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()}),e=b.$results.find(".select2-results__option[aria-selected]");e.each(function(){var b=a(this),c=a.data(this,"data"),e=""+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr("aria-selected","true"):b.attr("aria-selected","false")});var f=e.filter("[aria-selected=true]");f.length>0?f.first().trigger("mouseenter"):e.first().trigger("mouseenter")})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(b){var c=document.createElement("li");c.className="select2-results__option";var d={role:"treeitem","aria-selected":"false"};b.disabled&&(delete d["aria-selected"],d["aria-disabled"]="true"),null==b.id&&delete d["aria-selected"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role="group",d["aria-label"]=b.text,delete d["aria-selected"]);for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement("strong");h.className="select2-results__group";{a(h)}this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,"data",b),c},c.prototype.bind=function(b){var c=this,d=b.id+"-results";this.$results.attr("id",d),b.on("results:all",function(a){c.clear(),c.append(a.data),b.isOpen()&&c.setClasses()}),b.on("results:append",function(a){c.append(a.data),b.isOpen()&&c.setClasses()}),b.on("query",function(a){c.showLoading(a)}),b.on("select",function(){b.isOpen()&&c.setClasses()}),b.on("unselect",function(){b.isOpen()&&c.setClasses()}),b.on("open",function(){c.$results.attr("aria-expanded","true"),c.$results.attr("aria-hidden","false"),c.setClasses(),c.ensureHighlightVisible()}),b.on("close",function(){c.$results.attr("aria-expanded","false"),c.$results.attr("aria-hidden","true"),c.$results.removeAttr("aria-activedescendant")}),b.on("results:toggle",function(){var a=c.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),b.on("results:select",function(){var a=c.getHighlightedResults();if(0!==a.length){var b=a.data("data");"true"==a.attr("aria-selected")?c.trigger("close"):c.trigger("select",{data:b})}}),b.on("results:previous",function(){var a=c.getHighlightedResults(),b=c.$results.find("[aria-selected]"),d=b.index(a);if(0!==d){var e=d-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger("mouseenter");var g=c.$results.offset().top,h=f.offset().top,i=c.$results.scrollTop()+(h-g);0===e?c.$results.scrollTop(0):0>h-g&&c.$results.scrollTop(i)}}),b.on("results:next",function(){var a=c.getHighlightedResults(),b=c.$results.find("[aria-selected]"),d=b.index(a),e=d+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger("mouseenter");var g=c.$results.offset().top+c.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=c.$results.scrollTop()+h-g;0===e?c.$results.scrollTop(0):h>g&&c.$results.scrollTop(i)}}),b.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")}),b.on("results:message",function(a){c.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=c.$results.scrollTop(),d=c.$results.get(0).scrollHeight-c.$results.scrollTop()+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&d<=c.$results.height();e?(c.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(c.$results.scrollTop(c.$results.get(0).scrollHeight-c.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(b){var d=a(this),e=d.data("data");return"true"===d.attr("aria-selected")?void(c.options.get("multiple")?c.trigger("unselect",{originalEvent:b,data:e}):c.trigger("close")):void c.trigger("select",{originalEvent:b,data:e})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var b=a(this).data("data");c.getHighlightedResults().removeClass("select2-results__option--highlighted"),c.trigger("results:focus",{data:b,element:a(this)})})},c.prototype.getHighlightedResults=function(){var a=this.$results.find(".select2-results__option--highlighted");return a},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find("[aria-selected]"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),2>=c?this.$results.scrollTop(0):(g>this.$results.outerHeight()||0>g)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return a}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class="select2-selection" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),b.attr("title",this.$element.attr("title")),b.attr("tabindex",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a){var b=this,d=(a.id+"-container",a.id+"-results");this.container=a,this.$selection.on("focus",function(a){b.trigger("focus",a)}),this.$selection.on("blur",function(a){b.trigger("blur",a)}),this.$selection.on("keydown",function(a){b.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()}),a.on("results:focus",function(a){b.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){b.update(a.data)}),a.on("open",function(){b.$selection.attr("aria-expanded","true"),b.$selection.attr("aria-owns",d),b._attachCloseHandler(a)}),a.on("close",function(){b.$selection.attr("aria-expanded","false"),b.$selection.removeAttr("aria-activedescendant"),b.$selection.removeAttr("aria-owns"),b.$selection.focus(),b._detachCloseHandler(a)}),a.on("enable",function(){b.$selection.attr("tabindex",b._tabindex)}),a.on("disable",function(){b.$selection.attr("tabindex","-1")})},d.prototype._attachCloseHandler=function(b){a(document.body).on("mousedown.select2."+b.id,function(b){var c=a(b.target),d=c.closest(".select2"),e=a(".select2.select2-container--open");e.each(function(){var b=a(this);if(this!=d[0]){var c=b.data("element");c.select2("close")}})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){var c=b.find(".selection");c.append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},d.prototype.bind=function(a){var b=this;d.__super__.bind.apply(this,arguments);var c=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",c),this.$selection.attr("aria-labelledby",c),this.$selection.on("mousedown",function(a){1===a.which&&b.trigger("toggle",{originalEvent:a})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),a.on("selection:update",function(a){b.update(a.data)})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a){var b=this.options.get("templateSelection"),c=this.options.get("escapeMarkup");return c(b(a))},d.prototype.selectionContainer=function(){return a("<span></span>")},d.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.display(b),d=this.$selection.find(".select2-selection__rendered");d.empty().append(c),d.prop("title",b.title||b.text)},d}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(){var b=this;d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){b.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(c){var d=a(this),e=d.parent(),f=e.data("data");b.trigger("unselect",{originalEvent:c,data:f})})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a){var b=this.options.get("templateSelection"),c=this.options.get("escapeMarkup");return c(b(a))},d.prototype.selectionContainer=function(){var b=a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return b},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.display(e),g=this.selectionContainer();g.append(f),g.prop("title",e.title||e.text),g.data("data",e),b.push(g)}var h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),b.define("select2/selection/placeholder",["../utils"],function(){function a(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)}return a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},a.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id,d=b.length>1;if(d||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(e)},a}),b.define("select2/selection/allowClear",["jquery","../keys"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)}),b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get("disabled")){var c=this.$selection.find(".select2-selection__clear");if(0!==c.length){b.stopPropagation();for(var d=c.data("data"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger("unselect",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle")}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||(c.which==b.DELETE||c.which==b.BACKSPACE)&&this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(".select2-selection__placeholder").length>0||0===c.length)){var d=a('<span class="select2-selection__clear">&times;</span>');d.data("data",c),this.$selection.find(".select2-selection__rendered").prepend(d)}},c}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></li>');this.$searchContainer=c,this.$search=c.find("input");var d=b.call(this);return d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus()}),b.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val(""),e.$search.focus()}),b.on("enable",function(){e.$search.prop("disabled",!1)}),b.on("disable",function(){e.$search.prop("disabled",!0)}),this.$selection.on("focusin",".select2-search--inline",function(a){e.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){e.trigger("blur",a)}),this.$selection.on("keydown",".select2-search--inline",function(a){a.stopPropagation(),e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented();var b=a.which;if(b===c.BACKSPACE&&""===e.$search.val()){var d=e.$searchContainer.prev(".select2-selection__choice");if(d.length>0){var f=d.data("data");e.searchRemoveChoice(f),a.preventDefault()}}}),this.$selection.on("input",".select2-search--inline",function(){e.$selection.off("keyup.search")}),this.$selection.on("keyup.search input",".select2-search--inline",function(a){e.handleSearch(a)})},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.trigger("open"),this.$search.val(b.text+" ")},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";if(""!==this.$search.attr("placeholder"))a=this.$selection.find(".select2-selection__rendered").innerWidth();else{var b=this.$search.val().length+1;a=.75*b+"em"}this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],g=["opening","closing","selecting","unselecting"];b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){var a={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return a}),b.define("select2/data/base",["../utils"],function(a){function b(){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return d+=a.generateChars(4),d+=null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4)},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple"))return a.selected=!1,c(a.element).is("option")?(a.element.selected=!1,void this.$element.trigger("change")):void this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")})},d.prototype.bind=function(a){var b=this;this.container=a,a.on("select",function(a){b.select(a.data)}),a.on("unselect",function(a){b.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){c.removeData(this,"data")})},d.prototype.query=function(a,b){var d=[],e=this,f=this.$element.children();f.each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement("optgroup"),b.label=a.text):(b=document.createElement("option"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,"data",e),d},d.prototype.item=function(a){var b={};if(b=c.data(a[0],"data"),null!=b)return b;if(a.is("option"))b={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){b={text:a.prop("label"),children:[],title:a.prop("title")};for(var d=a.children("option"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],"data",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:""},a);var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){var c=this.options.get("matcher");return c(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find("option"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=(c.extend(!0,{},l,j),this.option(l));k.replaceWith(m)}else{var n=this.option(j);if(j.children){var o=this.convertToOptions(j.children);b.appendMany(n,o)}h.push(n)}}return h},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(b,c){this.ajaxOptions=this._applyDefaults(c.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),a.__super__.constructor.call(this,b,c)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return{q:a.term}},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url(a)),"function"==typeof f.data&&(f.data=f.data(a)),this.ajaxOptions.delay&&""!==a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");if(void 0!==f&&(this.createTag=f),b.call(this,c,d),a.isArray(e))for(var g=0;g<e.length;g++){var h=e[g],i=this._normalizeItem(h),j=this.option(i);this.$element.append(j)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0),k=i.text===b.term;if(k||j)return f?!1:(a.data=g,void c(a))}if(f)return!0;var l=e.createTag(b);if(null!=l){var m=e.option(l);m.attr("data-select2-tag",!0),e.addOptions([m]),e.insertTag(g,l)}a.results=g,c(a)}var e=this;return this._removeOldTags(),null==b.term||null!=b.page?void a.call(this,b,c):void a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(){var b=(this._lastTag,this.$element.find("option[data-select2-tag]"));b.each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(a,b,c){function d(a){e.select(a)}var e=this;b.term=b.term||"";var f=this.tokenizer(b,this.options,d);f.term!==b.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.focus()),b.term=f.term),a.call(this,b,c)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);e(m),g=g.substr(h+1)||"",h=0}else h++}return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",b.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",this.maximumInputLength>0&&b.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return d.maximumSelectionLength>0&&f>=d.maximumSelectionLength?void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}}):void a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b,b},c.prototype.position=function(){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a){function b(){}return b.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val("")}),c.on("results:all",function(a){if(null==a.query.term||""===a.query.term){var b=e.showSearch(a);b?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide")}})},b.prototype.handleSearch=function(){if(!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},b.prototype.showSearch=function(){return!0},b}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1),d=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1);c+50>=d&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="option load-more" role="treeitem"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(a,b,c){this.$dropdownParent=c.get("dropdownParent")||document.body,a.call(this,b,c)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c){var d=this,e="scroll.select2."+c.id,f="resize.select2."+c.id,g="orientationchange.select2."+c.id,h=this.$container.parents().filter(b.hasScroll);h.each(function(){a(this).data("select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),h.on(e,function(){var b=a(this).data("select2-scroll-position");a(this).scrollTop(b.y)}),a(window).on(e+" "+f+" "+g,function(){d._positionDropdown(),d._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c){var d="scroll.select2."+c.id,e="resize.select2."+c.id,f="orientationchange.select2."+c.id,g=this.$container.parents().filter(b.hasScroll);g.off(d),a(window).off(d+" "+e+" "+f)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=(this.$container.position(),this.$container.offset());f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom};c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-h.height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){this.$dropdownContainer.width();var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.width="auto"),this.$dropdown.css(a)},c.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return a(c.data.results)<this.minimumResultsForSearch?!1:b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(){d._handleSelectOnClose()})},a.prototype._handleSelectOnClose=function(){var a=this.getHighlightedResults();a.length<1||this.trigger("select",{data:a.data("data")})},a}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close")},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){var b=a.minimum-a.input.length,c="Please enter "+b+" or more characters";return c},loadingMore:function(){return"Loading more results"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}D.prototype.apply=function(l){if(l=a.extend({},this.defaults,l),null==l.dataAdapter){if(l.dataAdapter=null!=l.ajax?o:null!=l.data?n:m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+"compat/dropdownCss");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.selectionAdapter=l.multiple?e:d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+"compat/containerCss");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if("string"==typeof l.language)if(l.language.indexOf("-")>0){var H=l.language.split("-"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push("en");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(O){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(P){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var Q=k.loadPath(this.defaults.amdLanguageBase+"en"),R=new k(l.language);R.extend(Q),l.translations=R}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){var h=e.children[g],i=c(d,h);null==i&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();return j.indexOf(k)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(this.defaults,f)};var E=new D;return E}),b.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"];null==this.options.multiple&&(this.options.multiple=a.prop("multiple")),null==this.options.disabled&&(this.options.disabled=a.prop("disabled")),null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang"))),null==this.options.dir&&(this.options.dir=a.prop("dir")?a.prop("dir"):a.closest("[dir]").prop("dir")?a.closest("[dir]").prop("dir"):"ltr"),a.prop("disabled",this.options.disabled),a.prop("multiple",this.options.multiple),a.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),a.data("data",a.data("select2Tags")),a.data("tags",!0)),a.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",a.data("ajaxUrl")),a.data("ajax--url",a.data("ajaxUrl")));var e={};e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,c){null!=a.data("select2")&&a.data("select2").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr("tabindex")||0;a.data("old-tabindex",d),a.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get("selectionAdapter");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get("dropdownAdapter");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get("resultsAdapter");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger("selection:update",{data:a})}),a.addClass("select2-hidden-accessible"),a.attr("aria-hidden","true"),this._syncAttributes(),a.data("select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b="";return b=null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4),b="select2-"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return 0>=e?"auto":e+"px"}if("style"==b){var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;i>h;h+=1){var j=g[h].replace(/\s/g,""),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this._sync=c.bind(this._syncAttributes,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._sync);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._sync)}),this._observer.observe(this.$element[0],{attributes:!0,subtree:!1})):this.$element[0].addEventListener&&this.$element[0].addEventListener("DOMAttrModified",b._sync,!1)},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle"];this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("focus",function(){a.$container.addClass("select2-container--focus")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open"),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ENTER?(a.trigger("results:select"),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle"),b.preventDefault()):c===d.UP?(a.trigger("results:previous"),b.preventDefault()):c===d.DOWN?(a.trigger("results:next"),b.preventDefault()):(c===d.ESC||c===d.TAB)&&(a.close(),b.preventDefault()):(c===d.ENTER||c===d.SPACE||(c===d.DOWN||c===d.UP)&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable")):this.trigger("enable")},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||(this.trigger("query",{}),this.trigger("open"))},e.prototype.close=function(){this.isOpen()&&this.trigger("close")},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._sync),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&this.$element[0].removeEventListener("DOMAttrModified",this._sync,!1),this._sync=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),b.data("element",this.$element),b},e}),b.define("jquery.select2",["jquery","require","./select2/core","./select2/defaults"],function(a,b,c,d){if(b("jquery.mousewheel"),null==a.fn.select2){var e=["open","close","destroy"];a.fn.select2=function(b){if(b=b||{},"object"==typeof b)return this.each(function(){{var d=a.extend({},b,!0);new c(a(this),d)}}),this;if("string"==typeof b){var d=this.data("select2");null==d&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2.");var f=Array.prototype.slice.call(arguments,1),g=d[b](f);return a.inArray(b,e)>-1?this:g}throw new Error("Invalid arguments for Select2: "+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),b.define("jquery.mousewheel",["jquery"],function(a){return a}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c});jQuery(function(){if(jQuery('select#cntrylist').length>0){Venda.CountrySelect.Init();}});